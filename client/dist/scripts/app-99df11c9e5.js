function RootController(e,t,a,i,n){function s(){n.remove("permission"),n.remove("token"),t.go("auth")}var o=this;e.Globalize.culture(i.get("TRANSLATE_LANG_KEY")),o.changeLang=function(i){a.use(i),e.Globalize.culture(i),t.reload()},o.logout=s}RootController.$inject=["$window","$state","$translate","$translateLocalStorage","$cookies"],function(){"use strict";angular.module("pjtLayout",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ui.router","ui.bootstrap","toastr","dx","pascalprecht.translate","chart.js","ngStorage"])}(),angular.module("pjtLayout").controller("RootController",RootController),function(){"use strict";function e(e,t,a){function i(i,n,s,o){return e({method:"GET",url:"/api/v1/statistics",headers:{Authorization:"Token "+a.get("token")},params:{advertiser_id:i,from_date:n,to_date:s,by:o}}).then(function(e){for(var a in e.data.statistics)e.data.statistics[a].cvr=+parseFloat(e.data.statistics[a].cvr).toFixed(4),e.data.statistics[a].ctr=+parseFloat(e.data.statistics[a].ctr).toFixed(4),e.data.statistics[a].cpc=+parseFloat(e.data.statistics[a].cpc).toFixed(2),e.data.statistics[a].cpm=+parseFloat(e.data.statistics[a].cpm).toFixed(4),e.data.statistics[a].spend=+parseFloat(e.data.statistics[a].spend).toFixed(2),e.data.statistics[a].day=t.moment(e.data.statistics[a].day).format("DD/MM");return e.data})}function n(t,i,n){return e({method:"GET",url:"/api/v1/totals",headers:{Authorization:"Token "+a.get("token")},params:{advertiser_id:t,from_date:i,to_date:n}}).then(function(e){return e.data.totals.cvr=+parseFloat(e.data.totals.cvr).toFixed(4),e.data.totals.ctr=+parseFloat(e.data.totals.ctr).toFixed(4),e.data.totals.cpc=+parseFloat(e.data.totals.cpc).toFixed(2),e.data.totals.cpm=+parseFloat(e.data.totals.cpm).toFixed(2),e.data.totals.spend=+parseFloat(e.data.totals.spend).toFixed(2),e.data.totals})}function s(t,i,n,s,o,r,l,d,c){return r?(l=r[0].desc===!0?"desc":"asc",r=r[0].selector):(r="campaign",l="DESC"),null==o&&(o=20),null==s&&(s=0),e({method:"GET",url:"/api/v1/campaigns",headers:{Authorization:"Token "+a.get("token")},params:{advertiser_id:t,from_date:i,to_date:n,skip:s,take:o,sort:r,order:l,stat_by:d,filter:c}}).then(function(e){for(var t in e.data.campaigns)e.data.campaigns[t].cvr=+parseFloat(e.data.campaigns[t].cvr).toFixed(4),e.data.campaigns[t].ctr=+parseFloat(e.data.campaigns[t].ctr).toFixed(4),e.data.campaigns[t].cpc=+parseFloat(e.data.campaigns[t].cpc).toFixed(4),e.data.campaigns[t].cpm=+parseFloat(e.data.campaigns[t].cpm).toFixed(4),e.data.campaigns[t].spend=+parseFloat(e.data.campaigns[t].spend).toFixed(4);return e.data})}function o(t,i,n){return e({method:"GET",url:"/api/v1/map/clicks",headers:{Authorization:"Token "+a.get("token")},params:{advertiser_id:t,from_date:i,to_date:n}}).then(function(e){return e.data})}var r=this;r.statsCampaigns=s,r.statsTotals=n,r.statsChart=i,r.statsMap=o}e.$inject=["$http","$window","$cookies"],angular.module("pjtLayout").service("Main",e)}(),function(){"use strict";function e(e,t,a,i,n,s){function o(){for(var e in i.checkChart)i.checkChart[e]?"imp"==e?r.chartOptionsFunc.getSeriesByName("Impressions").show():"cvr"==e?r.chartOptionsFunc.getSeriesByName("CVR").show():"cpc"==e?r.chartOptionsFunc.getSeriesByName("CPC").show():"clicks"==e?r.chartOptionsFunc.getSeriesByName("clicks").show():"spend"==e?r.chartOptionsFunc.getSeriesByName("media").show():"conv"==e?r.chartOptionsFunc.getSeriesByName("conversions").show():"ctr"==e&&r.chartOptionsFunc.getSeriesByName("CTR").show():"imp"==e?r.chartOptionsFunc.getSeriesByName("Impressions").hide():"cvr"==e?r.chartOptionsFunc.getSeriesByName("CVR").hide():"cpc"==e?r.chartOptionsFunc.getSeriesByName("CPC").hide():"clicks"==e?r.chartOptionsFunc.getSeriesByName("clicks").hide():"spend"==e?r.chartOptionsFunc.getSeriesByName("media").hide():"conv"==e?r.chartOptionsFunc.getSeriesByName("conversions").hide():"ctr"==e&&r.chartOptionsFunc.getSeriesByName("CTR").hide()}var r=this;r.advertiser=i.advertiser,r.Main=s,r.multipleTotalCount=0,r.checkChart=[],r.Init=[],r.by="imp,cvr,cpc,clicks,spend,conv,ctr";var l=n.instant;null==i.checkChart&&(i.checkChart={imp:!0,cvr:!1,cpc:!1,clicks:!1,spend:!1,conv:!1,ctr:!1}),r.chartSeries=[{valueField:"imp",name:"Impressions",axis:"imp",visible:i.checkChart.imp},{valueField:"cvr",name:"CVR",axis:"cvr",visible:i.checkChart.cvr},{valueField:"cpc",name:"CPC",axis:"cpc",visible:i.checkChart.cpc},{valueField:"clicks",name:"clicks",axis:"clicks",visible:i.checkChart.clicks},{valueField:"spend",name:"media",axis:"spend",visible:i.checkChart.spend},{valueField:"conv",name:"conversions",axis:"conv",visible:i.checkChart.conv},{valueField:"ctr",name:"CTR",axis:"ctr",visible:i.checkChart.ctr}],null==i.SelectedTime?(i.SelectedTime=0,i.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),i.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix(),r.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),r.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):null==i.dataStart||null==i.dataEnd?(i.SelectedTime=0,i.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),i.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix(),r.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),r.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):(r.dataStart=i.dataStart,r.dataEnd=i.dataEnd);var d=[{ID:0,Name:l("MAIN.DATE_PICKER.YESTERDAY"),dataStart:e.moment({hour:"00"}).subtract(1,"day").unix(),dataEnd:e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()},{ID:1,Name:l("MAIN.DATE_PICKER.LAST_3_DAYS"),dataStart:e.moment({hour:"00"}).subtract(3,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:2,Name:l("MAIN.DATE_PICKER.LAST_7_DAYS"),dataStart:e.moment({hour:"00"}).subtract(7,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:3,Name:l("MAIN.DATE_PICKER.LAST_14_DAYS"),dataStart:e.moment({hour:"00"}).subtract(14,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:4,Name:l("MAIN.DATE_PICKER.LAST_21_DAYS"),dataStart:e.moment({hour:"00"}).subtract(21,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:5,Name:l("MAIN.DATE_PICKER.CURRENT_MONTH"),dataStart:e.moment().startOf("month").unix(),dataEnd:e.moment().unix()},{ID:6,Name:l("MAIN.DATE_PICKER.LAST_MONTH"),dataStart:e.moment().subtract(1,"month").startOf("month").unix(),dataEnd:e.moment().subtract(1,"month").endOf("month").unix()},{ID:7,Name:l("MAIN.DATE_PICKER.LAST_90_DAYS"),dataStart:e.moment({hour:"00"}).subtract(90,"day").unix(),dataEnd:e.moment().unix()},{ID:8,Name:l("MAIN.DATE_PICKER.ALL_TIME"),dataStart:0,dataEnd:e.moment().unix()}];r.datePiker={items:d,displayExpr:"Name",valueExpr:"ID",value:d[i.SelectedTime].ID,onValueChanged:function(e){i.SelectedTime=e.value,i.dataStart=d[e.value].dataStart,i.dataEnd=d[e.value].dataEnd,t.reload()}},r.totals=[],r.chartStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return r.Main.statsChart(r.advertiser.id,r.dataStart,r.dataEnd,r.by).then(function(e){return e.statistics})}}),r.multipleStore=new e.DevExpress.data.CustomStore({totalCount:function(){return r.multipleTotalCount},load:function(e){return r.Main.statsCampaigns(r.advertiser.id,r.dataStart,r.dataEnd,e.skip,e.take,e.sort,e.order,r.by,e.filter).then(function(e){return r.multipleTotalCount=e.totalCount,e.campaigns})}}),r.Main.statsTotals(r.advertiser.id,r.dataStart,r.dataEnd).then(function(e){r.totals.imp=e.imp.toString().split(/(?=(?:\d{3})+(?!\d))/).join(),r.totals.spent=e.spend.toFixed(2),r.totals.conv=e.conv,r.totals.cpc=e.cpc,r.totals.cpm=e.cpm,r.totals.cvr=e.cvr,r.totals.ctr=e.ctr}),r.selectedItems=[],r.chartOptionsFuncgrid=[],r.dataGridOptionsMultiple={bindingOptions:{dataSource:"main.multipleStore"},onInitialized:function(e){r.dataGridOptionsMultipleFunc=e.component},showBorders:!0,alignment:"left",headerFilter:{visible:!0},filterRow:{visible:!0,applyFilter:"auto"},"export":{enabled:!0,fileName:"Employees"},allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,columnChooser:{enabled:!0},columnFixing:{enabled:!0},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:l("MAIN.CAMPAIGN.COLUMNS.CAMPAIGN"),dataField:"campaign",fixed:!0,cellTemplate:function(t,a){t.addClass("a-campaign"),e.angular.element('<a href="#/home/campaign/'+a.data.id+'">'+a.data.campaign+"</a>").appendTo(t)}},{caption:l("MAIN.CAMPAIGN.COLUMNS.SPENT"),dataField:"spend"},{caption:l("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:l("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:l("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"},{caption:l("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:l("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:l("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:l("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{width:200,dataField:l("MAIN.CAMPAIGN.COLUMNS.STATS"),cellTemplate:function(t,a){if(a.data.chart){var i={onInitialized:function(e){r.chartOptionsFuncgrid[a.rowIndex]=e.component},dataSource:a.data.chart,size:{height:80,width:185},commonSeriesSettings:{argumentField:"day",type:"line",point:{size:2,hoverStyle:{border:{visible:!0,width:1},size:4}}},commonAxisSettings:{label:{visible:!1},grid:{visible:!1}},valueAxis:[{name:"imp"},{name:"cvr"},{name:"cpc"},{name:"clicks"},{name:"spend"},{name:"conv"},{name:"ctr"}],argumentAxis:{valueMarginsEnabled:!1,discreteAxisDivisionMode:"crossLabels",grid:{visible:!1},label:{visible:!1},minorGrid:{visible:!1},minorTick:{visible:!1},tick:{visible:!1}},series:r.chartSeries,legend:{visible:!1},tooltip:{enabled:!0,customizeTooltip:function(e){return{text:e.valueText}}}};t.addClass("img-container");var n=e.$('<div class="chartMulti" ></div>');n.dxChart(i),n.appendTo(t)}else t.addClass("img-container"),e.$('<div id="chartMulti" ></div>').appendTo(t)}}],onSelectionChanged:function(e){r.selectedItems=e.selectedRowsData,r.disabled=!r.selectedItems.length}},r.charIsUpdating=!1,r.types=["line","stackedLine","fullStackedLine"],r.chartOptions={onDone:function(){var e=$("#chart").dxChart("instance");if(!r.charIsUpdating){var t=[],a="left";r.chartOptions.valueAxis.forEach(function(n,s){var o=i.checkChart[n.name];t.push({name:n.name,position:a,label:{alignment:"center",customizeText:function(){r.charIsUpdating=!0;var t=e._valueAxes[s]._majorTicks,a=null;if(Array.isArray(t)&&a<t[t.length-1].value&&(a=t[t.length-1].value),this.value==a)switch(n.name){case"imp":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+l("MAIN.CHECKBOX.IMPRESSIONS")+"</span><br>"+this.value;case"cvr":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+l("MAIN.CHECKBOX.CVR")+"</span><br>"+this.value;case"cpc":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+l("MAIN.CHECKBOX.CPC")+"</span><br>"+this.value;case"clicks":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+l("MAIN.CHECKBOX.CLICKS")+"</span><br>"+this.value;case"spend":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+l("MAIN.CHECKBOX.MEDIA_SPENT")+"</span><br>"+this.value;case"conv":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+l("MAIN.CHECKBOX.CONVERSIONS")+"</span><br>"+this.value;case"ctr":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+l("MAIN.CHECKBOX.CTR")+"</span><br>"+this.value;default:return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+n.name+"</span><br>"+this.value}return this.value}}}),o&&(a="left"==a?"right":"left")}),e.option("valueAxis",t)}},onInitialized:function(e){r.chartOptionsFunc=e.component},series:r.chartSeries,bindingOptions:{dataSource:"main.chartStore"},commonSeriesSettings:{argumentField:"day",type:"Line",point:{size:6,hoverStyle:{border:{visible:!0,width:2},size:5}}},crosshair:{enabled:!0,color:"deepskyblue",label:{visible:!0}},commonAxisSettings:{valueMarginsEnabled:!0},margin:{bottom:20},argumentAxis:{discreteAxisDivisionMode:"crossLabels",grid:{visible:!0}},valueAxis:[{name:"imp",position:"left"},{name:"cvr",position:"left"},{name:"cpc",position:"left"},{name:"clicks",position:"left"},{name:"spend",position:"left"},{name:"conv",position:"left"},{name:"ctr",position:"left"}],legend:{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"bottom"},tooltip:{enabled:!0,customizeTooltip:function(e){return"media"==e.seriesName||"CPC"==e.seriesName?{text:"$"+e.valueText}:"CTR"==e.seriesName?{text:e.valueText+"%"}:{text:e.valueText}}}},r.updateCharts=function(t,a,n){var s={};i.checkChart[a]=n;var o=0;if(n)for(r.chartOptionsFunc.getSeriesByName(t).show(),s=e.$(".chartMulti"),o=0;o<s.length;o++)e.$(s[o]).dxChart("instance").getSeriesByName(t).show();else for(r.chartOptionsFunc.getSeriesByName(t).hide(),s=e.$(".chartMulti"),o=0;o<s.length;o++)e.$(s[o]).dxChart("instance").getSeriesByName(t).hide()},r.onlyTwo=function(e){var t=0,a=[],i=[];for(t=0;t<r.Init.length;t++)1==r.Init[t]._options.value?a.push(r.Init[t]):i.push(r.Init[t]);if(1==e){if(2==a.length&&i.length>4)for(t=0;t<i.length;t++)i[t].option("disabled",!0)}else if(a.length<=2)for(t=0;t<i.length;t++)i[t].option("disabled",!1)},r.impressions={text:l("MAIN.CHECKBOX.IMPRESSIONS"),value:i.checkChart.imp,onInitialized:function(e){r.Init.push(e.component)},onValueChanged:function(e){r.updateCharts("Impressions","imp",e.value),r.onlyTwo(e.value),r.charIsUpdating=!1,r.chartOptions.onDone(),o()}},r.CVR={text:l("MAIN.CHECKBOX.CVR"),value:i.checkChart.cvr,onInitialized:function(e){r.Init.push(e.component)},onValueChanged:function(e){r.updateCharts("CVR","cvr",e.value),r.onlyTwo(e.value),r.charIsUpdating=!1,r.chartOptions.onDone(),o()}},r.CPC={text:l("MAIN.CHECKBOX.CPC"),value:i.checkChart.cpc,onInitialized:function(e){r.Init.push(e.component)},onValueChanged:function(e){r.updateCharts("CPC","cpc",e.value),r.onlyTwo(e.value),r.charIsUpdating=!1,r.chartOptions.onDone(),o()}},r.clicks={text:l("MAIN.CHECKBOX.CLICKS"),value:i.checkChart.clicks,onInitialized:function(e){r.Init.push(e.component)},onValueChanged:function(e){r.updateCharts("clicks","clicks",e.value),r.onlyTwo(e.value),r.charIsUpdating=!1,r.chartOptions.onDone(),o()}},r.media={text:l("MAIN.CHECKBOX.MEDIA_SPENT"),value:i.checkChart.spend,onInitialized:function(e){r.Init.push(e.component)},onValueChanged:function(e){r.updateCharts("media","spend",e.value),r.onlyTwo(e.value),r.charIsUpdating=!1,r.chartOptions.onDone(),o()}},r.conversions={text:l("MAIN.CHECKBOX.CONVERSIONS"),value:i.checkChart.conv,onInitialized:function(e){r.Init.push(e.component)},onValueChanged:function(e){r.updateCharts("conversions","conv",e.value),r.onlyTwo(e.value),r.charIsUpdating=!1,r.chartOptions.onDone(),o()}},r.CTR={text:l("MAIN.CHECKBOX.CTR"),value:i.checkChart.ctr,onInitialized:function(e){r.Init.push(e.component)},onValueChanged:function(e){r.updateCharts("CTR","ctr",e.value),r.onlyTwo(e.value),r.charIsUpdating=!1,r.chartOptions.onDone(),o()}},a(function(){var e=0,t=[],a=[];for(e=0;e<r.Init.length;e++)1==r.Init[e]._options.value?t.push(r.Init[e]):a.push(r.Init[e]);if(t.length>=2&&a.length>4)for(e=0;e<a.length;e++)a[e].option("disabled",!0)});var c={};r.Main.statsMap(r.advertiser.id,r.dataStart,r.dataEnd).then(function(t){c=t,e.$("#visualMap").dxVectorMap(r.vectorMapOptions)}),r.vectorMapOptions={size:{height:320},layers:[{name:"areas",dataSource:e.DevExpress.viz.map.sources.world,palette:"blue",colorGroups:[0,100,1e3,1e4],colorGroupingField:"clicks",label:{enabled:!0,dataField:"name"},customize:function(e){e.forEach(function(e){var t=e.attribute("name"),a=c[t];a&&e.attribute("clicks",a)})}}],tooltip:{enabled:!0,customizeTooltip:function(e){return e.attribute("clicks")?{text:e.attribute("name")+": "+e.attribute("clicks")}:{text:e.attribute("name")}}},legends:[{source:{layer:"areas",grouping:"color"},horizontalAlignment:"left",verticalAlignment:"bottom",customizeText:function(e){return e.start+" to "+e.end+" clicks"}}],bounds:[-180,85,180,-75]}}e.$inject=["$window","$state","$timeout","$localStorage","$translate","Main"],angular.module("pjtLayout").controller("MainController",e)}(),function(){"use strict";angular.module("pjtLayout").constant("RussianTranslations",{COMMON:{"GO-TO-ADMIN-PANEL":"Панель администратора",LOGOUT:"Выйти","TO-MAIN-PAGE":"Главная"},AUTH:{GO_BUTTON:"Дальше","MAIL-REQUIRED":"Введите ваш email","MAIL-VALID":"Некорректный адрес электронной почты","PASSWORD-REQUIRED":"Введите ваш пароль","MAIL-PLACEHOLDER":"Введите адрес электронной почты","MAIL-PASSWORD":"Введите ваш пароль","MAIL-SUBMIT":"Вход"},ADMIN:{ANU:{"ADD-NEW-USER":"Добавить нового пользователя",EMAIL:"Электронная почта",PASSWORD:"Пароль","CONFIRM-PASSWORD":"Подтвердите пароль","USER-NAME":"Имя пользователя","FIRST-NAME":"Имя","LAST-NAME":"Фамилия","MAIL-REQUIRED":"Введите ваш email","MAIL-VALID":"Некорректный адрес электронной почты","PASSWORD-REQUIRED":"Введите ваш пароль","CONFIRM-PASSWORD-REQUIRED":"Введите подтверждение пароля","CONFIRM-PASSWORD-INCORRECT":"Неверный пароль","USER-NAME-REQUIRED":"Введите имя пользователя","FIRST-NAME-REQUIRED":"Введите имя","LAST-NAME-REQUIRED":"Введите фамилию","SELECT-PERMISSION":"Выберите тип доступа","SELECT-NEXUS-USER":"Выберите пользователя с AppNexus",SUBMIT:"Создать"},"LIST-USER":{TITLE:"Список пользователей",EMAIL:"Электронная почта",PASSWORD:"Пароль","CONFIRM-PASSWORD":"Подтвердите пароль","USER-NAME":"Имя пользователя","FIRST-NAME":"Имя","LAST-NAME":"Фамилия","APNEXUS-ID":"Id пользователя AppNexus","APNEXUS-NAME":"Имя пользователя AppNexus",PERMISSION:"Разрешение"}},INDEX:{ADVERTISER_TITLE:"Статистика для",LEFT_NAV:{HOME:"Главная",CAMPAIGN:"Кампания",BILLING:"Биллинг",OPTIMIZER:"Оптимизатор"}},MAIN:{HOME:"Главная",DATE_PICKER:{YESTERDAY:"Вчера",LAST_3_DAYS:"Последние 3 дня",LAST_7_DAYS:"Последние 7 дней",LAST_14_DAYS:"Последние 14 дней",LAST_21_DAYS:"Последние 21 дней",CURRENT_MONTH:"Текущий месяц",LAST_MONTH:"Прошлый месяц",LAST_90_DAYS:"Последние 90 дней",ALL_TIME:"Все время"},TOTALS:{COLUMNS:{TOTALS:"ИТОГИ",SPENT:"Потрачено",CONV:"Конв",IMP:"Показы",CLICKS:"Клики",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR"}},CAMPAIGN:{COLUMNS:{CAMPAIGN:"Кампания",PLACEMENT:"Размещение",NETWORK:"Сеть_Издатель",SPENT:"Потрачено",CONV:"Конв",IMP:"Показы",CLICKS:"Клики",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR",STATS:"Стат"}},CHECKBOX:{IMPRESSIONS:"Показы",CVR:"CVR",CPC:"CPC",CLICKS:"Клики",MEDIA_SPENT:"$ Затраты",CONVERSIONS:"Конверсии",CTR:"CTR"}},CAMP:{NAME:"Кампания","GO-OPTIMISER":"Перейти к оптимизатору",CHECKBOX:{IMPRESSIONS:"Показы",CPA:"CPA",CPC:"CPC",CLICKS:"Клики",MEDIA_SPENT:"$ Затраты",CONVERSIONS:"Конверсии",CTR:"CTR"},CAMPAIGN:{COLUMNS:{CAMPAIGN:"Кампания",PLACEMENT:"Размещение",NETWORK:"Сеть_Издатель",SPENT:"Потрачено",CONV:"Конв",COST:"Стоимость",IMP:"Показы",CLICKS:"Клики",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR",STATS:"Стат"}}},CO:{NAME:"Оптимизатор кампании",ORIGINAL:"Оригинал",OPTIMISED:"Оптимизированный (белый список)",RULES:"Правила для всех доменов:",SPENDS:"если приложение/домен расходует больше чем",CONVERSIONS1:"и conversions равны 0, то",APP:"если приложение/домен имеет более чем",CONVERSIONS2:"imp. и conversions равны 0, то",UNDISCLOSED:'если приложение/домен помечен как "нераскрытый" ',"DOMAIN-RULES":"Домен-специфические правила:","CURRENT-LIST":"Текущий список мест размещения ","GO-OPTIMISER":"Перейти к оптимизатору"}})}(),function(){"use strict";angular.module("pjtLayout").constant("EnglishTranslations",{COMMON:{"GO-TO-ADMIN-PANEL":"Admin panel",LOGOUT:"Log out","TO-MAIN-PAGE":"Main page"},AUTH:{GO_BUTTON:"GO","MAIL-REQUIRED":"Your email is required","MAIL-VALID":"Your email is not valid.","PASSWORD-REQUIRED":"Your password is required.","MAIL-PLACEHOLDER":"Enter your email","MAIL-PASSWORD":"Enter your password","MAIL-SUBMIT":"Submit"},ADMIN:{ANU:{"ADD-NEW-USER":"Add new user",EMAIL:"Email",PASSWORD:"Password","CONFIRM-PASSWORD":"Confirm password","USER-NAME":"User name","FIRST-NAME":"First name","LAST-NAME":"Last name","MAIL-REQUIRED":"Your email is required","MAIL-VALID":"Your email is not valid","PASSWORD-REQUIRED":"Your password is required","CONFIRM-PASSWORD-REQUIRED":"Password confirmation is required","CONFIRM-PASSWORD-INCORRECT":"Incorrect password","USER-NAME-REQUIRED":"User name is required","FIRST-NAME-REQUIRED":"First name is required","LAST-NAME-REQUIRED":"Last name is required","SELECT-PERMISSION":"Select the type of permission","SELECT-NEXUS-USER":"Select the appnexus user",SUBMIT:"Create"},"LIST-USER":{TITLE:"List of users",EMAIL:"Email",PASSWORD:"Password","CONFIRM-PASSWORD":"Confirm password","USER-NAME":"User name","FIRST-NAME":"First name","LAST-NAME":"Last name","APNEXUS-ID":"AppNexus user id","APNEXUS-NAME":"AppNexus user name",PERMISSION:"Permission"}},INDEX:{ADVERTISER_TITLE:"Stats for",LEFT_NAV:{HOME:"Home",CAMPAIGN:"Campaign",BILLING:"Billing",OPTIMIZER:"Optimizer"}},MAIN:{HOME:"Home",DATE_PICKER:{YESTERDAY:"Yesterday",LAST_3_DAYS:"Last 3 days",LAST_7_DAYS:"Last 7 days",LAST_14_DAYS:"Last 14 days",LAST_21_DAYS:"Last 21 days",CURRENT_MONTH:"Current month",LAST_MONTH:"Last month",LAST_90_DAYS:"Last 90 days",ALL_TIME:"All times"},TOTALS:{COLUMNS:{TOTALS:"TOTALS",SPENT:"Spent",CONV:"Conv",IMP:"Imp",CLICKS:"Clicks",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR"}},CAMPAIGN:{COLUMNS:{CAMPAIGN:"Campaign",PLACEMENT:"Placement",NETWORK:"Network+Publisher",SPENT:"Spent",CONV:"Conv",IMP:"Imp",CLICKS:"Clicks",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR",STATS:"Stats"}},CHECKBOX:{IMPRESSIONS:"Impressions",CVR:"CVR",CPC:"CPC",CLICKS:"Clicks",MEDIA_SPENT:"$ Cost",CONVERSIONS:"Conversions",CTR:"CTR"}},CAMP:{NAME:"Campaign","GO-OPTIMISER":"Go to the Optimiser",CHECKBOX:{IMPRESSIONS:"Impressions",CPA:"CPA",CPC:"CPC",CLICKS:"Clicks",MEDIA_SPENT:"$ Cost",CONVERSIONS:"Conversions",CTR:"CTR"},CAMPAIGN:{COLUMNS:{CAMPAIGN:"Campaign",PLACEMENT:"Placement",NETWORK:"Network+Publisher",SPENT:"Spent",CONV:"Conv",COST:"Cost",IMP:"Imp",CLICKS:"Clicks",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR",STATS:"Stats"}}},CO:{NAME:"Campaign optimiser",ORIGINAL:"Original",OPTIMISED:"Optimised (Whitelist)",RULES:"Rules for All Domains:",SPENDS:"if an app/domain spends more than",CONVERSIONS1:"and conversions are 0 then",APP:"if an app/domain has more than",CONVERSIONS2:"imp. and conversions are 0 then",UNDISCLOSED:'if an app/domain is marked as "Undisclosed"',"DOMAIN-RULES":"Domain-specific rules:","CURRENT-LIST":"Current list of placements - Live now","CAMPAIGN-HOME":"Campaign Home","OPTIMIZER-VIEW":"Optimizer View","SUSPEND-LIST":"Suspend list"}})}(),function(){"use strict";function e(e,t,a,i){function n(){t.go("admin")}var s=this;s.advertiser={},s.a=123,!a.get("token")||"adminfull"!=a.get("permission")&&"adminread"!=a.get("permission")||(s.isEven=!0),!a.get("token")||"userfull"!=a.get("permission")&&"userread"!=a.get("permission")||(s.isEven=!1),null==e.advertiser?t.go("auth"):s.advertiser.name=e.advertiser.name,s.checked=function(e){var t=angular.element(i.document.querySelector("#wrapper"))[0];e?t.classList.add("hidden-menu"):t.classList.remove("hidden-menu")},s.goToAdminPanel=n}e.$inject=["$localStorage","$state","$cookies","$window"],angular.module("pjtLayout").controller("HomeController",e)}(),function(){"use strict";function e(e,t){function a(a,i,n,s,o,r,l){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)+"/domains",headers:{Authorization:"Token "+t.get("token")},params:{id:a,from_date:i,to_date:n,skip:s,take:o,order:r,filter:l}}).then(function(e){return e.data})["catch"](function(e){return e})}var i=this;i.campaignDomains=a}e.$inject=["$http","$cookies"],angular.module("pjtLayout").service("CampaignOptimiser",e)}(),function(){"use strict";function e(e,t,a,i,n,s){var o=this;o.CampaignOptimiser=s,o.campName=n.campaign,o.campId=n.id;var r=i.instant;o.navCamp={text:r("CO.CAMPAIGN-HOME"),onClick:function(){t.go("home.campaign.details",{id:o.campId})}},o.navView={text:r("CO.OPTIMIZER-VIEW"),onClick:function(){t.go("home.campaignoptimiser",{id:o.campId})}},o.navList={text:r("CO.SUSPEND-LIST"),onClick:function(){t.go("CO.campaignoptimiser",{id:o.campId})}},null==a.SelectedTime?(a.SelectedTime=0,a.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),a.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix(),o.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),o.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):null==a.dataStart||null==a.dataEnd?(a.SelectedTime=0,a.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),a.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix(),o.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),o.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):(o.dataStart=a.dataStart,o.dataEnd=a.dataEnd);var l=[{ID:0,Name:r("MAIN.DATE_PICKER.YESTERDAY"),dataStart:e.moment({hour:"00"}).subtract(1,"day").unix(),dataEnd:e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()},{ID:1,Name:r("MAIN.DATE_PICKER.LAST_3_DAYS"),dataStart:e.moment({hour:"00"}).subtract(3,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:2,Name:r("MAIN.DATE_PICKER.LAST_7_DAYS"),dataStart:e.moment({hour:"00"}).subtract(7,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:3,Name:r("MAIN.DATE_PICKER.LAST_14_DAYS"),dataStart:e.moment({hour:"00"}).subtract(14,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:4,Name:r("MAIN.DATE_PICKER.LAST_21_DAYS"),dataStart:e.moment({hour:"00"}).subtract(21,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:5,Name:r("MAIN.DATE_PICKER.CURRENT_MONTH"),dataStart:e.moment().startOf("month").unix(),dataEnd:e.moment().unix()},{ID:6,Name:r("MAIN.DATE_PICKER.LAST_MONTH"),dataStart:e.moment().subtract(1,"month").startOf("month").unix(),dataEnd:e.moment().subtract(1,"month").endOf("month").unix()},{ID:7,Name:r("MAIN.DATE_PICKER.LAST_90_DAYS"),dataStart:e.moment({hour:"00"}).subtract(90,"day").unix(),dataEnd:e.moment().unix()},{ID:8,Name:r("MAIN.DATE_PICKER.ALL_TIME"),dataStart:0,dataEnd:e.moment().unix()}];o.datePiker={items:l,displayExpr:"Name",valueExpr:"ID",value:l[a.SelectedTime].ID,onValueChanged:function(e){a.SelectedTime=e.value,a.dataStart=l[e.value].dataStart,a.dataEnd=l[e.value].dataEnd,t.reload()}},o.selectCell={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:"",onSelectionChanged:function(){var e=angular.element("#gridContainer2")[0].querySelectorAll('[aria-selected="true"]');if(e[0])for(var t=[],a=0;a<e.length;a++)t.push(e[a].firstChild.innerText)}},o.gridStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(e){return o.CampaignOptimiser.campaignDomains(o.campId,o.dataEnd,o.dataStart,e.skip,e.take,e.sort,e.order,e.filter).then(function(e){return e})}}),o.selectedItems=[],o.chartOptionsFuncgrid=[],null==a.boxPlotData&&(a.boxPlotData=o.boxPlotData),o.selectCell={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:"",onSelectionChanged:function(){var t=e.$("#gridContainer2")[0].querySelectorAll('[aria-selected="true"]');if(t[0])for(var a=[],i=0;i<t.length;i++)a.push(t[i].firstChild.innerText)}},o.dataGridOptionsCampaign={onInitialized:function(e){o.dataGridOptionsMultipleFunc=e.component,o.dataGridOptionsMultipleFunc._controllers.columns._commandColumns[1].visibleIndex=9},onRowPrepared:function(e){if(o.objectData=e,"data"==o.objectData.rowType){var t=e.rowElement[0].childNodes[9],a=e.data.state;"true"==a.whiteList&&t.classList.add("active-white"),"true"==a.blackList&&t.classList.add("active-black"),"true"==a.suspended&&t.classList.add("active-suspended")}},showBorders:!0,alignment:"left",headerFilter:{visible:!0},editing:{allowUpdating:!0,mode:"batch"},bindingOptions:{dataSource:"CO.gridStore",allowColumnResizing:"true"},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:r("MAIN.CAMPAIGN.COLUMNS.PLACEMENT"),dataField:"placement",allowEditing:!1},{caption:r("MAIN.CAMPAIGN.COLUMNS.NETWORK"),dataField:"NetworkPublisher",allowEditing:!1},{caption:r("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv",allowEditing:!1},{caption:r("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp",allowEditing:!1},{caption:r("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks",allowEditing:!1},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc",allowEditing:!1},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm",allowEditing:!1},{caption:r("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr",allowEditing:!0},{caption:r("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr",allowEditing:!0},{caption:"State",width:300,columnIndex:16,headerCellTemplate:"headerCellTemplate",cellTemplate:function(t,a){e.$("<div />").dxButton({text:"white list",height:30,width:89,disabled:!0,onClick:function(e){var t=e.element[0].parentNode;t.classList.contains("active-white")?(t.classList.remove("active-white"),t.classList.add("unactive-white"),a.data.state.whiteList="false"):t.classList.contains("active-white")||(t.classList.remove("unactive-white"),t.classList.add("active-white"),a.data.state.whiteList="true",a.data.state.suspended="false",a.data.state.blackList="false",t.classList.remove("active-black"),t.classList.remove("active-suspended"))}}).addClass("white-list").appendTo(t),e.$("<div />").dxButton({text:"black list",height:30,width:89,disabled:!0,onClick:function(e){var t=e.element[0].parentNode;t.classList.contains("active-black")?(t.classList.remove("active-black"),t.classList.add("unactive-black"),a.data.state.blackList="false"):t.classList.contains("active-black")||(t.classList.remove("unactive-black"),t.classList.add("active-black"),a.data.state.blackList="true",a.data.state.suspended="false",a.data.state.whiteList="false",t.classList.remove("active-white"),t.classList.remove("active-suspended"))}}).addClass("black-list").appendTo(t),e.$("<div />").dxButton({text:"suspended",height:30,width:95,disabled:!0,onClick:function(e){var t=e.element[0].parentNode;t.classList.contains("active-suspended")?(t.classList.remove("active-suspended"),t.classList.add("unactive-suspended"),a.data.state.suspended="false"):t.classList.contains("active-suspended")||(t.classList.remove("unactive-suspended"),t.classList.add("active-suspended"),a.data.state.suspended="true",a.data.state.whiteList="false",a.data.state.blackList="false",t.classList.remove("active-white"),t.classList.remove("active-black"))}}).addClass("suspended").appendTo(t)}}],selection:{mode:"multiple",showCheckBoxesMode:"always"},onSelectionChanged:function(e){o.selectedItems=e.selectedRowsData,o.disabled=!o.selectedItems.length}},o.selectCell3={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:"",onSelectionChanged:function(){var t=e.$("#gridContainer3")[0].querySelectorAll('[aria-selected="true"]');if(t[0])for(var a=[],i=0;i<t.length;i++)a.push(t[i].firstChild.innerText)}},o.gridStore3=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(e){return o.CampaignOptimiser.campaignDomains(o.campId,o.dataEnd,o.dataStart,e.skip,e.take,e.sort,e.order,e.filter).then(function(e){return e})}}),o.selectedItems=[],o.chartOptionsFuncgrid=[],null==a.boxPlotData&&(a.boxPlotData=o.boxPlotData),o.selectCell={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:"",onSelectionChanged:function(){var t=e.$("#gridContainer3")[0].querySelectorAll('[aria-selected="true"]');if(t[0])for(var a=[],i=0;i<t.length;i++)a.push(t[i].firstChild.innerText);
}},o.dataGridOptionsCampaign3={onInitialized:function(e){o.dataGridOptionsMultipleFunc3=e.component,o.dataGridOptionsMultipleFunc3._controllers.columns._commandColumns[1].visibleIndex=9},onRowPrepared:function(e){if(o.objectData=e,"data"==o.objectData.rowType){var t=e.rowElement[0].childNodes[9],a=e.data.state;"true"==a.whiteList&&t.classList.add("active-white"),"true"==a.blackList&&t.classList.add("active-black"),"true"==a.suspended&&t.classList.add("active-suspended")}},showBorders:!0,alignment:"left",headerFilter:{visible:!0},bindingOptions:{dataSource:"CO.gridStore3",allowColumnResizing:"true"},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:r("MAIN.CAMPAIGN.COLUMNS.PLACEMENT"),dataField:"placement"},{caption:r("MAIN.CAMPAIGN.COLUMNS.NETWORK"),dataField:"NetworkPublisher"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:r("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{caption:"State",width:207,columnIndex:16,headerCellTemplate:"headerCellTemplate",cellTemplate:function(t,a){e.$("<div />").dxButton({text:"white list",height:30,width:89,disabled:!0,onClick:function(e){var t=e.element[0].parentNode;t.classList.contains("active-white")?(t.classList.remove("active-white"),t.classList.add("unactive-white"),a.data.state.whiteList="false"):t.classList.contains("active-white")||(t.classList.remove("unactive-white"),t.classList.add("active-white"),a.data.state.whiteList="true",a.data.state.suspended="false",a.data.state.blackList="false",t.classList.remove("active-black"),t.classList.remove("active-suspended"))}}).addClass("white-list").appendTo(t),e.$("<div />").dxButton({text:"suspended",height:30,width:95,disabled:!0,onClick:function(e){var t=e.element[0].parentNode;t.classList.contains("active-suspended")?(t.classList.remove("active-suspended"),t.classList.add("unactive-suspended"),a.data.state.suspended="false"):t.classList.contains("active-suspended")||(t.classList.remove("unactive-suspended"),t.classList.add("active-suspended"),a.data.state.suspended="true",a.data.state.whiteList="false",a.data.state.blackList="false",t.classList.remove("active-white"),t.classList.remove("active-black"))}}).addClass("suspended").appendTo(t)}}],selection:{mode:"multiple",showCheckBoxesMode:"always"},onSelectionChanged:function(e){o.selectedItems=e.selectedRowsData,o.disabled=!o.selectedItems.length}},o.selectCell4={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:"",onSelectionChanged:function(){var t=e.$("#gridContainer4")[0].querySelectorAll('[aria-selected="true"]');if(t[0])for(var a=[],i=0;i<t.length;i++)a.push(t[i].firstChild.innerText)}},o.gridStore4=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(e){return o.CampaignOptimiser.campaignDomains(o.campId,o.dataEnd,o.dataStart,e.skip,e.take,e.sort,e.order,e.filter).then(function(e){return e})}}),o.selectedItems=[],o.chartOptionsFuncgrid=[],null==a.boxPlotData&&(a.boxPlotData=o.boxPlotData),o.selectCell={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:"",onSelectionChanged:function(){var t=e.$("#gridContainer4")[0].querySelectorAll('[aria-selected="true"]');if(t[0])for(var a=[],i=0;i<t.length;i++)a.push(t[i].firstChild.innerText)}},o.dataGridOptionsCampaign4={onInitialized:function(e){o.dataGridOptionsMultipleFunc4=e.component,o.dataGridOptionsMultipleFunc4._controllers.columns._commandColumns[1].visibleIndex=9},onRowPrepared:function(e){if(o.objectData=e,"data"==o.objectData.rowType){var t=e.rowElement[0].childNodes[9],a=e.data.state;"true"==a.whiteList&&t.classList.add("active-white"),"true"==a.blackList&&t.classList.add("active-black"),"true"==a.suspended&&t.classList.add("active-suspended")}},showBorders:!0,alignment:"left",headerFilter:{visible:!0},bindingOptions:{dataSource:"CO.gridStore3",allowColumnResizing:"true"},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:r("MAIN.CAMPAIGN.COLUMNS.PLACEMENT"),dataField:"placement"},{caption:r("MAIN.CAMPAIGN.COLUMNS.NETWORK"),dataField:"NetworkPublisher"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:r("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{caption:"State",width:207,columnIndex:16,headerCellTemplate:"headerCellTemplate",cellTemplate:function(t,a){e.$("<div />").dxButton({text:"black list",height:30,width:89,disabled:!0,onClick:function(e){var t=e.element[0].parentNode;t.classList.contains("active-black")?(t.classList.remove("active-black"),t.classList.add("unactive-black"),a.data.state.blackList="false"):t.classList.contains("active-black")||(t.classList.remove("unactive-black"),t.classList.add("active-black"),a.data.state.blackList="true",a.data.state.suspended="false",a.data.state.whiteList="false",t.classList.remove("active-white"),t.classList.remove("active-suspended"))}}).addClass("black-list").appendTo(t),e.$("<div />").dxButton({text:"suspended",height:30,width:95,disabled:!0,onClick:function(e){var t=e.element[0].parentNode;t.classList.contains("active-suspended")?(t.classList.remove("active-suspended"),t.classList.add("unactive-suspended"),a.data.state.suspended="false"):t.classList.contains("active-suspended")||(t.classList.remove("unactive-suspended"),t.classList.add("active-suspended"),a.data.state.suspended="true",a.data.state.whiteList="false",a.data.state.blackList="false",t.classList.remove("active-white"),t.classList.remove("active-black"))}}).addClass("suspended").appendTo(t)}}],selection:{mode:"multiple",showCheckBoxesMode:"always"},onSelectionChanged:function(e){o.selectedItems=e.selectedRowsData,o.disabled=!o.selectedItems.length}}}e.$inject=["$window","$state","$localStorage","$translate","Campaign","CampaignOptimiser"],angular.module("pjtLayout").controller("CampaignOptimiserController",e)}(),function(){"use strict";function e(e,t,a){function i(t){return e({method:"GET",headers:{Authorization:"Token "+a.get("token")},url:"/api/v1/campaigns/"+encodeURI(t)}).then(function(e){return e.data})["catch"](function(e){return e})}function n(i,n,s,o){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(i)+"/graphinfo",headers:{Authorization:"Token "+a.get("token")},params:{from_date:n,to_date:s,by:o}}).then(function(e){for(var a in e.data)e.data[a].ctr=+parseFloat(e.data[a].ctr).toFixed(4),e.data[a].conversions=+parseFloat(e.data[a].conversions).toFixed(4),e.data[a].impression=+parseFloat(e.data[a].impression).toFixed(4),e.data[a].cpa=+parseFloat(e.data[a].cpa).toFixed(4),e.data[a].cpc=+parseFloat(e.data[a].cpc).toFixed(4),e.data[a].clicks=+parseFloat(e.data[a].clicks).toFixed(4),e.data[a].mediaspent=+parseFloat(e.data[a].mediaspent).toFixed(4),e.data[a].day=t.moment(e.data[a].day).format("DD/MM");return e.data})["catch"](function(e){return e})}function s(i,n,s){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(i)+"/cpareport",headers:{Authorization:"Token "+a.get("token")},params:{from_date:n,to_date:s}}).then(function(e){for(var a in e.data)e.data[a].avg=+parseFloat(e.data[a].avg).toFixed(4),e.data[a].ctr=+parseFloat(e.data[a].ctr).toFixed(4),e.data[a].close=+parseFloat(e.data[a].close).toFixed(4),e.data[a].high=+parseFloat(e.data[a].high).toFixed(4),e.data[a].low=+parseFloat(e.data[a].low).toFixed(4),e.data[a].open=+parseFloat(e.data[a].open).toFixed(4),e.data[a].day=t.moment(e.data[a].date).toDate();return e.data})["catch"](function(e){return e})}function o(t,i,n,s,o,l,d,c){return l?(d=l[0].desc===!0?"desc":"asc",l=l[0].selector):(l="placement",d="DESC"),null==o&&(o=20),null==s&&(s=0),e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(t)+"/domains",headers:{Authorization:"Token "+a.get("token")},params:{from_date:i,to_date:n,skip:s,take:o,sort:l,order:d,filter:c}}).then(function(e){for(var t in e.data.data)e.data.data[t].cvr=+parseFloat(e.data.data[t].cvr).toFixed(4),e.data.data[t].ctr=+parseFloat(e.data.data[t].ctr).toFixed(4),e.data.data[t].cpc=+parseFloat(e.data.data[t].cpc).toFixed(4)||null,e.data.data[t].cpm=+parseFloat(e.data.data[t].cpm).toFixed(4),e.data.data[t].imp=+parseFloat(e.data.data[t].imp).toFixed(4),e.data.data[t].clicks=+parseFloat(e.data.data[t].clicks).toFixed(4),e.data.data[t].conv=+parseFloat(e.data.data[t].conv).toFixed(4),e.data.data[t].cost=+parseFloat(e.data.data[t].cost).toFixed(2);return e.data}).then(function(e){return r.totalCount=e.totalCount||0,e.data})["catch"](function(e){return e})}var r=this;r.totalCount=0,r.cpaReport=s,r.nameCampaigns=i,r.graphinfo=n,r.campaignDomains=o}e.$inject=["$http","$window","$cookies"],angular.module("pjtLayout").service("CampMain",e)}(),function(){"use strict";function e(e,t,a,i,n,s,o){function r(){for(var e in a.checkCharCamp)a.checkCharCamp[e]?("impression"==e&&l.gridCharts.getSeriesByName("Impressions").show(),"cpa"==e&&l.gridCharts.getSeriesByName("CPA").show(),"cpc"==e&&l.gridCharts.getSeriesByName("CPC").show(),"clicks"==e&&l.gridCharts.getSeriesByName("Clicks").show(),"mediaspent"==e&&l.gridCharts.getSeriesByName("mediaspent").show(),"conversions"==e&&l.gridCharts.getSeriesByName("Conversions").show(),"ctr"==e&&l.gridCharts.getSeriesByName("CTR").show()):("impression"==e&&l.gridCharts.getSeriesByName("Impressions").hide(),"cpa"==e&&l.gridCharts.getSeriesByName("CPA").hide(),"cpc"==e&&l.gridCharts.getSeriesByName("CPC").hide(),"clicks"==e&&l.gridCharts.getSeriesByName("Clicks").hide(),"mediaspent"==e&&l.gridCharts.getSeriesByName("mediaspent").hide(),"conversions"==e&&l.gridCharts.getSeriesByName("Conversions").hide(),"ctr"==e&&l.gridCharts.getSeriesByName("CTR").hide())}var l=this;l.Camp=s,l.multipleTotalCount=0,l.checkChart=[],l.by="imp,cvr,cpc,clicks,spend,conv,ctr";var d=i.instant;l.campName=o.campaign,l.campId=o.id,l.Init=[],null==a.checkCharCamp&&(a.checkCharCamp={impression:!0,cpa:!1,cpc:!1,clicks:!1,mediaspent:!1,conversions:!1,ctr:!1}),l.optimiser={text:d("CAMP.GO-OPTIMISER"),onClick:function(){t.go("home.campaignoptimiser",{id:l.campId})}},l.seriesCamp=[{name:"Impressions",argumentField:"day",valueField:"impression",axis:"impression",visible:a.checkCharCamp.impression},{argumentField:"day",valueField:"cpa",name:"CPA",axis:"cpa",visible:a.checkCharCamp.cpa},{argumentField:"day",valueField:"cpc",name:"CPC",axis:"cpc",visible:a.checkCharCamp.cpc},{argumentField:"day",valueField:"clicks",name:"Clicks",axis:"clicks",visible:a.checkCharCamp.clicks},{argumentField:"day",valueField:"mediaspent",name:"mediaspent",axis:"mediaspent",visible:a.checkCharCamp.mediaspent},{argumentField:"day",valueField:"conversions",name:"Conversions",axis:"conversions",visible:a.checkCharCamp.conversions},{argumentField:"day",valueField:"ctr",name:"CTR",axis:"ctr",visible:a.checkCharCamp.ctr}],l.totals=[],l.chartStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return l.Camp.graphinfo(l.campId,l.dataStart,l.dataEnd,l.by).then(function(e){return e})}}),l.boxPlotStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return l.Camp.cpaReport(l.campId,l.dataStart,l.dataEnd).then(function(e){return e})}}),l.gridStore=new e.DevExpress.data.CustomStore({totalCount:function(){return l.Camp.totalCount},load:function(e){return l.Camp.campaignDomains(l.campId,l.dataStart,l.dataEnd,e.skip,e.take,e.sort,e.order,e.filter)}}),l.types=["line","stackedLine","fullStackedLine"],l.charIsUpdating=!1,l.chartOptionsFirst={onDone:function(){var e=$("#zoomedChartFirst").dxChart("instance");if(!l.charIsUpdating){var t=[],i="left";l.chartOptionsFirst.valueAxis.forEach(function(n,s){var o=a.checkCharCamp[n.name];t.push({name:n.name,position:i,label:{alignment:"center",customizeText:function(){l.charIsUpdating=!0;var t=e._valueAxes[s]._majorTicks,a=null;if(Array.isArray(t)&&a<t[t.length-1].value&&(a=t[t.length-1].value),this.value==a)switch(n.name){case"impression":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+d("CAMP.CHECKBOX.IMPRESSIONS")+"</span><br>"+this.value;case"cpa":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+d("CAMP.CHECKBOX.CPA")+"</span><br>"+this.value;case"cpc":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+d("CAMP.CHECKBOX.CPC")+"</span><br>"+this.value;case"clicks":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+d("CAMP.CHECKBOX.CLICKS")+"</span><br>"+this.value;case"mediaspent":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+d("CAMP.CHECKBOX.MEDIA_SPENT")+"</span><br>"+this.value;case"conversions":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+d("CAMP.CHECKBOX.CONVERSIONS")+"</span><br>"+this.value;case"ctr":return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+d("CAMP.CHECKBOX.CTR")+"</span><br>"+this.value;default:return'<span style="color:black; font-weight: bolder; text-decoration:underline;">'+n.name+"</span><br>"+this.value}return this.value}}}),o&&(i="left"==i?"right":"left")}),e.option("valueAxis",t)}},onInitialized:function(e){l.chartOptionsFuncFirst=e.component},valueAxis:[{name:"impression",position:"left"},{name:"cpa",position:"left"},{name:"cpc",position:"left"},{name:"clicks",position:"left"},{name:"mediaspent",position:"left"},{name:"conversions",position:"left"},{name:"ctr",position:"left"}],argumentAxis:{discreteAxisDivisionMode:"crossLabels",grid:{visible:!0}},crosshair:{enabled:!0,color:"deepskyblue",label:{visible:!0}},legend:{verticalAlignment:"top",horizontalAlignment:"center",itemTextPosition:"top"},commonSeriesSettings:{point:{size:7,hoverStyle:{border:{visible:!0,width:2},size:5}}},bindingOptions:{dataSource:"campmain.chartStore"},series:l.seriesCamp,loadingIndicator:{show:!0,text:"Creating a chart..."}},l.rangeOptionsFirst={size:{height:80},scale:{minorTickInterval:"day",tickInterval:{days:1},minRange:"day",maxRange:"year",minorTick:{visible:!0}},bindingOptions:{dataSource:"campmain.chartStore"},dataSourceField:"day",sliderMarker:{format:"monthAndDay"},behavior:{callSelectedRangeChanged:"onMoving"},onSelectedRangeChanged:function(t){var a=e.$("#zoomedContainerFirst #zoomedChartFirst").dxChart("instance");a.zoomArgument(t.startValue,t.endValue)}},l.updateCharts=function(t,i,n){a.checkCharCamp[i]=n,l.gridCharts=e.$("#zoomedChartFirst").dxChart("instance"),l.rangeChartFirst=e.$("#rangeChartFirst").dxRangeSelector("instance"),n?l.gridCharts.getSeriesByName(t).show():l.chartOptionsFuncFirst.getSeriesByName(t).hide()},l.onlyTwo=function(e){var t=0,a=[],i=[];for(t=0;t<l.Init.length;t++)1==l.Init[t]._options.value?a.push(l.Init[t]):i.push(l.Init[t]);if(1==e){if(2==a.length&&i.length>4)for(t=0;t<i.length;t++)i[t].option("disabled",!0)}else if(a.length<=2)for(t=0;t<i.length;t++)i[t].option("disabled",!1)},l.impressions={text:d("CAMP.CHECKBOX.IMPRESSIONS"),value:a.checkCharCamp.impression,onInitialized:function(e){l.Init.push(e.component)},onValueChanged:function(e){l.updateCharts("Impressions","impression",e.value),l.onlyTwo(e.value),l.charIsUpdating=!1,l.chartOptionsFirst.onDone(),r()}},l.CPA={text:d("CAMP.CHECKBOX.CPA"),value:a.checkCharCamp.cpa,onInitialized:function(e){l.Init.push(e.component)},onValueChanged:function(e){l.updateCharts("CPA","cpa",e.value),l.onlyTwo(e.value),l.charIsUpdating=!1,l.chartOptionsFirst.onDone(),r()}},l.CPC={text:d("CAMP.CHECKBOX.CPC"),value:a.checkCharCamp.cpc,onInitialized:function(e){l.Init.push(e.component)},onValueChanged:function(e){l.updateCharts("CPC","cpc",e.value),l.onlyTwo(e.value),l.charIsUpdating=!1,l.chartOptionsFirst.onDone(),r()}},l.clicks={text:d("CAMP.CHECKBOX.CLICKS"),value:a.checkCharCamp.clicks,onInitialized:function(e){l.Init.push(e.component)},onValueChanged:function(e){l.updateCharts("Clicks","clicks",e.value),l.onlyTwo(e.value),l.charIsUpdating=!1,l.chartOptionsFirst.onDone(),r()}},l.media={text:d("CAMP.CHECKBOX.MEDIA_SPENT"),value:a.checkCharCamp.mediaspent,onInitialized:function(e){l.Init.push(e.component)},onValueChanged:function(e){l.updateCharts("mediaspent","mediaspent",e.value),l.onlyTwo(e.value),l.charIsUpdating=!1,l.chartOptionsFirst.onDone(),r()}},l.conversions={text:d("CAMP.CHECKBOX.CONVERSIONS"),value:a.checkCharCamp.conversions,onInitialized:function(e){l.Init.push(e.component)},onValueChanged:function(e){l.updateCharts("Conversions","conversions",e.value),l.onlyTwo(e.value),l.charIsUpdating=!1,l.chartOptionsFirst.onDone(),r()}},l.CTR={text:d("CAMP.CHECKBOX.CTR"),value:a.checkCharCamp.ctr,onInitialized:function(e){l.Init.push(e.component)},onValueChanged:function(e){l.updateCharts("CTR","ctr",e.value),l.onlyTwo(e.value),l.charIsUpdating=!1,l.chartOptionsFirst.onDone(),r()}},n(function(){var e=0,t=[],a=[];for(e=0;e<l.Init.length;e++)1==l.Init[e]._options.value?t.push(l.Init[e]):a.push(l.Init[e]);if(t.length>=2&&a.length>4)for(e=0;e<a.length;e++)a[e].option("disabled",!0)}),null==a.SelectedTime?(a.SelectedTime=0,a.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),a.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix(),l.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),l.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):null==a.dataStart||null==a.dataEnd?(a.SelectedTime=0,a.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),a.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix(),l.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),l.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):(l.dataStart=a.dataStart,l.dataEnd=a.dataEnd);var c=[{ID:0,Name:d("MAIN.DATE_PICKER.YESTERDAY"),dataStart:e.moment({hour:"00"}).subtract(1,"day").unix(),dataEnd:e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()},{ID:1,Name:d("MAIN.DATE_PICKER.LAST_3_DAYS"),dataStart:e.moment({hour:"00"}).subtract(3,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:2,Name:d("MAIN.DATE_PICKER.LAST_7_DAYS"),dataStart:e.moment({hour:"00"}).subtract(7,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:3,Name:d("MAIN.DATE_PICKER.LAST_14_DAYS"),dataStart:e.moment({hour:"00"}).subtract(14,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:4,Name:d("MAIN.DATE_PICKER.LAST_21_DAYS"),dataStart:e.moment({hour:"00"}).subtract(21,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:5,Name:d("MAIN.DATE_PICKER.CURRENT_MONTH"),dataStart:e.moment().startOf("month").unix(),dataEnd:e.moment().unix()},{ID:6,Name:d("MAIN.DATE_PICKER.LAST_MONTH"),dataStart:e.moment().subtract(1,"month").startOf("month").unix(),dataEnd:e.moment().subtract(1,"month").endOf("month").unix()},{ID:7,Name:d("MAIN.DATE_PICKER.LAST_90_DAYS"),dataStart:e.moment({hour:"00"}).subtract(90,"day").unix(),dataEnd:e.moment().unix()},{ID:8,Name:d("MAIN.DATE_PICKER.ALL_TIME"),dataStart:0,dataEnd:e.moment().unix()}];l.datePiker={items:c,displayExpr:"Name",valueExpr:"ID",value:c[a.SelectedTime].ID,onValueChanged:function(e){a.SelectedTime=e.value,a.dataStart=c[e.value].dataStart,a.dataEnd=c[e.value].dataEnd,t.reload()}},l.chartOptionsSecond={bindingOptions:{dataSource:"campmain.boxPlotStore"},valueAxis:{title:"CPA, $"},argumentAxis:{grid:{visible:!0},discreteAxisDivisionMode:"crossLabels"},tooltip:{enabled:!0},legend:{visible:!1},loadingIndicator:{show:!0,text:"Creating a chart..."},useAggregation:!0,commonSeriesSettings:{candlestick:{openValueField:"open",closeValueField:"close",highValueField:"high",lowValueField:"low"},argumentField:"day",point:{size:6,hoverStyle:{border:{visible:!0,width:1},size:4}}},series:[{type:"candlestick"},{valueField:"avg",color:"silver"}]},l.rangeOptionsSecond={size:{height:80},bindingOptions:{dataSource:"campmain.boxPlotStore"},scale:{minorTickInterval:"day",tickInterval:{days:1},minRange:"day",maxRange:"year",minorTick:{visible:!0}},dataSourceField:"day",sliderMarker:{format:"monthAndDay"},behavior:{callSelectedRangeChanged:"onMoving"},onSelectedRangeChanged:function(t){var a=e.$("#zoomedContainerSecond #zoomedChartSecond").dxChart("instance");a.zoomArgument(new Date(t.startValue),new Date(t.endValue))}},l.selectedItems=[],l.chartOptionsFuncgrid=[],null==a.boxPlotData&&(a.boxPlotData=l.boxPlotData),l.state="",l.selectCell={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:l.state,onSelectionChanged:function(){var t=e.$("#gridContainer2")[0].querySelectorAll('[aria-selected="true"]');if(t[0])for(var a=[],i=0;i<t.length;i++)a.push(t[i].firstChild.innerText)}},l.dataGridOptionsCampaign={onInitialized:function(e){l.dataGridOptionsMultipleFunc=e.component,l.dataGridOptionsMultipleFunc._controllers.columns._commandColumns[1].visibleIndex=9,l.dataGridOptionsMultipleFunc._controllers.columns._commandColumns[1].width=35},onRowPrepared:function(e){if(l.objectData=e,"data"==l.objectData.rowType){var t=e.rowElement[0].childNodes[9],a=e.data.state;"true"==a.whiteList&&t.classList.add("active-white"),"true"==a.blackList&&t.classList.add("active-black"),"true"==a.suspended&&t.classList.add("active-suspended")}},showBorders:!0,alignment:"left",headerFilter:{visible:!0},bindingOptions:{dataSource:"campmain.gridStore"},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,howBorders:!0,showRowLines:!0,columns:[{caption:d("CAMP.CAMPAIGN.COLUMNS.PLACEMENT"),dataField:"placement"},{caption:d("CAMP.CAMPAIGN.COLUMNS.NETWORK"),dataField:"NetworkPublisher"},{caption:d("CAMP.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:d("CAMP.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:d("CAMP.CAMPAIGN.COLUMNS.COST"),dataField:"cost"},{caption:d("CAMP.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"},{caption:d("CAMP.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:d("CAMP.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:d("CAMP.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:d("CAMP.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{caption:"State",width:300,columnIndex:16,headerCellTemplate:"headerCellTemplate",cellTemplate:function(t,a){e.$("<div />").dxButton({text:"white",height:30,width:89,disabled:!0,onClick:function(e){var t=e.element[0].parentNode;t.classList.contains("active-white")?(t.classList.remove("active-white"),t.classList.add("unactive-white"),a.data.state.whiteList="false"):t.classList.contains("active-white")||(t.classList.remove("unactive-white"),t.classList.add("active-white"),a.data.state.whiteList="true",a.data.state.suspended="false",a.data.state.blackList="false",t.classList.remove("active-black"),t.classList.remove("active-suspended"))}}).addClass("white-list").appendTo(t),e.$("<div />").dxButton({text:"black",height:30,width:89,disabled:!0,onClick:function(e){var t=e.element[0].parentNode;t.classList.contains("active-black")?(t.classList.remove("active-black"),t.classList.add("unactive-black"),a.data.state.blackList="false"):t.classList.contains("active-black")||(t.classList.remove("unactive-black"),t.classList.add("active-black"),a.data.state.blackList="true",a.data.state.suspended="false",a.data.state.whiteList="false",t.classList.remove("active-white"),t.classList.remove("active-suspended"))}}).addClass("black-list").appendTo(t),e.$("<div />").dxButton({text:"suspend",height:30,width:95,disabled:!0,onClick:function(e){var t=e.element[0].parentNode;t.classList.contains("active-suspended")?(t.classList.remove("active-suspended"),t.classList.add("unactive-suspended"),a.data.state.suspended="false"):t.classList.contains("active-suspended")||(t.classList.remove("unactive-suspended"),t.classList.add("active-suspended"),a.data.state.suspended="true",a.data.state.whiteList="false",a.data.state.blackList="false",t.classList.remove("active-white"),t.classList.remove("active-black"))}}).addClass("suspended").appendTo(t)}}],selection:{mode:"multiple",showCheckBoxesMode:"always"},onSelectionChanged:function(e){l.selectedItems=e.selectedRowsData,l.disabled=!l.selectedItems.length}},l.rangeFirstChartOptions={margin:{left:50},scale:{startValue:new Date(a.dataStart),endValue:new Date(a.dataEnd),minorTickInterval:"day",minRange:"hour",maxRange:"month",minorTick:{visible:!1}},sliderMarker:{format:"monthAndDay"}},l.rangeSecondChartOptions={margin:{left:50,top:12},size:{height:150,width:450},scale:{startValue:new Date(a.dataStart),endValue:new Date(a.dataEnd),minorTickInterval:"day",minRange:"day",maxRange:"month",minorTick:{visible:!1}},sliderMarker:{format:"monthAndDay"}},l.ctrlBbtns={placement:{btn:"Placement",header:"Placement"},creativeId:{btn:"creative_id",header:"creative_id"},creativeSize:{btn:"creative_size",header:"creative_size"},viewability:{btn:"viewability",header:"viewability"},os:{btn:"OS",header:"Operating System used"},carrier:{btn:"carrier",header:"carrier"},networkSeller:{btn:"network(seller)",header:"network (seller)"},connectionType:{btn:"connection_type",header:"connection_type"},device:{btn:"device",header:"device"},seller:{btn:"seller",header:"Seller"}},l.pieChartHeader=a.pieChartHeader||l.ctrlBbtns.os.header}e.$inject=["$window","$state","$localStorage","$translate","$timeout","CampMain","Campaign"],angular.module("pjtLayout").controller("CampaignMainController",e)}(),function(){"use strict";function e(e,t){function a(a){return e({method:"GET",headers:{Authorization:"Token "+t.get("token")},url:"/api/v1/campaigns/"+encodeURI(a)}).then(function(e){return e.data})}function i(a,i,n,s){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)+"/details",headers:{Authorization:"Token "+t.get("token")},params:{from_date:i,to_date:n,section:s}}).then(function(e){for(var t in e.data.all)e.data.all[t].data=+parseFloat(e.data.all[t].data).toFixed(4);for(var t in e.data.conversions)e.data.conversions[t].data=+parseFloat(e.data.conversions[t].data).toFixed(4);return e.data})}function n(a,i,n){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)+"/cpabuckets",headers:{Authorization:"Token "+t.get("token")},params:{id:a,from_date:i,to_date:n}}).then(function(e){return e.data})}var s=this;s.nameCampaigns=a,s.bucketsCpa=n,s.detailsStoreAll=i}e.$inject=["$http","$cookies"],angular.module("pjtLayout").service("CampDetails",e)}(),function(){"use strict";function e(e,t,a,i,n,s){var o=this;o.Camp=n,o.multipleTotalCount=0,o.checkChart=[],o.by="imp,cvr,cpc,clicks,spend,conv,ctr";var r=i.instant;o.campName=s.campaign,o.campId=s.id,o.detailsStoreAll=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return o.Camp.detailsStoreAll(o.campId,o.dataStart,o.dataEnd,a.selectedSection).then(function(e){return e.all})}}),o.detailsStoreConversion=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return o.Camp.detailsStoreAll(o.campId,o.dataStart,o.dataEnd,o.by).then(function(e){return e.conversions})}}),o.cpaBucketRequestFirst=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return o.Camp.bucketsCpa(o.campId,o.dataStart,o.dataEnd).then(function(e){for(var t=[],a=0;a<e.length;a++)+e[a].cpa>=o.backetsRanges.first.min&&+e[a].cpa<o.backetsRanges.first.max&&t.push(e[a]);return t})}}),o.cpaBucketRequestSecond=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return o.Camp.bucketsCpa(o.campId,o.dataStart,o.dataEnd).then(function(e){for(var t=[],a=0;a<e.length;a++)+e[a].cpa>=o.backetsRanges.second.min&&+e[a].cpa<o.backetsRanges.second.max&&t.push(e[a]);return t})}}),o.cpaBucketRequestThird=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return o.Camp.bucketsCpa(o.campId,o.dataStart,o.dataEnd).then(function(e){for(var t=[],a=0;a<e.length;a++)+e[a].cpa>=o.backetsRanges.third.min&&+e[a].cpa<o.backetsRanges.third.max&&t.push(e[a]);return t})}}),o.cpaBucketRequestFourth=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return o.Camp.bucketsCpa(o.campId,o.dataStart,o.dataEnd).then(function(e){for(var t=[],a=0;a<e.length;a++)+e[a].cpa>=o.backetsRanges.fourth.min&&+e[a].cpa<o.backetsRanges.fourth.max&&t.push(e[a]);return t})}}),null==a.dataStart&&null==a.dataEnd?(a.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),a.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):(o.dataStart=a.dataStart,o.dataEnd=a.dataEnd),null==a.SelectedTime&&(a.SelectedTime=0);var l=[{ID:0,Name:r("MAIN.DATE_PICKER.YESTERDAY"),dataStart:e.moment({hour:"00"}).subtract(1,"day").unix(),dataEnd:e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()},{ID:1,Name:r("MAIN.DATE_PICKER.LAST_3_DAYS"),dataStart:e.moment({hour:"00"}).subtract(3,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:2,Name:r("MAIN.DATE_PICKER.LAST_7_DAYS"),dataStart:e.moment({hour:"00"}).subtract(7,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:3,Name:r("MAIN.DATE_PICKER.LAST_14_DAYS"),dataStart:e.moment({hour:"00"}).subtract(14,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:4,Name:r("MAIN.DATE_PICKER.LAST_21_DAYS"),dataStart:e.moment({hour:"00"}).subtract(21,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:5,Name:r("MAIN.DATE_PICKER.CURRENT_MONTH"),dataStart:e.moment().startOf("month").unix(),dataEnd:e.moment().unix()},{ID:6,Name:r("MAIN.DATE_PICKER.LAST_MONTH"),dataStart:e.moment().subtract(1,"month").startOf("month").unix(),dataEnd:e.moment().subtract(1,"month").endOf("month").unix()},{ID:7,Name:r("MAIN.DATE_PICKER.LAST_90_DAYS"),dataStart:e.moment({hour:"00"}).subtract(90,"day").unix(),dataEnd:e.moment().unix()},{ID:8,Name:r("MAIN.DATE_PICKER.ALL_TIME"),dataStart:0,dataEnd:e.moment().unix()}];o.datePiker={items:l,displayExpr:"Name",valueExpr:"ID",value:l[a.SelectedTime].ID,onValueChanged:function(e){a.SelectedTime=e.value,a.dataStart=l[e.value].dataStart,a.dataEnd=l[e.value].dataEnd,t.reload()}},o.ctrlBbtns={placement:{btn:"Placement",header:"Placement"},creativeId:{btn:"creative_id",header:"creative_id"},creativeSize:{btn:"creative_size",header:"creative_size"},viewability:{btn:"viewability",header:"viewability"},os:{btn:"OS",header:"Operating System used"},carrier:{btn:"carrier",header:"carrier"},networkSeller:{btn:"network(seller)",header:"network (seller)"},connectionType:{btn:"connection_type",header:"connection_type"},device:{btn:"device",header:"device"}},o.pieChartHeader=a.pieChartHeader||o.ctrlBbtns.placement.header,o.btnsNodesArray=e.$(".label-container")[0].children;for(var d in o.ctrlBbtns)o.ctrlBbtns[d].header==o.pieChartHeader&&(o.selectedSection=o.ctrlBbtns[d].btn,a.selectedSection=o.selectedSection);Array.prototype.forEach.call(o.btnsNodesArray,function(e){e.name==o.selectedSection&&e.classList.add("nav-btn-active")}),o.selectInfoBtn=function(e,i){o.pieChartHeader=i,a.pieChartHeader=o.pieChartHeader,Array.prototype.forEach.call(o.btnsNodesArray,function(e){e.classList.contains("nav-btn-active")&&e.classList.remove("nav-btn-active")}),a.pieChartHeader=o.pieChartHeader,e.currentTarget.classList.add("nav-btn-active"),t.reload()},o.targetCpa||(o.targetCpa=a.targetCpa||3,a.targetCpa=o.targetCpa),o.backetsRanges={first:{min:0,max:Number(o.targetCpa).toFixed(1)
},second:{min:Number(o.targetCpa).toFixed(1),max:Number(2*o.targetCpa).toFixed(1)},third:{min:Number(2*o.targetCpa).toFixed(1),max:Number(3*o.targetCpa).toFixed(1)},fourth:{min:Number(3*o.targetCpa).toFixed(1),max:Number(1e3*o.targetCpa).toFixed(1)}},o.targetCpaChange=function(t){var i=Number(t.currentTarget.value);return a.targetCpa=i,o.backetsRanges={first:{min:0,max:i.toFixed(1)},second:{min:i.toFixed(1),max:(2*i).toFixed(1)},third:{min:(2*i).toFixed(1),max:(3*i).toFixed(1)},fourth:{min:(3*i).toFixed(1),max:(1e3*i).toFixed(1)}},e.$("#backets-1").dxDataGrid("instance").refresh(),e.$("#backets-2").dxDataGrid("instance").refresh(),e.$("#backets-3").dxDataGrid("instance").refresh(),e.$("#backets-4").dxDataGrid("instance").refresh(),o.backetsRanges},o.pieChartAll={title:{text:"All",font:{size:20},margin:{bottom:1}},bindingOptions:{dataSource:"campdetails.detailsStoreAll"},tooltip:{enabled:!0,format:{type:"millions",percentPrecision:2},customizeTooltip:function(e){return console.log(arguments),{text:e.argument+" - "+e.value}}},series:[{argumentField:"section",valueField:"data",smallValuesGrouping:{mode:"smallValueThreshold",threshold:.4}}],legend:{horizontalAlignment:"center",verticalAlignment:"bottom"}},o.pieChartConversions={title:{text:"Conversions",font:{size:20},margin:{bottom:1}},bindingOptions:{dataSource:"campdetails.detailsStoreConversion"},tooltip:{enabled:!0,customizeTooltip:function(e){return{text:e.argument+" - "+e.value}}},series:[{argumentField:"section",valueField:"data",smallValuesGrouping:{mode:"smallValueThreshold",threshold:.4}}],legend:{horizontalAlignment:"center",verticalAlignment:"bottom"}},o.columnsPlacement=[{caption:"sellerid",dataField:"sellerid"},{caption:"sellername",dataField:"sellername"},{caption:"placementid",dataField:"placementid"},{caption:"placementname",dataField:"placementname"}],o.columnsCreativeId=[{caption:"sellername",dataField:"sellername"}],o.columnsCreativeSize=[{caption:"sellername",dataField:"sellername"}],o.columnsViewability=[{caption:"sellername",dataField:"sellername"}],o.columnsOs=[{caption:"sellername",dataField:"sellername"}],o.columnsCarrier=[{caption:"sellername",dataField:"sellername"}],o.columnsNetworkSeller=[{caption:"sellername",dataField:"sellername"}],o.columnsConnectionType=[{caption:"sellername",dataField:"sellername"}],o.columnsDevice=[{caption:"sellername",dataField:"sellername"}],"Placement"==a.selectedSection?o.columnsSelected=o.columnsPlacement:"creative_id"==a.selectedSection?o.columnsSelected=o.columnsCreativeId:"creative_size"==a.selectedSection?o.columnsSelected=o.columnsCreativeSize:"viewability"==a.selectedSection?o.columnsSelected=o.columnsViewability:"OS"==a.selectedSection?o.columnsSelected=o.columnsOs:"carrier"==a.selectedSection?o.columnsSelected=o.columnsCarrier:"network(seller)"==a.selectedSection?o.columnsSelected=o.columnsNetworkSeller:"connection_type"==a.selectedSection?o.columnsSelected=o.columnsConnectionType:"device"==a.selectedSection&&(o.columnsSelected=o.columnsDevice),o.cpaBucketFirst={showBorders:!0,alignment:"left",bindingOptions:{dataSource:"campdetails.cpaBucketRequestFirst"},howBorders:!0,showRowLines:!0,paging:{enabled:!0,pageSize:10},remoteOperations:!1,allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},columns:o.columnsSelected},o.cpaBucketSecond={showBorders:!0,alignment:"left",bindingOptions:{dataSource:"campdetails.cpaBucketRequestSecond"},howBorders:!0,showRowLines:!0,paging:{enabled:!0,pageSize:10},remoteOperations:!1,allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},columns:o.columnsSelected},o.cpaBucketThird={showBorders:!0,alignment:"left",bindingOptions:{dataSource:"campdetails.cpaBucketRequestThird"},howBorders:!0,showRowLines:!0,paging:{enabled:!0,pageSize:10},remoteOperations:!1,allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},columns:o.columnsSelected},o.cpaBucketFourth={showBorders:!0,alignment:"left",bindingOptions:{dataSource:"campdetails.cpaBucketRequestFourth"},howBorders:!0,showRowLines:!0,paging:{enabled:!0,pageSize:10},remoteOperations:!1,allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},columns:o.columnsSelected}}e.$inject=["$window","$state","$localStorage","$translate","CampDetails","Campaign"],angular.module("pjtLayout").controller("CampaignDetailsController",e)}(),function(){"use strict";function e(){}angular.module("pjtLayout").controller("CampaignController",e)}(),function(){"use strict";function e(e,t){function a(){return e({method:"GET",headers:{Authorization:"Token "+t.get("token")},url:"/api/v1/advertisers"}).then(function(e){return e.data})}function i(t){return e({method:"POST",url:"/api/v1/login/",data:{email:t.email,password:t.password}}).then(function(e){return e})["catch"](function(e){return e})}var n=this;n.authorization=i,n.advertisersList=a}e.$inject=["$http","$cookies"],angular.module("pjtLayout").service("Auth",e)}(),function(){"use strict";function e(e,t,a,i,n,s,o){function r(a){return a||a.email&&a.password?(o.remove("csrftoken"),o.remove("sessionid"),o.remove("permission"),c.Auth.authorization(a).then(function(e){200==e.status?(i.$reset(),o.put("token",e.data.token),e.data.permission="adminfull",o.put("permission",e.data.permission),!e.data.token||"adminfull"!=e.data.permission&&"adminread"!=e.data.permission||(t.$(".reg-form-wrapper")[0].classList.add("hide"),t.$(".advertiser-wrapper")[0].classList.add("show"),t.$(".admin-btn")[0].classList.add("show"),t.$(".admin-btn")[1].classList.add("show")),!e.data.token||"userfull"!=e.data.permission&&"userread"!=e.data.permission||(t.$(".reg-form-wrapper")[0].classList.add("hide"),t.$(".advertiser-wrapper")[0].classList.add("show"),t.$(".admin-btn")[0].classList.remove("show"),t.$(".admin-btn")[1].classList.add("show"))):(o.remove("permission"),o.remove("token"))})["catch"](function(t){e(t)})):void 0}function l(){a.go("admin")}function d(){o.remove("permission"),o.remove("token"),a.reload()}var c=this,u=n.instant;c.Auth=s,!o.get("token")||"adminfull"!=o.get("permission")&&"adminread"!=o.get("permission")||(t.$(".reg-form-wrapper")[0].classList.add("hide"),t.$(".advertiser-wrapper")[0].classList.add("show"),t.$(".admin-btn")[0].classList.add("show"),t.$(".admin-btn")[1].classList.add("show")),!o.get("token")||"userfull"!=o.get("permission")&&"userread"!=o.get("permission")||(t.$(".reg-form-wrapper")[0].classList.add("hide"),t.$(".advertiser-wrapper")[0].classList.add("show"),t.$(".admin-btn")[0].classList.remove("show"),t.$(".admin-btn")[1].classList.add("show")),c.addButton={text:u("AUTH.GO_BUTTON"),onClick:function(){i.advertiser=c.selectedService,a.go("home.main")}},c.selectAdvertisersStore=new t.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return c.Auth.advertisersList().then(function(e){return e})}}),c.selectAdvertisers={bindingOptions:{dataSource:"auth.selectAdvertisersStore",value:"auth.selectedService"},displayExpr:"name",width:"200px"},c.goToAdminPanel=l,c.logout=d,c.submitForm=r}e.$inject=["$log","$window","$state","$localStorage","$translate","Auth","$cookies"],angular.module("pjtLayout").controller("AuthController",e)}(),function(){"use strict";function e(e,t){function a(){return e({method:"GET",headers:{Authorization:"Token "+t.get("token")},url:"/api/v1/appnexus/user"}).then(function(e){return e.data})}function i(){return e({method:"GET",headers:{Authorization:"Token "+t.get("token")},url:"/api/v1/user/"}).then(function(e){return e.data})}function n(a){return e({method:"POST",url:"/api/v1/user/",headers:{Authorization:"Token "+t.get("token")},data:a}).then(function(e){return e.data})}function s(a){return e({method:"DELETE",url:"/api/v1/user/"+a,headers:{Authorization:"Token "+t.get("token")}}).then(function(e){return e.data})["catch"](function(){return[]})}var o=this;o.usersRemove=s,o.addUser=n,o.appNexusUser=a,o.usersList=i}e.$inject=["$http","$cookies"],angular.module("pjtLayout").service("AdminService",e)}(),function(){"use strict";function e(e,t,a,i,n,s){function o(){t.go("auth")}function r(t){return l.selectedService?(t.apnexus_user=l.selectedService.id,t.apnexusname=l.selectedService.username):(t.apnexus_user=null,t.apnexusname=null),("adminfull"==t.permission||"adminread"==t.permission)&&(t.apnexus_user=null),l.Admin.addUser(t).then(function(){l.user={},l.userForm.$setPristine(),e.$("#usersList").dxDataGrid("instance").refresh()})}var l=this,d=i.instant;l.Admin=s,l.users=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return l.Admin.usersList().then(function(e){return e})},remove:function(e){return l.Admin.usersRemove(e.id)}}),l.listOfUsers={remoteOperations:!1,showBorders:!0,alignment:"left",bindingOptions:{dataSource:"admin.users"},headerFilter:{visible:!0},filterRow:{visible:!0,applyFilter:"auto"},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,wordWrapEnabled:!0,howBorders:!0,showRowLines:!0,align:"left",editing:{allowDeleting:!0},columns:[{caption:"id",dataField:"id",alignment:"center"},{caption:d("ADMIN.LIST-USER.EMAIL"),dataField:"email",alignment:"center"},{caption:d("ADMIN.LIST-USER.USER-NAME"),dataField:"username",alignment:"center"},{caption:d("ADMIN.LIST-USER.FIRST-NAME"),dataField:"first_name",alignment:"center"},{caption:d("ADMIN.LIST-USER.LAST-NAME"),dataField:"last_name",alignment:"center"},{caption:d("ADMIN.LIST-USER.APNEXUS-ID"),dataField:"apnexusname",alignment:"center"},{caption:d("ADMIN.LIST-USER.APNEXUS-NAME"),dataField:"apnexus_user",alignment:"center"},{caption:d("ADMIN.LIST-USER.PERMISSION"),dataField:"permission",alignment:"center"}]},l.selectNexusUsers=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return l.Admin.appNexusUser().then(function(e){return e})}}),l.selectAppNexusUser={bindingOptions:{dataSource:"admin.selectNexusUsers",value:"admin.selectedService"},placeholder:d("ADMIN.ANU.SELECT-NEXUS-USER"),displayExpr:"username"},l.submitForm=r,l.goToMainPage=o}e.$inject=["$window","$state","$localStorage","$translate","$cookies","AdminService"],angular.module("pjtLayout").controller("AdminController",e)}(),function(){"use strict";function e(e,t,a,i,n,s,o,r){i.$state=t,i.$stateParams=n;var l=i.$on("$stateChangeStart",function(e,t){"auth"!=t.name&&(r.get("token")||r.get("permission")||(s.$reset(),o.location="/")),"admin"==t.name&&("userfull"==r.get("permission")||"userread"==r.get("permission"))&&(s.$reset(),o.location="/")});i.$on("$destroy",l),e.debug("runBlock end")}e.$inject=["$log","$state","$http","$rootScope","$stateParams","$localStorage","$window","$cookies"],angular.module("pjtLayout").run(e)}(),function(){"use strict";function e(e,t){e.state("auth",{url:"/",templateUrl:"app/auth/auth.html",controller:"AuthController",controllerAs:"auth"}).state("home",{url:"/home",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"home"}).state("home.main",{url:"/main",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("home.campaign",{templateUrl:"app/campaign/camp.html","abstract":!0}).state("home.campaign.details",{url:"/campaign/:id",views:{details:{templateUrl:"app/campaignmain/campmain.html",controller:"CampaignMainController",controllerAs:"campmain",resolve:{Campaign:["CampMain","$stateParams","$state",function(e,t,a){return t.id||a.go("home.main"),e.nameCampaigns(t.id).then(function(e){return e})}]}},info:{templateUrl:"app/campaigndetails/campdetails.html",controller:"CampaignDetailsController",controllerAs:"campdetails",resolve:{Campaign:["CampMain","$stateParams","$state",function(e,t,a){return t.id||a.go("home.main"),e.nameCampaigns(t.id).then(function(e){return e})}]}}}}).state("home.campaignoptimiser",{url:"/campaignoptimiser/:id",templateUrl:"app/campaignoptimiser/campaignoptimiser.html",controller:"CampaignOptimiserController",controllerAs:"CO",resolve:{Campaign:["CampMain","$stateParams","$state",function(e,t,a){return t.id||a.go("home.main"),e.nameCampaigns(t.id).then(function(e){return e})}]}}).state("admin",{url:"/admin/",templateUrl:"app/admin/admin.html",controller:"AdminController",controllerAs:"admin"}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("pjtLayout").config(e)}(),function(){"use strict";angular.module("pjtLayout")}(),function(){"use strict";function e(e,t,a,i,n){e.debugEnabled(!0),a.translations("en",n),a.translations("ru",i),a.useSanitizeValueStrategy("escape"),a.preferredLanguage("ru"),a.useLocalStorage(),a.storageKey("TRANSLATE_LANG_KEY"),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-right",t.preventDuplicates=!0,t.progressBar=!0}e.$inject=["$logProvider","toastrConfig","$translateProvider","RussianTranslations","EnglishTranslations"],angular.module("pjtLayout").config(e)}(),angular.module("pjtLayout").run(["$templateCache",function(e){e.put("app/admin/admin.html",'<div class=admin><div class=location><div class=location-language><a ng-click="root.changeLang(\'ru\')"><i class="fa fa-globe fa-fw"></i> Русский </a>/ <a ng-click="root.changeLang(\'en\')"><i class="fa fa-globe fa-fw"></i> English</a></div><input type=button class="btn btn-danger admin-btn" ng-click=root.logout() value="{{ \'COMMON.LOGOUT\' | translate }}"> <input type=button class="btn btn-primary admin-btn" ng-click=admin.goToMainPage() value="{{ \'COMMON.TO-MAIN-PAGE\' | translate }}"></div><div class=row><div class="col-lg-3 col-md-3 col-sm-12 form-add-user"><h3>{{ \'ADMIN.ANU.ADD-NEW-USER\' | translate }}</h3><form name=admin.userForm ng-submit=admin.submitForm(admin.user) novalidate><div class=form-group ng-class="{ \'has-error\' : admin.userForm.email.$invalid && !admin.userForm.email.$pristine }"><input type=email name=email class="form-control input-item-login" placeholder="{{ \'ADMIN.ANU.EMAIL\' | translate }}" ng-model=admin.user.email required><p ng-show="admin.userForm.email.$invalid && !admin.userForm.email.$pristine && admin.userForm.email.$error.required" class=help-block>{{ \'ADMIN.ANU.MAIL-REQUIRED\' | translate }}</p><p ng-show="!admin.userForm.email.$error.required && admin.userForm.email.$invalid && !admin.userForm.email.$pristine" class=help-block>{{ \'ADMIN.ANU.MAIL-VALID\' | translate }}</p></div><div class=form-group ng-class="{ \'has-error\' : admin.userForm.password.$invalid && !admin.userForm.password.$pristine }"><input type=password class=form-control name=password ng-model=admin.user.password placeholder="{{ \'ADMIN.ANU.PASSWORD\' | translate }}" required><p ng-show="admin.userForm.password.$invalid && !admin.userForm.password.$pristine && admin.userForm.password.$error.required" class=help-block>{{ \'ADMIN.ANU.PASSWORD-REQUIRED\' | translate }}</p></div><div class=form-group ng-class="{ \'has-error\' : (admin.userForm.passwordconfirm.$invalid && !admin.userForm.passwordconfirm.$pristine) || ((admin.user.passwordconfirm !== admin.user.password) && !auth.userForm.password.$pristine)}"><input type=password class=form-control name=passwordconfirm ng-model=admin.user.passwordconfirm required placeholder="{{ \'ADMIN.ANU.CONFIRM-PASSWORD\' | translate }}"><p ng-show="!admin.userForm.passwordconfirm.$error.required && (admin.user.passwordconfirm !== admin.user.password) && !admin.userForm.passwordconfirm.$pristine" class=help-block>{{ \'ADMIN.ANU.CONFIRM-PASSWORD-INCORRECT\' | translate }}</p><p ng-show="admin.userForm.passwordconfirm.$invalid && !admin.userForm.passwordconfirm.$pristine && admin.userForm.passwordconfirm.$error.required" class=help-block>{{ \'ADMIN.ANU.CONFIRM-PASSWORD-REQUIRED\' | translate }}</p></div><div class=form-group ng-class="{ \'has-error\' : admin.userForm.username.$invalid && !admin.userForm.username.$pristine }"><input type=text name=username class="form-control input-item-login" placeholder="{{ \'ADMIN.ANU.USER-NAME\' | translate }}" ng-model=admin.user.username required><p ng-show="admin.userForm.username.$invalid && !admin.userForm.username.$pristine && admin.userForm.username.$error.required" class=help-block>{{ \'ADMIN.ANU.USER-NAME-REQUIRED\' | translate }}</p></div><div class=form-group ng-class="{ \'has-error\' : admin.userForm.first_name.$invalid && !admin.userForm.first_name.$pristine }"><input type=text name=first_name class="form-control input-item-login" placeholder="{{ \'ADMIN.ANU.FIRST-NAME\' | translate }}" ng-model=admin.user.first_name required><p ng-show="admin.userForm.first_name.$invalid && !admin.userForm.first_name.$pristine && admin.userForm.first_name.$error.required" class=help-block>{{ \'ADMIN.ANU.FIRST-NAME-REQUIRED\' | translate }}</p></div><div class=form-group ng-class="{ \'has-error\' : admin.userForm.last_name.$invalid && !admin.userForm.last_name.$pristine }"><input type=text name=last_name class="form-control input-item-login" placeholder="{{ \'ADMIN.ANU.LAST-NAME\' | translate }}" ng-model=admin.user.last_name required><p ng-show="admin.userForm.last_name.$invalid && !admin.userForm.last_name.$pristine && admin.userForm.last_name.$error.required" class=help-block>{{ \'ADMIN.ANU.LAST-NAME-REQUIRED\' | translate }}</p></div><div class=form-group><select ng-model=admin.user.permission name=permission class="select-user-type form-control" title=user><option value="" disabled selected>{{ \'ADMIN.ANU.SELECT-PERMISSION\' | translate }}</option><option value=adminfull>admin full</option><option value=adminread>admin read-only</option><option value=userfull>user full</option><option value=userread>user read-only</option></select></div><div ng-show="admin.user.permission==\'userfull\' || admin.user.permission==\'userread\'" class=form-group><!--<select ng-model="admin.user.appnexususer" name="appnexususer" class="select-user-type form-control">--><!--<option value="" disabled selected>Select the appnexus user</option>--><!--<option ng-repeat="userappnexus in admin.appNexusUsers" value="{{userappnexus.name}}">{{userappnexus.name}}</option>--><!--</select>--><div dx-select-box=admin.selectAppNexusUser></div></div><button type=submit class="btn btn-primary" ng-disabled=admin.userForm.$invalid>{{ \'ADMIN.ANU.SUBMIT\' | translate }}</button></form></div><div class="col-lg-9 col-md-9 col-sm-12"><h3>{{ \'ADMIN.LIST-USER.TITLE\' | translate }}</h3><div dx-data-grid=admin.listOfUsers id=usersList></div></div></div></div>'),e.put("app/auth/auth.html",'<div class=location><div class=location-language><a ng-click="root.changeLang(\'ru\')"><i class="fa fa-globe fa-fw"></i> Русский </a>/ <a ng-click="root.changeLang(\'en\')"><i class="fa fa-globe fa-fw"></i> English</a></div><input type=button class="btn btn-primary admin-btn hide" ng-click=auth.goToAdminPanel() value="{{ \'COMMON.GO-TO-ADMIN-PANEL\' | translate }}"> <input type=button class="btn btn-danger admin-btn hide" ng-click=auth.logout() value="{{ \'COMMON.LOGOUT\' | translate }}"></div><div class="authorization container"><div class=row><div class="Absolute-Center is-Responsive reg-form-wrapper"><form name=auth.userForm ng-submit=auth.submitForm(auth.user) novalidate><!-- insert the name --><div class=col-sm-10><div class=form-group ng-class="{ \'has-error\' : auth.userForm.email.$invalid && !auth.userForm.email.$pristine }"><i class="fa fa-user fa-2x icon-for-user"></i> <input type=email name=email class="form-control input-item-login" placeholder="{{ \'AUTH.MAIL-PLACEHOLDER\' | translate }}" ng-model=auth.user.email required><p ng-show="auth.userForm.email.$invalid && !auth.userForm.email.$pristine && auth.userForm.email.$error.required" class=help-block>{{ \'AUTH.MAIL-REQUIRED\' | translate }}</p><p ng-show="!auth.userForm.email.$error.required && auth.userForm.email.$invalid && !auth.userForm.email.$pristine" class=help-block>{{ \'AUTH.MAIL-VALID\' | translate }}</p></div></div><div class=col-sm-10><div class=form-group ng-class="{ \'has-error\' : auth.userForm.password.$invalid && !auth.userForm.password.$pristine }"><i class="fa fa-unlock fa-2x icon-for-user"></i> <input type=password name=password class="input-item-password form-control input-item-password" ng-model=auth.user.password placeholder="{{ \'AUTH.MAIL-PASSWORD\' | translate }}" required max-length=10 min-length=4><p ng-show="auth.userForm.password.$invalid && !auth.userForm.password.$pristine" class=help-block>{{ \'AUTH.PASSWORD-REQUIRED\' | translate }}</p></div></div><div class=form-group><div class=col-sm-10><button type=submit class="submitting-button btn btn-success">{{ \'AUTH.MAIL-SUBMIT\' | translate }}</button></div></div></form></div><div class=advertiser-wrapper><div class="Absolute-Center is-Responsive"><div class="col-sm-12 col-md-10 col-md-offset-1"><div class=mode-button><div dx-select-box=auth.selectAdvertisers></div><div dx-button=auth.addButton class=add-advertisers></div></div></div></div></div></div></div>'),e.put("app/campaign/camp.html","<div ui-view=details></div><div ui-view=info></div>"),e.put("app/campaigndetails/campdetails.html",'<div class="container-fluid container-camp-second col-lg-12 col-md-12 col-sm-12"><div class="second-container-details row"><div class=label-container><input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.placement.header)" name=Placement value={{campdetails.ctrlBbtns.placement.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.creativeId.header)" name=creative_id value={{campdetails.ctrlBbtns.creativeId.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.creativeSize.header)" name=creative_size value={{campdetails.ctrlBbtns.creativeSize.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.viewability.header)" name=viewability value={{campdetails.ctrlBbtns.viewability.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.os.header)" name=OS value={{campdetails.ctrlBbtns.os.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.carrier.header)" name=carrier value={{campdetails.ctrlBbtns.carrier.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.networkSeller.header)" name=network(seller) value={{campdetails.ctrlBbtns.networkSeller.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.connectionType.header)" name=connection_type value={{campdetails.ctrlBbtns.connectionType.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.device.header)" name=device value={{campdetails.ctrlBbtns.device.btn}} class=nav-btn></div><div class=pie-chart-container><div class=header-pie-chart><div class=pie-chart-header><h4>{{campdetails.pieChartHeader}}</h4></div><div class=target-cpa-container><div class=input-target-cpa-text>target CPA</div><input class=input-target-cpa type=text ng-blur=campdetails.targetCpaChange($event) ng-keyup="$event.keyCode == 13 && campdetails.targetCpaChange($event)" ng-model=campdetails.targetCpa maxlength=5></div></div><div class=pie-charts><div class=chart-container dx-pie-chart=campdetails.pieChartAll></div><div class=chart-container dx-pie-chart=campdetails.pieChartConversions></div></div><div class=row><div class=col-lg-6><span class=first>${{campdetails.backetsRanges.first.min}}-${{campdetails.backetsRanges.first.max}}</span><div id=backets-1 dx-data-grid=campdetails.cpaBucketFirst></div></div><div class=col-lg-6><span class=first>${{campdetails.backetsRanges.second.min}}-${{campdetails.backetsRanges.second.max}}</span><div id=backets-2 dx-data-grid=campdetails.cpaBucketSecond></div></div></div><div class=row><div class=col-lg-6><span class=first>${{campdetails.backetsRanges.third.min}}-${{campdetails.backetsRanges.third.max}}</span><div id=backets-3 dx-data-grid=campdetails.cpaBucketThird></div></div><div class=col-lg-6><span class=first>${{campdetails.backetsRanges.fourth.min}}+</span><div id=backets-4 dx-data-grid=campdetails.cpaBucketFourth></div></div></div><!--<div class="buckets">--><!--<div><h3 class="header-buckets">CPA buckets</h3></div>--><!--<div class="bucket-item">--><!--<div><span class="first">${{campdetails.backetsRanges.first.min}}-${{campdetails.backetsRanges.first.max}}</span></div>--><!--<div class="bucket-item-list"><div ng-repeat="item in campdetails.cpaArrayFirst">{{item}}</div></div>--><!--</div>--><!--<div class="bucket-item">--><!--<div><span class="second">${{campdetails.backetsRanges.second.min}}-${{campdetails.backetsRanges.second.max}}</span></div>--><!--<div class="bucket-item-list"><div ng-repeat="item in campdetails.cpaArraySecond">{{item}}</div></div>--><!--</div>--><!--<div class="bucket-item">--><!--<div><span class="third">${{campdetails.backetsRanges.third.min}}-${{campdetails.backetsRanges.third.max}}</span></div>--><!--<div class="bucket-item-list"><div ng-repeat="item in campdetails.cpaArrayThird">{{item}}</div></div>--><!--</div>--><!--<div class="bucket-item">--><!--<div><span class="fourth">${{campdetails.backetsRanges.fourth.min}}+</span></div>--><!--<div class="bucket-item-list"><div ng-repeat="item in campdetails.cpaArrayFourth">{{item}}</div></div>--><!--</div>--><!--</div>--></div></div></div>'),e.put("app/campaignmain/campmain.html",'<div class="container-fluid container-camp col-lg-12 col-md-12 col-sm-12"><div class="row stats-header"><span translate=CAMP.NAME class=camp-header></span><span class=camp-header>: {{campmain.campName}}</span><div class=control dx-button=campmain.optimiser></div><div class="control pull-right" dx-select-box=campmain.datePiker></div></div><div class="row camp-content1"><div class="row-fluid charts-block"><div id=zoomedContainerFirst class="first-chart col-lg-5 col-md-9 col-sm-9 col-xs-9"><div id=zoomedChartFirst dx-chart=campmain.chartOptionsFirst></div><div dx-range-selector=campmain.rangeOptionsFirst id=rangeChartFirst></div></div><div class=checkbox-container><div><label class=label-checkbox><div dx-check-box=campmain.impressions></div></label><label class=label-checkbox><div dx-check-box=campmain.CPA></div></label><label class=label-checkbox><div dx-check-box=campmain.CPC></div></label><label class=label-checkbox><div dx-check-box=campmain.clicks></div></label><label class=label-checkbox><div dx-check-box=campmain.media></div></label><label class=label-checkbox><div dx-check-box=campmain.conversions></div></label><label class=label-checkbox><div dx-check-box=campmain.CTR></div></label></div></div><div id=zoomedContainerSecond class="first-chart col-lg-5 col-md-10 col-sm-10"><div id=zoomedChartSecond dx-chart=campmain.chartOptionsSecond></div><div dx-range-selector=campmain.rangeOptionsSecond></div></div></div></div><div class="row first-grid"><div id=gridContainer2 dx-data-grid=campmain.dataGridOptionsCampaign><div data-options="dxTemplate: {name: \'headerCellTemplate\'}"><div ng-model=main.state dx-select-box=$parent.campmain.selectCell></div></div></div></div></div>'),e.put("app/home/home.html",'<div id=wrapper><!-- Brand and toggle get grouped for better mobile display --><div class=row><div class="left-nav col-lg-1 col-md-2 col-sm-2 col-xs-2"><ul class="nav nav-list"><li class=nav-header><a ui-sref=home.main translate=INDEX.LEFT_NAV.HOME></a></li><li class=active><a ui-sref=home.campaign.details translate=INDEX.LEFT_NAV.CAMPAIGN>Campaign</a></li><li><a href=#/ translate=INDEX.LEFT_NAV.OPTIMIZER>Optimizer</a></li><li><a href=#/ translate=INDEX.LEFT_NAV.BILLING>Billing</a></li></ul></div><input class=open id=top-box ng-model=home.value ng-click=home.checked(home.value) type=checkbox value=true hidden><label class=btn for=top-box></label><div class="main-nav navbar-header col-lg-11 col-md-10 col-sm-10 col-xs-10 col-lg-offset-1 col-md-offset-2 col-sm-offset-2 col-xs-offset-2"><div class=row><div class="col-lg-12 col-md-12 col-sm-12"><button type=button data-target=#navbarCollapse data-toggle=collapse class=navbar-toggle><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href=# class=navbar-brand>{{ \'INDEX.ADVERTISER_TITLE\' | translate }} {{ home.advertiser.name }}</a><div class=location><div class=location-language><a ng-click="root.changeLang(\'ru\')"><i class="fa fa-globe fa-fw"></i> Русский </a>/ <a ng-click="root.changeLang(\'en\')"><i class="fa fa-globe fa-fw"></i> English</a></div><input type=button class="btn btn-danger admin-btn" ng-click=root.logout() value="{{ \'COMMON.LOGOUT\' | translate }}"> <input type=button id=homeAdm ng-show=home.isEven class="btn btn-primary admin-btn" ng-click=home.goToAdminPanel() value="{{ \'COMMON.GO-TO-ADMIN-PANEL\' | translate }}"></div></div></div></div><ui-view class="page-view col-lg-11 col-md-10 col-sm-10 col-xs-10 col-lg-offset-1 col-md-offset-2 col-sm-offset-2 col-xs-offset-2"></ui-view></div></div>'),e.put("app/campaignoptimiser/campaignoptimiser.html",'<div class="container-camp col-lg-12 col-md-12 col-sm-12 col-xs-12"><div class=row><div dx-button=CO.navCamp></div><div class=active dx-button=CO.navView></div><div dx-button=CO.navList></div><br><span translate=CO.NAME class=camp-header></span>:<span class=camp-header> <a href="" ui-sref="home.campaign.details({id: CO.campId})">{{CO.campName}}</a></span><div class=subTitle><table><tr><td class=tdTitle><b translate=CO.ORIGINAL>Original</b></td><td class=tdText>-x-036_SLS_DYN_0_APX_0W0_CPM_MSM_MUL_US.California_300x250 (Direct)</td></tr><tr><td class=tdTitle><b translate=CO.OPTIMISED>Optimised (Whitelist)</b></td><td class=tdText>-x-037_SLX_DYN_0_APX_0W0_CPM_MSM_MUL_US.California_300x250 (Direct)</td></tr></table></div></div><div class="col-md-3 col-md-offset-8 piker col-sm-3 col-sm-offset-8 col-xs-5 col-xs-offset-6"><div dx-select-box=CO.datePiker></div></div><div class="row campOpt-content"><h3 class=titleRules translate=CO.RULES>Rules for All Domains:</h3><div class=form-inline><input type=checkbox class="checkbox-inline spends" name=spends checked> {{\'CO.SPENDS\' | translate}}<div class=input-group><div class=input-group-addon>$</div><input type=text class="form-control moneySpends" value=2></div>{{\'CO.CONVERSIONS1\' | translate}}<select class="form-control input-group sel2"><option>Blacklist</option><option>Suspend</option></select></div><div class="form-inline input-group"><label class=radio-inline><input type=radio name=optradio checked> AND</label><label class=radio-inline><input type=radio name=optradio> OR</label></div><!-- second line--><div class=form-inline><input type=checkbox class="checkbox-inline spends" name=spends> {{\'CO.APP\' | translate}} <input type=text class="form-control impSpends" value=1000000 placeholder=""> {{\'CO.CONVERSIONS2\' | translate}}<select class="form-control input-group sel2"><option>Blacklist</option><option>Suspend</option></select></div><div class="form-inline input-group"><label class=radio-inline><input type=radio name=optradio2 checked> AND</label><label class=radio-inline><input type=radio name=optradio2> OR</label></div><!-- third line--><div class=form-inline><input type=checkbox class="checkbox-inline spends" name=spends> {{\'CO.UNDISCLOSED\' | translate}}<select class="form-control input-group sel2"><option>Blacklist ASAP</option><option>no change</option></select></div><h3 class=titleRules translate=CO.DOMAIN-RULES>Domain-specific rules:</h3><div class="row rowGrid"><h3 class=titleRules translate=CO.CURRENT-LIST>Current list of placements - Live now</h3><div id=gridContainer2 dx-data-grid=CO.dataGridOptionsCampaign><div data-options="dxTemplate: {name: \'headerCellTemplate\'}"><div ng-model=main.state dx-select-box=$parent.campmain.selectCell></div></div></div></div><div class="row rowGrid"><h3 class=titleRules><b>Blacklist</b></h3><div id=gridContainer3 dx-data-grid=CO.dataGridOptionsCampaign3><div data-options="dxTemplate: {name: \'headerCellTemplate\'}"><div ng-model=main.state3 dx-select-box=$parent.campmain.selectCell3></div></div></div></div><div class="row rowGrid"><h3 class=titleRules><b>Whitelist</b></h3><div id=gridContainer4 dx-data-grid=CO.dataGridOptionsCampaign4><div data-options="dxTemplate: {name: \'headerCellTemplate\'}"><div ng-model=main.state4 dx-select-box=$parent.campmain.selectCell4></div></div></div></div></div></div>'),
e.put("app/main/main.html",'<div class="container-home col-lg-12 col-md-12 col-sm-12 col-xs-12"><h1 translate=MAIN.HOME>Home</h1><div class="col-md-3 col-md-offset-8 piker col-sm-3 col-sm-offset-8 col-xs-5 col-xs-offset-6"><div dx-select-box=main.datePiker></div></div><div class="row charts-block"><div class="col-lg-5 col-md-9 col-sm-9 col-xs-9 chart"><div dx-chart=main.chartOptions id=chart></div></div><div class=checkbox-container><label class=label-checkbox><div class=checkboxchart dx-check-box=main.impressions></div></label><label class=label-checkbox><div class=checkboxchart dx-check-box=main.CVR></div></label><label class=label-checkbox><div class=checkboxchart dx-check-box=main.CPC></div></label><label class=label-checkbox><div class=checkboxchart dx-check-box=main.clicks></div></label><label class=label-checkbox><div class=checkboxchart dx-check-box=main.media></div></label><label class=label-checkbox><div class=checkboxchart dx-check-box=main.conversions></div></label><label class=label-checkbox><div class=checkboxchart dx-check-box=main.CTR></div></label></div><div class="col-lg-5 col-md-12 col-sm-12 chart"><div id=visualMap></div></div></div><div class="row first-grid table-responsive"><table class="table table-bordered"><tr><td translate=MAIN.TOTALS.COLUMNS.TOTALS></td><td translate=MAIN.TOTALS.COLUMNS.SPENT></td><td translate=MAIN.TOTALS.COLUMNS.CONV></td><td translate=MAIN.TOTALS.COLUMNS.IMP></td><td translate=MAIN.TOTALS.COLUMNS.CPC></td><td translate=MAIN.TOTALS.COLUMNS.CPM></td><td translate=MAIN.TOTALS.COLUMNS.CVR></td><td translate=MAIN.TOTALS.COLUMNS.CTR></td></tr><tr><td></td><td>${{main.totals.spent}}</td><td>{{main.totals.conv}}</td><td>{{main.totals.imp}}</td><td>${{main.totals.cpc}}</td><td>${{main.totals.cpm}}</td><td>{{main.totals.cvr}}%</td><td>{{main.totals.ctr}}%</td></tr></table></div><div class="row second-grid"><div id=gridContainer2 dx-data-grid=main.dataGridOptionsMultiple></div></div></div>')}]);