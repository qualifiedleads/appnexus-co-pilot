function RootController(e,a,t,i,n,s){function r(){n.remove("permission"),n.remove("token"),a.go("auth")}function o(){a.go("admin")}var l=this;!n.get("token")||"adminfull"!=n.get("permission")&&"adminread"!=n.get("permission")||(l.isEven=!0),!n.get("token")||"userfull"!=n.get("permission")&&"userread"!=n.get("permission")||(l.isEven=!1),e.Globalize.culture(i.get("TRANSLATE_LANG_KEY")),l.changeLang=function(i){t.use(i),e.Globalize.culture(i),a.reload()},l.goToAdminPanel=o,l.logout=r}RootController.$inject=["$window","$state","$translate","$translateLocalStorage","$cookies","$scope"],function(){"use strict";angular.module("pjtLayout",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ui.router","ui.bootstrap","toastr","dx","pascalprecht.translate","chart.js","ngStorage"])}(),function(){"use strict";function e(e,a,t){function i(a,i,n,s){return e({method:"GET",url:"/api/v1/statistics",params:{advertiser_id:a,from_date:i,to_date:n,by:s}}).then(function(e){for(var a in e.data.statistics)e.data.statistics[a].cvr=+parseFloat(e.data.statistics[a].cvr).toFixed(4),e.data.statistics[a].ctr=+parseFloat(e.data.statistics[a].ctr).toFixed(4),e.data.statistics[a].cpc=+parseFloat(e.data.statistics[a].cpc).toFixed(4),e.data.statistics[a].cpm=+parseFloat(e.data.statistics[a].cpm).toFixed(4),e.data.statistics[a].spend=+parseFloat(e.data.statistics[a].spend).toFixed(4),e.data.statistics[a].day=t.moment(e.data.statistics[a].day).format("DD/MM");return e.data})}function n(a,t,i){return e({method:"GET",url:"/api/v1/totals",params:{advertiser_id:a,from_date:t,to_date:i}}).then(function(e){return e.data.totals.cvr=+parseFloat(e.data.totals.cvr).toFixed(4),e.data.totals.ctr=+parseFloat(e.data.totals.ctr).toFixed(4),e.data.totals.cpc=+parseFloat(e.data.totals.cpc).toFixed(4),e.data.totals.cpm=+parseFloat(e.data.totals.cpm).toFixed(4),e.data.totals.spend=+parseFloat(e.data.totals.spend).toFixed(4),e.data.totals})}function s(a,t,i,n,s,r,o,l,d){return r?(o=r[0].desc===!0?"desc":"asc",r=r[0].selector):(r="campaign",o="DESC"),null==s&&(s=20),null==n&&(n=0),e({method:"GET",url:"/api/v1/campaigns",params:{advertiser_id:a,from_date:t,to_date:i,skip:n,take:s,sort:r,order:o,stat_by:l,filter:d}}).then(function(e){for(var a in e.data.campaigns)e.data.campaigns[a].cvr=+parseFloat(e.data.campaigns[a].cvr).toFixed(4),e.data.campaigns[a].ctr=+parseFloat(e.data.campaigns[a].ctr).toFixed(4),e.data.campaigns[a].cpc=+parseFloat(e.data.campaigns[a].cpc).toFixed(4),e.data.campaigns[a].cpm=+parseFloat(e.data.campaigns[a].cpm).toFixed(4),e.data.campaigns[a].spend=+parseFloat(e.data.campaigns[a].spend).toFixed(4);return e.data})}function r(a,t,i){return e({method:"GET",url:"/api/v1/map/clicks",params:{advertiser_id:a,from_date:t,to_date:i}}).then(function(e){return e.data})}var o=this;o.statsCampaigns=s,o.statsTotals=n,o.statsChart=i,o.statsMap=r}e.$inject=["$http","$translateLocalStorage","$window"],angular.module("pjtLayout").service("Main",e)}(),function(){"use strict";function e(e,a,t,i,n){var s=this;s.advertiser=t.advertiser,s.Main=n,s.multipleTotalCount=0,s.checkChart=[],s.by="imp,cvr,cpc,clicks,spend,conv,ctr";var r=i.instant;null==t.checkChart&&(t.checkChart={imp:!0,cvr:!0,cpc:!0,clicks:!0,spend:!0,conv:!0,ctr:!0}),s.chartSeries=[{valueField:"imp",name:"Impressions",axis:"imp",visible:t.checkChart.imp},{valueField:"cvr",name:"CVR",axis:"cvr",visible:t.checkChart.cvr},{valueField:"cpc",name:"CPC",axis:"CPC",visible:t.checkChart.cpc},{valueField:"clicks",name:"clicks",axis:"clicks",visible:t.checkChart.clicks},{valueField:"spend",name:"media",axis:"spend",visible:t.checkChart.spend},{valueField:"conv",name:"conversions",axis:"conv",visible:t.checkChart.conv},{valueField:"ctr",name:"CTR",axis:"ctr",visible:t.checkChart.ctr}],null==t.dataStart&&null==t.dataEnd?(t.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),t.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):(s.dataStart=t.dataStart,s.dataEnd=t.dataEnd),null==t.SelectedTime&&(t.SelectedTime=0);var o=[{ID:0,Name:r("MAIN.DATE_PICKER.YESTERDAY"),dataStart:e.moment({hour:"00"}).subtract(1,"day").unix(),dataEnd:e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()},{ID:1,Name:r("MAIN.DATE_PICKER.LAST_3_DAYS"),dataStart:e.moment({hour:"00"}).subtract(3,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:2,Name:r("MAIN.DATE_PICKER.LAST_7_DAYS"),dataStart:e.moment({hour:"00"}).subtract(7,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:3,Name:r("MAIN.DATE_PICKER.LAST_14_DAYS"),dataStart:e.moment({hour:"00"}).subtract(14,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:4,Name:r("MAIN.DATE_PICKER.LAST_21_DAYS"),dataStart:e.moment({hour:"00"}).subtract(21,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:5,Name:r("MAIN.DATE_PICKER.CURRENT_MONTH"),dataStart:e.moment().startOf("month").unix(),dataEnd:e.moment().unix()},{ID:6,Name:r("MAIN.DATE_PICKER.LAST_MONTH"),dataStart:e.moment().subtract(1,"month").startOf("month").unix(),dataEnd:e.moment().subtract(1,"month").endOf("month").unix()},{ID:7,Name:r("MAIN.DATE_PICKER.LAST_90_DAYS"),dataStart:e.moment({hour:"00"}).subtract(90,"day").unix(),dataEnd:e.moment().unix()},{ID:8,Name:r("MAIN.DATE_PICKER.ALL_TIME"),dataStart:0,dataEnd:e.moment().unix()}];s.datePiker={items:o,displayExpr:"Name",valueExpr:"ID",value:o[t.SelectedTime].ID,onValueChanged:function(e){t.SelectedTime=e.value,t.dataStart=o[e.value].dataStart,t.dataEnd=o[e.value].dataEnd,a.reload()}},s.totals=[],s.chartStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return s.Main.statsChart(s.advertiser.id,s.dataStart,s.dataEnd,s.by).then(function(e){return e.statistics})}}),s.multipleStore=new e.DevExpress.data.CustomStore({totalCount:function(){return s.multipleTotalCount},load:function(e){return s.Main.statsCampaigns(s.advertiser.id,s.dataStart,s.dataEnd,e.skip,e.take,e.sort,e.order,s.by,e.filter).then(function(e){return s.multipleTotalCount=e.totalCount,e.campaigns})}}),s.Main.statsTotals(s.advertiser.id,s.dataStart,s.dataEnd).then(function(e){s.totals.imp=e.imp.toString().split(/(?=(?:\d{3})+(?!\d))/).join(),s.totals.spent=e.spend.toFixed(2),s.totals.conv=e.conv,s.totals.cpc=e.cpc,s.totals.cpm=e.cpm,s.totals.cvr=e.cvr,s.totals.ctr=e.ctr}),s.selectedItems=[],s.chartOptionsFuncgrid=[],s.dataGridOptionsMultiple={bindingOptions:{dataSource:"main.multipleStore"},onInitialized:function(e){s.dataGridOptionsMultipleFunc=e.component},showBorders:!0,alignment:"left",headerFilter:{visible:!0},filterRow:{visible:!0,applyFilter:"auto"},"export":{enabled:!0,fileName:"Employees"},allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,columnChooser:{enabled:!0},columnFixing:{enabled:!0},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:r("MAIN.CAMPAIGN.COLUMNS.CAMPAIGN"),dataField:"campaign",fixed:!0,cellTemplate:function(a,t){a.addClass("a-campaign"),e.angular.element('<a href="#/home/campaign/'+t.data.id+'">'+t.data.campaign+"</a>").appendTo(a)}},{caption:r("MAIN.CAMPAIGN.COLUMNS.SPENT"),dataField:"spend"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:r("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{width:200,dataField:r("MAIN.CAMPAIGN.COLUMNS.STATS"),cellTemplate:function(a,t){if(t.data.chart){var i={onInitialized:function(e){s.chartOptionsFuncgrid[t.rowIndex]=e.component},dataSource:t.data.chart,size:{height:80,width:185},commonSeriesSettings:{argumentField:"day",type:"line",point:{size:2,hoverStyle:{border:{visible:!0,width:1},size:4}}},commonAxisSettings:{label:{visible:!1},grid:{visible:!1}},valueAxis:[{name:"imp"},{name:"cvr"},{name:"CPC"},{name:"clicks"},{name:"spend"},{name:"conv"},{name:"ctr"}],argumentAxis:{valueMarginsEnabled:!1,discreteAxisDivisionMode:"crossLabels",grid:{visible:!1},label:{visible:!1},minorGrid:{visible:!1},minorTick:{visible:!1},tick:{visible:!1}},series:s.chartSeries,legend:{visible:!1},tooltip:{enabled:!0,customizeTooltip:function(e){return{text:e.valueText}}}};a.addClass("img-container");var n=e.$('<div class="chartMulti" ></div>');n.dxChart(i),n.appendTo(a)}else a.addClass("img-container"),e.$('<div id="chartMulti" ></div>').appendTo(a)}}],onSelectionChanged:function(e){s.selectedItems=e.selectedRowsData,s.disabled=!s.selectedItems.length}},s.types=["line","stackedLine","fullStackedLine"],s.chartOptions={onInitialized:function(e){s.chartOptionsFunc=e.component},series:s.chartSeries,bindingOptions:{dataSource:"main.chartStore"},commonSeriesSettings:{argumentField:"day",type:"Line",point:{size:3,hoverStyle:{border:{visible:!0,width:2},size:5}}},commonAxisSettings:{valueMarginsEnabled:!0},margin:{bottom:20},argumentAxis:{valueMarginsEnabled:!1,discreteAxisDivisionMode:"crossLabels",grid:{visible:!0}},valueAxis:[{name:"imp"},{name:"cvr"},{name:"CPC"},{name:"clicks"},{name:"spend"},{name:"conv"},{name:"ctr"}],legend:{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"bottom"},tooltip:{enabled:!0,customizeTooltip:function(e){return{text:e.valueText}}}},s.updateCharts=function(a,i,n){var r={};t.checkChart[i]=n;var o=0;if(n)for(s.chartOptionsFunc.getSeriesByName(a).show(),r=e.$(".chartMulti"),o=0;o<r.length;o++)e.$(r[o]).dxChart("instance").getSeriesByName(a).show();else for(s.chartOptionsFunc.getSeriesByName(a).hide(),r=e.$(".chartMulti"),o=0;o<r.length;o++)e.$(r[o]).dxChart("instance").getSeriesByName(a).hide()},s.impressions={text:r("MAIN.CHECKBOX.IMPRESSIONS"),value:t.checkChart.imp,onValueChanged:function(e){s.updateCharts("Impressions","imp",e.value)}},s.CPA={text:r("MAIN.CHECKBOX.CPA"),value:t.checkChart.cvr,onValueChanged:function(e){s.updateCharts("CVR","cvr",e.value)}},s.CPC={text:r("MAIN.CHECKBOX.CPC"),value:t.checkChart.cpc,onValueChanged:function(e){s.updateCharts("CPC","cpc",e.value)}},s.clicks={text:r("MAIN.CHECKBOX.CLICKS"),value:t.checkChart.clicks,onValueChanged:function(e){s.updateCharts("clicks","clicks",e.value)}},s.media={text:r("MAIN.CHECKBOX.MEDIA_SPENT"),value:t.checkChart.spend,onValueChanged:function(e){s.updateCharts("media","spend",e.value)}},s.conversions={text:r("MAIN.CHECKBOX.CONVERSIONS"),value:t.checkChart.conv,onValueChanged:function(e){s.updateCharts("conversions","conv",e.value)}},s.CTR={text:r("MAIN.CHECKBOX.CTR"),value:t.checkChart.ctr,onValueChanged:function(e){s.updateCharts("CTR","ctr",e.value)}};var l={};s.Main.statsMap(s.advertiser.id,s.dataStart,s.dataEnd).then(function(a){l=a,e.$("#visualMap").dxVectorMap(s.vectorMapOptions)}),s.vectorMapOptions={size:{height:320},layers:[{name:"areas",dataSource:e.DevExpress.viz.map.sources.world,palette:"blue",colorGroups:[0,100,1e3,1e4],colorGroupingField:"clicks",label:{enabled:!0,dataField:"name"},customize:function(e){e.forEach(function(e){var a=e.attribute("name"),t=l[a];t&&e.attribute("clicks",t)})}}],tooltip:{enabled:!0,customizeTooltip:function(e){return e.attribute("clicks")?{text:e.attribute("name")+": "+e.attribute("clicks")}:{text:e.attribute("name")}}},legends:[{source:{layer:"areas",grouping:"color"},horizontalAlignment:"left",verticalAlignment:"bottom",customizeText:function(e){return e.start+" to "+e.end+" clicks"}}],bounds:[-180,85,180,-75]}}e.$inject=["$window","$state","$localStorage","$translate","Main"],angular.module("pjtLayout").controller("MainController",e)}(),angular.module("pjtLayout").controller("RootController",RootController),function(){"use strict";function e(e,a,t){var i=this;i.advertiser={},i.a=123,null==e.advertiser?a.go("auth"):i.advertiser.name=e.advertiser.name,i.checked=function(e){var a=angular.element(t.document.querySelector(".left-nav"))[0],i=angular.element(t.document.querySelector(".main-nav"))[0];e===!0?(a.classList.add("left-menu-close"),i.style.width="100%"):e===!1&&(a.classList.remove("left-menu-close"),i.style.width="")}}e.$inject=["$localStorage","$state","$document"],angular.module("pjtLayout").controller("HomeController",e)}(),function(){"use strict";angular.module("pjtLayout").constant("RussianTranslations",{AUTH:{GO_BUTTON:"Дальше"},INDEX:{ADVERTISER_TITLE:"Статистика для",LEFT_NAV:{HOME:"Главная",CAMPAIGN:"Кампания",BILLING:"Биллинг",OPTIMIZER:"Оптимизатор"}},MAIN:{HOME:"Главная",DATE_PICKER:{YESTERDAY:"Вчера",LAST_3_DAYS:"Последние 3 дня",LAST_7_DAYS:"Последние 7 дней",LAST_14_DAYS:"Последние 14 дней",LAST_21_DAYS:"Последние 21 дней",CURRENT_MONTH:"Текущий месяц",LAST_MONTH:"Прошлый месяц",LAST_90_DAYS:"Последние 90 дней",ALL_TIME:"Все время"},TOTALS:{COLUMNS:{TOTALS:"ИТОГИ",SPENT:"Потрачено",CONV:"Конв",IMP:"Показы",CLICKS:"Клики",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR"}},CAMPAIGN:{COLUMNS:{CAMPAIGN:"Кампания",PLACEMENT:"Размещение",NETWORK:"Сеть_Издатель",SPENT:"Потрачено",CONV:"Конв",IMP:"Показы",CLICKS:"Клики",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR",STATS:"Стат"}},CHECKBOX:{IMPRESSIONS:"Показы",CPA:"CPA",CPC:"CPC",CLICKS:"Клики",MEDIA_SPENT:"Затраты",CONVERSIONS:"Конверсии",CTR:"CTR"}},CAMP:{NAME:"Кампания","GO-OPTIMISER":"Перейти к оптимизатору"},CO:{NAME:"Оптимизатор кампании",ORIGINAL:"Оригинал",OPTIMISED:"Оптимизированный (белый список)",RULES:"Правила для всех доменов:",SPENDS:"если приложение/домен расходует больше чем",CONVERSIONS1:"и conversions равны 0, то",APP:"если приложение/домен имеет более чем",CONVERSIONS2:"imp. и conversions равны 0, то",UNDISCLOSED:'если приложение/домен помечен как "нераскрытый" ',"DOMAIN-RULES":"Домен-специфические правила:","CURRENT-LIST":"Текущий список мест размещения ","GO-OPTIMISER":"Перейти к оптимизатору"}})}(),function(){"use strict";angular.module("pjtLayout").constant("EnglishTranslations",{AUTH:{GO_BUTTON:"GO"},INDEX:{ADVERTISER_TITLE:"Stats for",LEFT_NAV:{HOME:"Home",CAMPAIGN:"Campaign",BILLING:"Billing",OPTIMIZER:"Optimizer"}},MAIN:{HOME:"Home",DATE_PICKER:{YESTERDAY:"Yesterday",LAST_3_DAYS:"Last 3 days",LAST_7_DAYS:"Last 7 days",LAST_14_DAYS:"Last 14 days",LAST_21_DAYS:"Last 21 days",CURRENT_MONTH:"Current month",LAST_MONTH:"Last month",LAST_90_DAYS:"Last 90 days",ALL_TIME:"All times"},TOTALS:{COLUMNS:{TOTALS:"TOTALS",SPENT:"Spent",CONV:"Conv",IMP:"Imp",CLICKS:"Clicks",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR"}},CAMPAIGN:{COLUMNS:{CAMPAIGN:"Campaign",PLACEMENT:"Placement",NETWORK:"Network+Publisher",SPENT:"Spent",CONV:"Conv",IMP:"Imp",CLICKS:"Clicks",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR",STATS:"Stats"}},CHECKBOX:{IMPRESSIONS:"Impressions",CPA:"CPA",CPC:"CPC",CLICKS:"Clicks",MEDIA_SPENT:"Media Spent",CONVERSIONS:"Conversions",CTR:"CTR"}},CAMP:{NAME:"Campaign","GO-OPTIMISER":"Go to the Optimiser"},CO:{NAME:"Campaign optimiser",ORIGINAL:"Original",OPTIMISED:"Optimised (Whitelist)",RULES:"Rules for All Domains:",SPENDS:"if an app/domain spends more than",CONVERSIONS1:"and conversions are 0 then",APP:"if an app/domain has more than",CONVERSIONS2:"imp. and conversions are 0 then",UNDISCLOSED:'if an app/domain is marked as "Undisclosed"',"DOMAIN-RULES":"Domain-specific rules:","CURRENT-LIST":"Current list of placements - Live now","CAMPAIGN-HOME":"Campaign Home","OPTIMIZER-VIEW":"Optimizer View","SUSPEND-LIST":"Suspend list"}})}(),function(){"use strict";function e(e,a,t){function i(a){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)}).then(function(e){return e.data})}function n(a,t,i,n){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)+"/details",params:{from_date:t,to_date:i,section:n}}).then(function(e){return e.data})}function s(i,n,s,r){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(i)+"/graphinfo",params:{from_date:n,to_date:s,by:r}}).then(function(e){e.data=[{date:"2016-06-27T00:00:00Z",impression:-12,cpa:10,cpc:32,clicks:-5,mediaspent:5,conversions:40,ctr:15},{date:"2016-06-28T00:00:00Z",impression:-32,cpa:30,cpc:12,clicks:1,mediaspent:15,conversions:23,ctr:-10},{date:"2016-06-29T00:00:00Z",impression:-20,cpa:20,cpc:30,clicks:2,mediaspent:5,conversions:33,ctr:10},{date:"2016-06-30T00:00:00Z",impression:-39,cpa:50,cpc:19,clicks:6,mediaspent:55,conversions:87,ctr:-42},{date:"2016-07-01T00:00:00Z",impression:-10,cpa:10,cpc:15,clicks:9,mediaspent:44,conversions:-20,ctr:-57},{date:"2016-07-02T00:00:00Z",impression:10,cpa:10,cpc:15,clicks:8,mediaspent:77,conversions:23,ctr:99},{date:"2016-07-03T00:00:00Z",impression:30,cpa:50,cpc:13,clicks:23,mediaspent:66,conversions:-10,ctr:110},{date:"2016-07-04T00:00:00Z",impression:40,cpa:50,cpc:14,clicks:12,mediaspent:11,conversions:37,ctr:56},{date:"2016-07-05T00:00:00Z",impression:50,cpa:90,cpc:90,clicks:-10,mediaspent:99,conversions:50,ctr:67},{date:"2016-07-06T00:00:00Z",impression:40,cpa:175,cpc:120,clicks:31,mediaspent:-11,conversions:23,ctr:67},{date:"2016-07-07T00:00:00Z",impression:-12,cpa:10,cpc:32,clicks:70,mediaspent:-2,conversions:58,ctr:-20},{date:"2016-07-08T00:00:00Z",impression:-32,cpa:30,cpc:12,clicks:26,mediaspent:5,conversions:21,ctr:-10},{date:"2016-07-09T00:00:00Z",impression:-20,cpa:20,cpc:30,clicks:52,mediaspent:76,conversions:10,ctr:70},{date:"2016-07-10T00:00:00Z",impression:-12,cpa:10,cpc:32,clicks:1,mediaspent:32,conversions:49,ctr:90},{date:"2016-07-11T00:00:00Z",impression:-32,cpa:30,cpc:12,clicks:38,mediaspent:11,conversions:99,ctr:10},{date:"2016-07-12T00:00:00Z",impression:-20,cpa:20,cpc:30,clicks:-16,mediaspent:15,conversions:60,ctr:58},{date:"2016-07-13T00:00:00Z",impression:-39,cpa:50,cpc:19,clicks:-40,mediaspent:46,conversions:23,ctr:78},{date:"2016-07-14T00:00:00Z",impression:-10,cpa:10,cpc:15,clicks:24,mediaspent:68,conversions:-20,ctr:80},{date:"2016-07-15T00:00:00Z",impression:10,cpa:10,cpc:15,clicks:12,mediaspent:49,conversions:-37,ctr:22},{date:"2016-07-16T00:00:00Z",impression:30,cpa:100,cpc:13,clicks:83,mediaspent:36,conversions:-1,ctr:67},{date:"2016-07-17T00:00:00Z",impression:40,cpa:110,cpc:14,clicks:41,mediaspent:28,conversions:65,ctr:-10},{date:"2016-07-18T00:00:00Z",impression:50,cpa:90,cpc:90,clicks:27,mediaspent:95,conversions:23,ctr:88},{date:"2016-07-19T00:00:00Z",impression:40,cpa:95,cpc:120,clicks:83,mediaspent:92,conversions:10,ctr:77},{date:"2016-07-20T00:00:00Z",impression:-12,cpa:10,cpc:32,clicks:-20,mediaspent:15,conversions:7,ctr:66},{date:"2016-07-21T00:00:00Z",impression:-32,cpa:30,cpc:12,clicks:56,mediaspent:54,conversions:34,ctr:-10},{date:"2016-07-22T00:00:00Z",impression:-20,cpa:20,cpc:30,clicks:17,mediaspent:22,conversions:65,ctr:-40},{date:"2016-07-23T00:00:00Z",impression:-12,cpa:10,cpc:32,clicks:22,mediaspent:77,conversions:52,ctr:-70},{date:"2016-07-24T00:00:00Z",impression:-32,cpa:30,cpc:12,clicks:29,mediaspent:90,conversions:23,ctr:-54},{date:"2016-07-25T00:00:00Z",impression:-20,cpa:20,cpc:30,clicks:90,mediaspent:17,conversions:59,ctr:28},{date:"2016-07-26T00:00:00Z",impression:-39,cpa:50,cpc:19,clicks:45,mediaspent:47,conversions:82,ctr:65},{date:"2016-07-27T00:00:00Z",impression:-10,cpa:10,cpc:15,clicks:-30,mediaspent:32,conversions:33,ctr:58}];var i=a.get("TRANSLATE_LANG_KEY");for(var n in e.data)e.data[n].ctr=+parseFloat(e.data[n].ctr).toFixed(4),e.data[n].conversions=+parseFloat(e.data[n].conversions).toFixed(4),e.data[n].impression=+parseFloat(e.data[n].impression).toFixed(4),e.data[n].cpa=+parseFloat(e.data[n].cpa).toFixed(4),e.data[n].cpc=+parseFloat(e.data[n].cpc).toFixed(4),e.data[n].clicks=+parseFloat(e.data[n].clicks).toFixed(4),e.data[n].mediaspent=+parseFloat(e.data[n].mediaspent).toFixed(4),e.data[n].date=t.moment(e.data[n].date).locale(i).format("L");return e.data})}function r(a,t,i){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)+"/cpareport",params:{id:a,from_date:t,to_date:i}}).then(function(e){return e.data})["catch"](function(){return[{date:new Date(1994,2,1),low:24,high:25,open:25,close:24.875,avg:24.5},{date:new Date(1994,2,2),low:23.625,high:25.125,open:24,close:24.875,avg:24.375},{date:new Date(1994,2,3),low:26.25,high:28.25,open:26.75,close:27,avg:27.25},{date:new Date(1994,2,4),low:26.5,high:27.875,open:26.875,close:27.25,avg:27.1875},{date:new Date(1994,2,7),low:26.375,high:27.5,open:27.375,close:26.75,avg:26.9375},{date:new Date(1994,2,8),low:25.75,high:26.875,open:26.75,close:26,avg:26.3125},{date:new Date(1994,2,9),low:25.75,high:26.75,open:26.125,close:26.25,avg:25.9375},{date:new Date(1994,2,10),low:25.75,high:26.375,open:26.375,close:25.875,avg:26.0625},{date:new Date(1994,2,11),low:24.875,high:26.125,open:26,close:25.375,avg:25.5},{date:new Date(1994,2,14),low:25.125,high:26,open:25.625,close:25.75,avg:25.5625},{date:new Date(1994,2,15),low:25.875,high:26.625,open:26.125,close:26.375,avg:26.25}]})}function o(a,t,i,n,s,r,o){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)+"/domains",params:{id:a,from_date:t,to_date:i,skip:n,take:s,order:r,filter:o}}).then(function(e){return e.data})["catch"](function(){return[{placement:"CNN.com",NetworkPublisher:"Google Adx",conv:"8",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"true",blackList:"false",suspended:"false"}},{placement:"Hidden",NetworkPublisher:"PubMatic",conv:"3",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"false",blackList:"true",suspended:"false"}},{placement:"BBC.com",NetworkPublisher:"OpenX",conv:"1",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"false",blackList:"false",suspended:"true"}},{placement:"msn.com",NetworkPublisher:"Rubicon",conv:"8",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"true",blackList:"false",suspended:"false"}}]})}function l(a,t,i,n,s,r,o,l){return e({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/campaigns",params:{from_date:a,to_date:t,skip:i,take:n,sort:s,order:r,stat_by:o,filter:l}}).then(function(e){return e.data})}var d=this;d.cpaReport=r,d.nameCampaigns=i,d.statsCampaigns=l,d.statsChart=s,d.campaignDetails=n,d.campaignDomains=o}e.$inject=["$http","$translateLocalStorage","$window"],angular.module("pjtLayout").service("CampMain",e)}(),function(){"use strict";function e(e,a,t,i,n,s){var r=this;r.Camp=n,r.multipleTotalCount=0,r.checkChart=[],r.by="imp,cvr,cpc,clicks,spend,conv,ctr";var o=i.instant;r.campName=s.campaign,r.campId=s.id,null==t.checkCharCamp&&(t.checkCharCamp={impressions:!0,cpa:!0,cpc:!0,clicks:!0,mediaspent:!0,conversions:!0,ctr:!0}),r.optimiser={text:o("CAMP.GO-OPTIMISER"),onClick:function(){a.go("home.campaignoptimiser",{id:r.campId})}},r.seriesCamp=[{name:"Impressions",argumentField:"date",valueField:"impression",axis:"impression",visible:t.checkCharCamp.impressions},{argumentField:"date",valueField:"cpa",name:"CPA",axis:"cpa",visible:t.checkCharCamp.cpa},{argumentField:"date",valueField:"cpc",name:"CPC",axis:"cpc",visible:t.checkCharCamp.cpc},{argumentField:"date",valueField:"clicks",name:"Clicks",axis:"clicks",visible:t.checkCharCamp.clicks},{argumentField:"date",valueField:"mediaspent",name:"mediaspent",axis:"mediaspent",visible:t.checkCharCamp.mediaspent},{argumentField:"date",valueField:"conversions",name:"Conversions",axis:"conversions",visible:t.checkCharCamp.conversions},{argumentField:"date",valueField:"ctr",name:"CTR",axis:"ctr",visible:t.checkCharCamp.ctr}],r.totals=[],r.chartStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return r.Camp.statsChart(r.campId,r.dataStart,r.dataEnd,r.by).then(function(e){return e})}}),r.boxPlotStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return r.Camp.cpaReport(r.campId,r.dataStart,r.dataEnd).then(function(e){return e})}}),r.gridStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(e){return r.Camp.campaignDomains(r.campId,r.dataEnd,r.dataStart,e.skip,e.take,e.sort,e.order,e.filter).then(function(e){return t.gridStore=e,e})}}),r.detailsStoreAll=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return r.Camp.campaignDetails(r.dataStart,r.dataEnd,t.selectedSection).then(function(e){return e.all})}}),r.detailsStoreConversion=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return r.Camp.campaignDetails(r.dataStart,r.dataEnd,r.by).then(function(e){return e.conversions})}}),r.multipleStore=new e.DevExpress.data.CustomStore({totalCount:function(){return r.multipleTotalCount},load:function(e){return null==e.take&&(e.take=20),null==e.skip&&(e.skip=0),null==e.sort&&(e.sort="campaign"),null==e.order&&(e.order="DESC"),r.Camp.statsCampaigns(r.dataStart,r.dataEnd,e.skip,e.take,e.sort,e.order,r.by,e.filter).then(function(e){return r.multipleTotalCount=e.totalCount,e.campaigns})}}),r.types=["line","stackedLine","fullStackedLine"],r.chartOptionsFirst={onInitialized:function(e){r.chartOptionsFuncFirst=e.component},valueAxis:[{name:"impression"},{name:"cpc"},{name:"cpa"},{name:"clicks"},{name:"mediaspent"},{name:"conversions"},{name:"ctr"}],argumentAxis:{valueMarginsEnabled:!1,discreteAxisDivisionMode:"crossLabels",grid:{visible:!0}},crosshair:{enabled:!0,color:"deepskyblue",label:{visible:!0}},commonSeriesSettings:{point:{size:3,hoverStyle:{border:{visible:!0,width:2},size:5}}},bindingOptions:{dataSource:"campmain.chartStore"},series:r.seriesCamp,legend:{visible:!1},loadingIndicator:{show:!0,text:"Creating a chart..."}},r.rangeOptionsFirst={margin:{left:10},scale:{minorTickCount:1},bindingOptions:{dataSource:"campmain.chartStore"},chart:{series:[{name:"Impressions",argumentField:"date",valueField:"impression",axis:"impression"},{argumentField:"date",valueField:"cpa",name:"CPA",axis:"cpa"},{argumentField:"date",valueField:"cpc",name:"CPC",axis:"cpc"},{argumentField:"date",valueField:"clicks",name:"Clicks",axis:"clicks"},{argumentField:"date",valueField:"mediaspent",name:"mediaspent",axis:"mediaspent"},{argumentField:"date",valueField:"conversions",name:"Conversions",axis:"conversions"},{argumentField:"date",valueField:"ctr",name:"CTR",axis:"ctr"}]},behavior:{callSelectedRangeChanged:"onMoving"},onSelectedRangeChanged:function(a){var t=e.$("#zoomedContainerFirst #zoomedChartFirst").dxChart("instance");t.zoomArgument(a.startValue,a.endValue)}},r.updateCharts=function(a,i,n){t.checkCharCamp[i]=n,r.gridCharts=e.$("#zoomedChartFirst").dxChart("instance"),r.rangeChartFirst=e.$("#rangeChartFirst").dxRangeSelector("instance"),n?(t.checkCharCamp.seriesShortName=!0,r.gridCharts.getSeriesByName(a).show()):(t.checkCharCamp.seriesShortName=!1,r.chartOptionsFuncFirst.getSeriesByName(a).hide())},r.impressions={text:o("MAIN.CHECKBOX.IMPRESSIONS"),value:t.checkCharCamp.impressions,onValueChanged:function(e){r.updateCharts("Impressions","impressions",e.value)}},r.CPA={text:o("MAIN.CHECKBOX.CPA"),value:t.checkCharCamp.cpa,onValueChanged:function(e){r.updateCharts("CPA","cpa",e.value)}},r.CPC={text:o("MAIN.CHECKBOX.CPC"),value:t.checkCharCamp.cpc,onValueChanged:function(e){r.updateCharts("CPC","cpc",e.value)}},r.clicks={text:o("MAIN.CHECKBOX.CLICKS"),value:t.checkCharCamp.clicks,onValueChanged:function(e){r.updateCharts("Clicks","clicks",e.value)}},r.media={text:o("MAIN.CHECKBOX.MEDIA_SPENT"),value:t.checkCharCamp.mediaspent,onValueChanged:function(e){r.updateCharts("mediaspent","mediaspent",e.value)}},r.conversions={text:o("MAIN.CHECKBOX.CONVERSIONS"),value:t.checkCharCamp.conversions,onValueChanged:function(e){r.updateCharts("Conversions","conversions",e.value)}},r.CTR={text:o("MAIN.CHECKBOX.CTR"),value:t.checkCharCamp.ctr,onValueChanged:function(e){r.updateCharts("CTR","ctr",e.value)}},null==t.dataStart&&null==t.dataEnd?(t.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),t.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):(r.dataStart=t.dataStart,r.dataEnd=t.dataEnd),null==t.SelectedTime&&(t.SelectedTime=0);var l=[{ID:0,Name:o("MAIN.DATE_PICKER.YESTERDAY"),dataStart:e.moment({hour:"00"}).subtract(1,"day").unix(),dataEnd:e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()},{ID:1,Name:o("MAIN.DATE_PICKER.LAST_3_DAYS"),dataStart:e.moment({hour:"00"}).subtract(3,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:2,Name:o("MAIN.DATE_PICKER.LAST_7_DAYS"),dataStart:e.moment({hour:"00"}).subtract(7,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:3,Name:o("MAIN.DATE_PICKER.LAST_14_DAYS"),dataStart:e.moment({hour:"00"}).subtract(14,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:4,Name:o("MAIN.DATE_PICKER.LAST_21_DAYS"),dataStart:e.moment({hour:"00"}).subtract(21,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:5,Name:o("MAIN.DATE_PICKER.CURRENT_MONTH"),dataStart:e.moment().startOf("month").unix(),dataEnd:e.moment().unix()},{ID:6,Name:o("MAIN.DATE_PICKER.LAST_MONTH"),dataStart:e.moment().subtract(1,"month").startOf("month").unix(),dataEnd:e.moment().subtract(1,"month").endOf("month").unix()},{ID:7,Name:o("MAIN.DATE_PICKER.LAST_90_DAYS"),dataStart:e.moment({hour:"00"}).subtract(90,"day").unix(),dataEnd:e.moment().unix()},{ID:8,Name:o("MAIN.DATE_PICKER.ALL_TIME"),dataStart:0,dataEnd:e.moment().unix()}];r.datePiker={items:l,displayExpr:"Name",valueExpr:"ID",value:l[t.SelectedTime].ID,onValueChanged:function(e){t.SelectedTime=e.value,t.dataStart=l[e.value].dataStart,t.dataEnd=l[e.value].dataEnd,a.reload()}},r.chartOptionsSecond={bindingOptions:{dataSource:"campmain.boxPlotStore"},valueAxis:{valueType:"numeric"},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!0},label:{visible:!1},argumentType:"datetime"},tooltip:{enabled:!0},legend:{visible:!1},loadingIndicator:{show:!0,text:"Creating a chart..."},useAggregation:!0,commonSeriesSettings:{candlestick:{openValueField:"open",closeValueField:"close",highValueField:"high",lowValueField:"low"},argumentField:"date",point:{size:2,hoverStyle:{border:{visible:!0,width:1},size:4}}},series:[{type:"candlestick"},{valueField:"avg",color:"silver"}]},r.rangeOptionsSecond={size:{height:100},margin:{left:10},scale:{minorTickCount:"day",valueType:"date",tickInterval:"day"},bindingOptions:{dataSource:"campmain.boxPlotStore"},chart:{series:{type:"line",valueField:"avg",argumentField:"date",placeholderHeight:20},useAggregation:!0,valueAxis:{valueType:"numeric"}},behavior:{callSelectedRangeChanged:"onMoving",snapToTicks:!1},onSelectedRangeChanged:function(a){var t=e.$("#zoomedContainerSecond #zoomedChartSecond").dxChart("instance");t.zoomArgument(new Date(a.startValue),new Date(a.endValue))}},r.selectedItems=[],r.chartOptionsFuncgrid=[],null==t.boxPlotData&&(t.boxPlotData=r.boxPlotData),r.state="",r.selectCell={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:r.state,onSelectionChanged:function(){var a=e.$("#gridContainer2")[0].querySelectorAll('[aria-selected="true"]');if(a[0])for(var t=[],i=0;i<a.length;i++)t.push(a[i].firstChild.innerText)}},r.dataGridOptionsCampaign={onInitialized:function(e){r.dataGridOptionsMultipleFunc=e.component,r.dataGridOptionsMultipleFunc._controllers.columns._commandColumns[1].visibleIndex=9},onRowPrepared:function(e){if(r.objectData=e,"data"==r.objectData.rowType){var a=e.rowElement[0].childNodes[9],t=e.data.state;"true"==t.whiteList&&a.classList.add("active-white"),"true"==t.blackList&&a.classList.add("active-black"),"true"==t.suspended&&a.classList.add("active-suspended")}},showBorders:!0,alignment:"left",headerFilter:{visible:!0},bindingOptions:{dataSource:"campmain.gridStore",allowColumnResizing:"true"},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:o("MAIN.CAMPAIGN.COLUMNS.PLACEMENT"),dataField:"placement"},{caption:o("MAIN.CAMPAIGN.COLUMNS.NETWORK"),dataField:"NetworkPublisher"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:o("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"
},{caption:o("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{caption:"State",width:300,columnIndex:16,headerCellTemplate:"headerCellTemplate",cellTemplate:function(a,t){e.$("<div />").dxButton({text:"white list",height:30,width:89,disabled:!0,onClick:function(e){var a=e.element[0].parentNode;a.classList.contains("active-white")?(a.classList.remove("active-white"),a.classList.add("unactive-white"),t.data.state.whiteList="false"):a.classList.contains("active-white")||(a.classList.remove("unactive-white"),a.classList.add("active-white"),t.data.state.whiteList="true",t.data.state.suspended="false",t.data.state.blackList="false",a.classList.remove("active-black"),a.classList.remove("active-suspended"))}}).addClass("white-list").appendTo(a),e.$("<div />").dxButton({text:"black list",height:30,width:89,disabled:!0,onClick:function(e){var a=e.element[0].parentNode;a.classList.contains("active-black")?(a.classList.remove("active-black"),a.classList.add("unactive-black"),t.data.state.blackList="false"):a.classList.contains("active-black")||(a.classList.remove("unactive-black"),a.classList.add("active-black"),t.data.state.blackList="true",t.data.state.suspended="false",t.data.state.whiteList="false",a.classList.remove("active-white"),a.classList.remove("active-suspended"))}}).addClass("black-list").appendTo(a),e.$("<div />").dxButton({text:"suspended",height:30,width:95,disabled:!0,onClick:function(e){var a=e.element[0].parentNode;a.classList.contains("active-suspended")?(a.classList.remove("active-suspended"),a.classList.add("unactive-suspended"),t.data.state.suspended="false"):a.classList.contains("active-suspended")||(a.classList.remove("unactive-suspended"),a.classList.add("active-suspended"),t.data.state.suspended="true",t.data.state.whiteList="false",t.data.state.blackList="false",a.classList.remove("active-white"),a.classList.remove("active-black"))}}).addClass("suspended").appendTo(a)}}],selection:{mode:"multiple",showCheckBoxesMode:"always"},onSelectionChanged:function(e){r.selectedItems=e.selectedRowsData,r.disabled=!r.selectedItems.length}},r.rangeFirstChartOptions={margin:{left:50},size:{height:150,width:450},scale:{startValue:new Date(t.dataStart),endValue:new Date(t.dataEnd),minorTickInterval:"day",minRange:"hour",maxRange:"month",minorTick:{visible:!1}},sliderMarker:{format:"monthAndDay"}},r.rangeSecondChartOptions={margin:{left:50,top:12},size:{height:150,width:450},scale:{startValue:new Date(t.dataStart),endValue:new Date(t.dataEnd),minorTickInterval:"day",minRange:"day",maxRange:"month",minorTick:{visible:!1}},sliderMarker:{format:"monthAndDay"}},r.ctrlBbtns={placement:{btn:"Placement",header:"Placement"},creativeId:{btn:"creative_id",header:"creative_id"},creativeSize:{btn:"creative_size",header:"creative_size"},viewability:{btn:"viewability",header:"viewability"},os:{btn:"OS",header:"Operating System used"},carrier:{btn:"carrier",header:"carrier"},networkSeller:{btn:"network(seller)",header:"network (seller)"},connectionType:{btn:"connection_type",header:"connection_type"},device:{btn:"device",header:"device"},seller:{btn:"seller",header:"Seller"}},r.pieChartHeader=t.pieChartHeader||r.ctrlBbtns.os.header}e.$inject=["$window","$state","$localStorage","$translate","CampMain","Campaign"],angular.module("pjtLayout").controller("CampaignMainController",e)}(),function(){"use strict";function e(e){function a(a,t,i,n,s,r,o){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)+"/domains",params:{id:a,from_date:t,to_date:i,skip:n,take:s,order:r,filter:o}}).then(function(e){return e.data})["catch"](function(){return[{placement:"CNN.com",NetworkPublisher:"Google Adx",conv:"8",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"true",blackList:"false",suspended:"false"}},{placement:"Hidden",NetworkPublisher:"PubMatic",conv:"3",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"false",blackList:"true",suspended:"false"}},{placement:"BBC.com",NetworkPublisher:"OpenX",conv:"1",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"false",blackList:"false",suspended:"true"}},{placement:"msn.com",NetworkPublisher:"Rubicon",conv:"8",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"true",blackList:"false",suspended:"false"}}]})}var t=this;t.campaignDomains=a}e.$inject=["$http"],angular.module("pjtLayout").service("CampaignOptimiser",e)}(),function(){"use strict";function e(e,a,t,i,n,s){var r=this;r.CampaignOptimiser=s,r.campName=n.campaign,r.campId=n.id;var o=i.instant;r.navCamp={text:o("CO.CAMPAIGN-HOME"),onClick:function(){a.go("home.campaign.details",{id:r.campId})}},r.navView={text:o("CO.OPTIMIZER-VIEW"),onClick:function(){a.go("home.campaignoptimiser",{id:r.campId})}},r.navList={text:o("CO.SUSPEND-LIST"),onClick:function(){a.go("CO.campaignoptimiser",{id:r.campId})}},null==t.dataStart&&null==t.dataEnd?(t.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),t.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):(r.dataStart=t.dataStart,r.dataEnd=t.dataEnd),null==t.SelectedTime&&(t.SelectedTime=0);var l=[{ID:0,Name:o("MAIN.DATE_PICKER.YESTERDAY"),dataStart:e.moment({hour:"00"}).subtract(1,"day").unix(),dataEnd:e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()},{ID:1,Name:o("MAIN.DATE_PICKER.LAST_3_DAYS"),dataStart:e.moment({hour:"00"}).subtract(3,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:2,Name:o("MAIN.DATE_PICKER.LAST_7_DAYS"),dataStart:e.moment({hour:"00"}).subtract(7,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:3,Name:o("MAIN.DATE_PICKER.LAST_14_DAYS"),dataStart:e.moment({hour:"00"}).subtract(14,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:4,Name:o("MAIN.DATE_PICKER.LAST_21_DAYS"),dataStart:e.moment({hour:"00"}).subtract(21,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:5,Name:o("MAIN.DATE_PICKER.CURRENT_MONTH"),dataStart:e.moment().startOf("month").unix(),dataEnd:e.moment().unix()},{ID:6,Name:o("MAIN.DATE_PICKER.LAST_MONTH"),dataStart:e.moment().subtract(1,"month").startOf("month").unix(),dataEnd:e.moment().subtract(1,"month").endOf("month").unix()},{ID:7,Name:o("MAIN.DATE_PICKER.LAST_90_DAYS"),dataStart:e.moment({hour:"00"}).subtract(90,"day").unix(),dataEnd:e.moment().unix()},{ID:8,Name:o("MAIN.DATE_PICKER.ALL_TIME"),dataStart:0,dataEnd:e.moment().unix()}];r.datePiker={items:l,displayExpr:"Name",valueExpr:"ID",value:l[t.SelectedTime].ID,onValueChanged:function(e){t.SelectedTime=e.value,t.dataStart=l[e.value].dataStart,t.dataEnd=l[e.value].dataEnd,a.reload()}},r.state="",r.selectCell={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:r.state,onSelectionChanged:function(){var e=angular.element("#gridContainer2")[0].querySelectorAll('[aria-selected="true"]');if(e[0])for(var a=[],t=0;t<e.length;t++)a.push(e[t].firstChild.innerText)}},r.gridStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(e){return r.CampaignOptimiser.campaignDomains(r.campId,r.dataEnd,r.dataStart,e.skip,e.take,e.sort,e.order,e.filter).then(function(e){return e})}}),r.selectedItems=[],r.chartOptionsFuncgrid=[],null==t.boxPlotData&&(t.boxPlotData=r.boxPlotData),r.state="",r.selectCell={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:r.state,onSelectionChanged:function(){var a=e.$("#gridContainer2")[0].querySelectorAll('[aria-selected="true"]');if(a[0])for(var t=[],i=0;i<a.length;i++)t.push(a[i].firstChild.innerText)}},r.dataGridOptionsCampaign={onInitialized:function(e){r.dataGridOptionsMultipleFunc=e.component,r.dataGridOptionsMultipleFunc._controllers.columns._commandColumns[1].visibleIndex=9},onRowPrepared:function(e){if(r.objectData=e,"data"==r.objectData.rowType){var a=e.rowElement[0].childNodes[9],t=e.data.state;"true"==t.whiteList&&a.classList.add("active-white"),"true"==t.blackList&&a.classList.add("active-black"),"true"==t.suspended&&a.classList.add("active-suspended")}},showBorders:!0,alignment:"left",headerFilter:{visible:!0},editing:{allowUpdating:!0,mode:"batch"},bindingOptions:{dataSource:"CO.gridStore",allowColumnResizing:"true"},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:o("MAIN.CAMPAIGN.COLUMNS.PLACEMENT"),dataField:"placement",allowEditing:!1},{caption:o("MAIN.CAMPAIGN.COLUMNS.NETWORK"),dataField:"NetworkPublisher",allowEditing:!1},{caption:o("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv",allowEditing:!1},{caption:o("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp",allowEditing:!1},{caption:o("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks",allowEditing:!1},{caption:o("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc",allowEditing:!1},{caption:o("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm",allowEditing:!1},{caption:o("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr",allowEditing:!0},{caption:o("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr",allowEditing:!0},{caption:"State",width:300,columnIndex:16,headerCellTemplate:"headerCellTemplate",cellTemplate:function(a,t){e.$("<div />").dxButton({text:"white list",height:30,width:89,disabled:!0,onClick:function(e){var a=e.element[0].parentNode;a.classList.contains("active-white")?(a.classList.remove("active-white"),a.classList.add("unactive-white"),t.data.state.whiteList="false"):a.classList.contains("active-white")||(a.classList.remove("unactive-white"),a.classList.add("active-white"),t.data.state.whiteList="true",t.data.state.suspended="false",t.data.state.blackList="false",a.classList.remove("active-black"),a.classList.remove("active-suspended"))}}).addClass("white-list").appendTo(a),e.$("<div />").dxButton({text:"black list",height:30,width:89,disabled:!0,onClick:function(e){var a=e.element[0].parentNode;a.classList.contains("active-black")?(a.classList.remove("active-black"),a.classList.add("unactive-black"),t.data.state.blackList="false"):a.classList.contains("active-black")||(a.classList.remove("unactive-black"),a.classList.add("active-black"),t.data.state.blackList="true",t.data.state.suspended="false",t.data.state.whiteList="false",a.classList.remove("active-white"),a.classList.remove("active-suspended"))}}).addClass("black-list").appendTo(a),e.$("<div />").dxButton({text:"suspended",height:30,width:95,disabled:!0,onClick:function(e){var a=e.element[0].parentNode;a.classList.contains("active-suspended")?(a.classList.remove("active-suspended"),a.classList.add("unactive-suspended"),t.data.state.suspended="false"):a.classList.contains("active-suspended")||(a.classList.remove("unactive-suspended"),a.classList.add("active-suspended"),t.data.state.suspended="true",t.data.state.whiteList="false",t.data.state.blackList="false",a.classList.remove("active-white"),a.classList.remove("active-black"))}}).addClass("suspended").appendTo(a)}}],selection:{mode:"multiple",showCheckBoxesMode:"always"},onSelectionChanged:function(e){r.selectedItems=e.selectedRowsData,r.disabled=!r.selectedItems.length}},r.state3="",r.selectCell3={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:r.state,onSelectionChanged:function(){var a=e.$("#gridContainer3")[0].querySelectorAll('[aria-selected="true"]');if(a[0])for(var t=[],i=0;i<a.length;i++)t.push(a[i].firstChild.innerText)}},r.gridStore3=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(e){return r.CampaignOptimiser.campaignDomains(r.campId,r.dataEnd,r.dataStart,e.skip,e.take,e.sort,e.order,e.filter).then(function(e){return e})}}),r.selectedItems=[],r.chartOptionsFuncgrid=[],null==t.boxPlotData&&(t.boxPlotData=r.boxPlotData),r.state="",r.selectCell={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:r.state,onSelectionChanged:function(){var a=e.$("#gridContainer3")[0].querySelectorAll('[aria-selected="true"]');if(a[0])for(var t=[],i=0;i<a.length;i++)t.push(a[i].firstChild.innerText)}},r.dataGridOptionsCampaign3={onInitialized:function(e){r.dataGridOptionsMultipleFunc3=e.component,r.dataGridOptionsMultipleFunc3._controllers.columns._commandColumns[1].visibleIndex=9},onRowPrepared:function(e){if(r.objectData=e,"data"==r.objectData.rowType){var a=e.rowElement[0].childNodes[9],t=e.data.state;"true"==t.whiteList&&a.classList.add("active-white"),"true"==t.blackList&&a.classList.add("active-black"),"true"==t.suspended&&a.classList.add("active-suspended")}},showBorders:!0,alignment:"left",headerFilter:{visible:!0},bindingOptions:{dataSource:"CO.gridStore3",allowColumnResizing:"true"},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:o("MAIN.CAMPAIGN.COLUMNS.PLACEMENT"),dataField:"placement"},{caption:o("MAIN.CAMPAIGN.COLUMNS.NETWORK"),dataField:"NetworkPublisher"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:o("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{caption:"State",width:207,columnIndex:16,headerCellTemplate:"headerCellTemplate",cellTemplate:function(a,t){e.$("<div />").dxButton({text:"white list",height:30,width:89,disabled:!0,onClick:function(e){var a=e.element[0].parentNode;a.classList.contains("active-white")?(a.classList.remove("active-white"),a.classList.add("unactive-white"),t.data.state.whiteList="false"):a.classList.contains("active-white")||(a.classList.remove("unactive-white"),a.classList.add("active-white"),t.data.state.whiteList="true",t.data.state.suspended="false",t.data.state.blackList="false",a.classList.remove("active-black"),a.classList.remove("active-suspended"))}}).addClass("white-list").appendTo(a),e.$("<div />").dxButton({text:"suspended",height:30,width:95,disabled:!0,onClick:function(e){var a=e.element[0].parentNode;a.classList.contains("active-suspended")?(a.classList.remove("active-suspended"),a.classList.add("unactive-suspended"),t.data.state.suspended="false"):a.classList.contains("active-suspended")||(a.classList.remove("unactive-suspended"),a.classList.add("active-suspended"),t.data.state.suspended="true",t.data.state.whiteList="false",t.data.state.blackList="false",a.classList.remove("active-white"),a.classList.remove("active-black"))}}).addClass("suspended").appendTo(a)}}],selection:{mode:"multiple",showCheckBoxesMode:"always"},onSelectionChanged:function(e){r.selectedItems=e.selectedRowsData,r.disabled=!r.selectedItems.length}},r.state4="",r.selectCell4={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:r.state,onSelectionChanged:function(){var a=e.$("#gridContainer4")[0].querySelectorAll('[aria-selected="true"]');if(a[0])for(var t=[],i=0;i<a.length;i++)t.push(a[i].firstChild.innerText)}},r.gridStore4=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(e){return r.CampaignOptimiser.campaignDomains(r.campId,r.dataEnd,r.dataStart,e.skip,e.take,e.sort,e.order,e.filter).then(function(e){return e})}}),r.selectedItems=[],r.chartOptionsFuncgrid=[],null==t.boxPlotData&&(t.boxPlotData=r.boxPlotData),r.state="",r.selectCell={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:r.state,onSelectionChanged:function(){var a=e.$("#gridContainer4")[0].querySelectorAll('[aria-selected="true"]');if(a[0])for(var t=[],i=0;i<a.length;i++)t.push(a[i].firstChild.innerText)}},r.dataGridOptionsCampaign4={onInitialized:function(e){r.dataGridOptionsMultipleFunc4=e.component,r.dataGridOptionsMultipleFunc4._controllers.columns._commandColumns[1].visibleIndex=9},onRowPrepared:function(e){if(r.objectData=e,"data"==r.objectData.rowType){var a=e.rowElement[0].childNodes[9],t=e.data.state;"true"==t.whiteList&&a.classList.add("active-white"),"true"==t.blackList&&a.classList.add("active-black"),"true"==t.suspended&&a.classList.add("active-suspended")}},showBorders:!0,alignment:"left",headerFilter:{visible:!0},bindingOptions:{dataSource:"CO.gridStore3",allowColumnResizing:"true"},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:o("MAIN.CAMPAIGN.COLUMNS.PLACEMENT"),dataField:"placement"},{caption:o("MAIN.CAMPAIGN.COLUMNS.NETWORK"),dataField:"NetworkPublisher"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:o("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{caption:"State",width:207,columnIndex:16,headerCellTemplate:"headerCellTemplate",cellTemplate:function(a,t){e.$("<div />").dxButton({text:"black list",height:30,width:89,disabled:!0,onClick:function(e){var a=e.element[0].parentNode;a.classList.contains("active-black")?(a.classList.remove("active-black"),a.classList.add("unactive-black"),t.data.state.blackList="false"):a.classList.contains("active-black")||(a.classList.remove("unactive-black"),a.classList.add("active-black"),t.data.state.blackList="true",t.data.state.suspended="false",t.data.state.whiteList="false",a.classList.remove("active-white"),a.classList.remove("active-suspended"))}}).addClass("black-list").appendTo(a),e.$("<div />").dxButton({text:"suspended",height:30,width:95,disabled:!0,onClick:function(e){var a=e.element[0].parentNode;a.classList.contains("active-suspended")?(a.classList.remove("active-suspended"),a.classList.add("unactive-suspended"),t.data.state.suspended="false"):a.classList.contains("active-suspended")||(a.classList.remove("unactive-suspended"),a.classList.add("active-suspended"),t.data.state.suspended="true",t.data.state.whiteList="false",t.data.state.blackList="false",a.classList.remove("active-white"),a.classList.remove("active-black"))}}).addClass("suspended").appendTo(a)}}],selection:{mode:"multiple",showCheckBoxesMode:"always"},onSelectionChanged:function(e){r.selectedItems=e.selectedRowsData,r.disabled=!r.selectedItems.length}}}e.$inject=["$window","$state","$localStorage","$translate","Campaign","CampaignOptimiser"],angular.module("pjtLayout").controller("CampaignOptimiserController",e)}(),function(){"use strict";function e(e){function a(a){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)}).then(function(e){return e.data})}function t(a,t,i,n){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)+"/details",params:{from_date:t,to_date:i,section:n}}).then(function(e){return e.data})}function i(a,t,i,n){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)+"/graphinfo",params:{from_date:t,to_date:i,by:n}}).then(function(e){return e.data})}function n(a,t,i,n,s,r,o){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)+"/domains",params:{id:a,from_date:t,to_date:i,skip:n,take:s,order:r,filter:o}}).then(function(e){return e.data})}function s(a,t,i){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)+"/cpabuckets",params:{id:a,from_date:t,to_date:i}}).then(function(){return[{cpa:1.2,sellerid:123,sellername:"Rovio",placementid:234,placementname:"AngryBirds"},{cpa:.4,sellerid:678,sellername:"Paris",placementid:9789,placementname:"Cat"},{cpa:10.1,sellerid:3453,sellername:"France",placementid:2325,placementname:"Tom"},{cpa:4.1,sellerid:545,sellername:"Lipton",placementid:111,placementname:"Mouse"},{cpa:.8,sellerid:35,sellername:"River",placementid:45,placementname:"Tributary"},{cpa:9.3,sellerid:90,sellername:"Wood",placementid:3545,placementname:"Land"},{cpa:2.4,sellerid:222,sellername:"Pen",placementid:333,placementname:"Gear"},{cpa:5.4,sellerid:54,sellername:"World",placementid:3444454,placementname:"Flower"},{cpa:6.1,sellerid:888,sellername:"Bird",placementid:999,placementname:"Kitten"},{cpa:13.1,sellerid:444,sellername:"Dreams",placementid:56656,placementname:"Sweet"},{cpa:.1,sellerid:787,sellername:"Hotel",placementid:76876,placementname:"California"},{cpa:1.9,sellerid:678678,sellername:"Star",placementid:12312,placementname:"Sky"}]})}var r=this;r.nameCampaigns=a,r.statsChart=i,r.bucketsCpa=s,r.campaignDetails=t,r.campaignDomains=n}e.$inject=["$http"],angular.module("pjtLayout").service("CampDetails",e)}(),function(){"use strict";function e(e,a,t,i,n,s){var r=this;r.Camp=n,r.multipleTotalCount=0,r.checkChart=[],r.by="imp,cvr,cpc,clicks,spend,conv,ctr";var o=i.instant;r.campName=s.campaign,r.campId=s.id,r.totals=[],r.chartStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return r.Camp.statsChart(r.campId,r.dataStart,r.dataEnd,r.by).then(function(e){return e})}}),r.gridStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(e){return r.Camp.campaignDomains(r.campId,r.dataEnd,r.dataStart,e.skip,e.take,e.sort,e.order,e.filter).then(function(e){return t.gridStore=e,e})}}),r.detailsStoreAll=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return r.Camp.campaignDetails(r.campId,r.dataStart,r.dataEnd,t.selectedSection).then(function(e){return e.all})}}),r.detailsStoreConversion=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return r.Camp.campaignDetails(r.campId,r.dataStart,r.dataEnd,r.by).then(function(e){return e.conversions})}}),r.cpaBucketRequestFirst=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return r.Camp.bucketsCpa(r.campId,r.dataStart,r.dataEnd).then(function(e){for(var a=[],t=0;t<e.length;t++)+e[t].cpa>=r.backetsRanges.first.min&&+e[t].cpa<r.backetsRanges.first.max&&a.push(e[t]);return a})}}),r.cpaBucketRequestSecond=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return r.Camp.bucketsCpa(r.campId,r.dataStart,r.dataEnd).then(function(e){for(var a=[],t=0;t<e.length;t++)+e[t].cpa>=r.backetsRanges.second.min&&+e[t].cpa<r.backetsRanges.second.max&&a.push(e[t]);return a})}}),r.cpaBucketRequestThird=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return r.Camp.bucketsCpa(r.campId,r.dataStart,r.dataEnd).then(function(e){for(var a=[],t=0;t<e.length;t++)+e[t].cpa>=r.backetsRanges.third.min&&+e[t].cpa<r.backetsRanges.third.max&&a.push(e[t]);return a})}}),r.cpaBucketRequestFourth=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return r.Camp.bucketsCpa(r.campId,r.dataStart,r.dataEnd).then(function(e){for(var a=[],t=0;t<e.length;t++)+e[t].cpa>=r.backetsRanges.fourth.min&&+e[t].cpa<r.backetsRanges.fourth.max&&a.push(e[t]);return a})}}),null==t.dataStart&&null==t.dataEnd?(t.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),t.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):(r.dataStart=t.dataStart,r.dataEnd=t.dataEnd),null==t.SelectedTime&&(t.SelectedTime=0);var l=[{ID:0,Name:o("MAIN.DATE_PICKER.YESTERDAY"),dataStart:e.moment({hour:"00"}).subtract(1,"day").unix(),dataEnd:e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()},{ID:1,Name:o("MAIN.DATE_PICKER.LAST_3_DAYS"),dataStart:e.moment({hour:"00"}).subtract(3,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:2,Name:o("MAIN.DATE_PICKER.LAST_7_DAYS"),dataStart:e.moment({hour:"00"}).subtract(7,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:3,Name:o("MAIN.DATE_PICKER.LAST_14_DAYS"),dataStart:e.moment({hour:"00"}).subtract(14,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:4,Name:o("MAIN.DATE_PICKER.LAST_21_DAYS"),dataStart:e.moment({hour:"00"}).subtract(21,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:5,Name:o("MAIN.DATE_PICKER.CURRENT_MONTH"),dataStart:e.moment().startOf("month").unix(),dataEnd:e.moment().unix()},{ID:6,Name:o("MAIN.DATE_PICKER.LAST_MONTH"),dataStart:e.moment().subtract(1,"month").startOf("month").unix(),dataEnd:e.moment().subtract(1,"month").endOf("month").unix()},{ID:7,Name:o("MAIN.DATE_PICKER.LAST_90_DAYS"),dataStart:e.moment({hour:"00"}).subtract(90,"day").unix(),dataEnd:e.moment().unix()},{ID:8,Name:o("MAIN.DATE_PICKER.ALL_TIME"),dataStart:0,dataEnd:e.moment().unix()}];r.datePiker={items:l,displayExpr:"Name",valueExpr:"ID",value:l[t.SelectedTime].ID,onValueChanged:function(e){t.SelectedTime=e.value,t.dataStart=l[e.value].dataStart,t.dataEnd=l[e.value].dataEnd,a.reload()}},r.chartOptionsSecond={bindingOptions:{dataSource:"campdetails.boxPlotStore"},commonSeriesSettings:{type:"candleStick"},valueAxis:{valueType:"numeric"},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!0},label:{visible:!1},argumentType:"datetime"},tooltip:{enabled:!0},legend:{visible:!1},loadingIndicator:{show:!0,text:"Creating a chart..."},useAggregation:!0,series:[{openValueField:"Open",highValueField:"High",lowValueField:"Low",closeValueField:"Close",argumentField:"Date"}]},r.rangeOptionsSecond={size:{height:100},margin:{left:10},scale:{minorTickCount:"day",valueType:"date",tickInterval:"day"},bindingOptions:{dataSource:"campdetails.boxPlotStore"},chart:{series:{type:"line",valueField:"Open",argumentField:"Date",placeholderHeight:20},useAggregation:!0,valueAxis:{valueType:"numeric"}},behavior:{callSelectedRangeChanged:"onMoving",snapToTicks:!1},onSelectedRangeChanged:function(a){var t=e.$("#zoomedContainerSecond #zoomedChartSecond").dxChart("instance");t.zoomArgument(new Date(a.startValue),new Date(a.endValue))}},r.selectedItems=[],r.chartOptionsFuncgrid=[],null==t.boxPlotData&&(t.boxPlotData=r.boxPlotData),r.state="",r.selectCell={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],disabled:!0,placeholder:"Select a state",displayExpr:"name",valueExpr:r.state,onSelectionChanged:function(){var a=e.$("#gridContainer2")[0].querySelectorAll('[aria-selected="true"]');if(a[0])for(var t=[],i=0;i<a.length;i++)t.push(a[i].firstChild.innerText)}},r.dataGridOptionsCampaign={onInitialized:function(e){r.dataGridOptionsMultipleFunc=e.component,r.dataGridOptionsMultipleFunc._controllers.columns._commandColumns[1].visibleIndex=9},onRowPrepared:function(e){if(r.objectData=e,"data"==r.objectData.rowType){var a=e.rowElement[0].childNodes[9],t=e.data.state;"true"==t.whiteList&&a.classList.add("active-white"),"true"==t.blackList&&a.classList.add("active-black"),"true"==t.suspended&&a.classList.add("active-suspended")}},showBorders:!0,alignment:"left",headerFilter:{visible:!0},bindingOptions:{dataSource:"campdetails.gridStore",allowColumnResizing:"true"},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:o("MAIN.CAMPAIGN.COLUMNS.PLACEMENT"),dataField:"placement"},{caption:o("MAIN.CAMPAIGN.COLUMNS.NETWORK"),dataField:"NetworkPublisher"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:o("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:o("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{caption:"State",width:300,columnIndex:16,headerCellTemplate:"headerCellTemplate",cellTemplate:function(a,t){e.$("<div />").dxButton({text:"white list",height:30,width:89,disabled:!0,onClick:function(e){var a=e.element[0].parentNode;a.classList.contains("active-white")?(a.classList.remove("active-white"),a.classList.add("unactive-white"),t.data.state.whiteList="false"):a.classList.contains("active-white")||(a.classList.remove("unactive-white"),a.classList.add("active-white"),t.data.state.whiteList="true",t.data.state.suspended="false",t.data.state.blackList="false",a.classList.remove("active-black"),a.classList.remove("active-suspended"))}}).addClass("white-list").appendTo(a),e.$("<div />").dxButton({text:"black list",height:30,width:89,disabled:!0,onClick:function(e){var a=e.element[0].parentNode;a.classList.contains("active-black")?(a.classList.remove("active-black"),a.classList.add("unactive-black"),t.data.state.blackList="false"):a.classList.contains("active-black")||(a.classList.remove("unactive-black"),a.classList.add("active-black"),t.data.state.blackList="true",t.data.state.suspended="false",t.data.state.whiteList="false",a.classList.remove("active-white"),a.classList.remove("active-suspended"))}}).addClass("black-list").appendTo(a),e.$("<div />").dxButton({text:"suspended",height:30,width:95,disabled:!0,onClick:function(e){var a=e.element[0].parentNode;a.classList.contains("active-suspended")?(a.classList.remove("active-suspended"),a.classList.add("unactive-suspended"),t.data.state.suspended="false"):a.classList.contains("active-suspended")||(a.classList.remove("unactive-suspended"),a.classList.add("active-suspended"),t.data.state.suspended="true",t.data.state.whiteList="false",t.data.state.blackList="false",a.classList.remove("active-white"),a.classList.remove("active-black"))}}).addClass("suspended").appendTo(a)}}],selection:{mode:"multiple",showCheckBoxesMode:"always"},onSelectionChanged:function(e){r.selectedItems=e.selectedRowsData,r.disabled=!r.selectedItems.length}},r.rangeFirstChartOptions={margin:{left:50},size:{height:150,width:450},scale:{startValue:new Date(t.dataStart),endValue:new Date(t.dataEnd),minorTickInterval:"day",minRange:"hour",maxRange:"month",minorTick:{visible:!1}},sliderMarker:{format:"monthAndDay"}},r.rangeSecondChartOptions={margin:{left:50,top:12},size:{height:150,width:450},scale:{startValue:new Date(t.dataStart),endValue:new Date(t.dataEnd),minorTickInterval:"day",minRange:"day",maxRange:"month",minorTick:{visible:!1}},sliderMarker:{format:"monthAndDay"}},r.ctrlBbtns={placement:{btn:"Placement",header:"Placement"},creativeId:{btn:"creative_id",header:"creative_id"},creativeSize:{btn:"creative_size",header:"creative_size"},viewability:{btn:"viewability",header:"viewability"},os:{btn:"OS",header:"Operating System used"},carrier:{btn:"carrier",header:"carrier"},networkSeller:{btn:"network(seller)",header:"network (seller)"},connectionType:{btn:"connection_type",header:"connection_type"},device:{btn:"device",header:"device"}},r.pieChartHeader=t.pieChartHeader||r.ctrlBbtns.placement.header,r.btnsNodesArray=e.$(".label-container")[0].children;for(var d in r.ctrlBbtns)r.ctrlBbtns[d].header==r.pieChartHeader&&(r.selectedSection=r.ctrlBbtns[d].btn,t.selectedSection=r.selectedSection);Array.prototype.forEach.call(r.btnsNodesArray,function(e){e.name==r.selectedSection&&e.classList.add("nav-btn-active")}),r.selectInfoBtn=function(e,i){r.pieChartHeader=i,t.pieChartHeader=r.pieChartHeader,Array.prototype.forEach.call(r.btnsNodesArray,function(e){e.classList.contains("nav-btn-active")&&e.classList.remove("nav-btn-active")}),t.pieChartHeader=r.pieChartHeader,e.currentTarget.classList.add("nav-btn-active"),a.reload()},r.targetCpa||(r.targetCpa=t.targetCpa||3,t.targetCpa=r.targetCpa),r.backetsRanges={first:{
min:0,max:Number(r.targetCpa).toFixed(1)},second:{min:Number(r.targetCpa).toFixed(1),max:Number(2*r.targetCpa).toFixed(1)},third:{min:Number(2*r.targetCpa).toFixed(1),max:Number(3*r.targetCpa).toFixed(1)},fourth:{min:Number(3*r.targetCpa).toFixed(1),max:Number(1e3*r.targetCpa).toFixed(1)}},r.targetCpaChange=function(a){var i=Number(a.currentTarget.value);return t.targetCpa=i,r.backetsRanges={first:{min:0,max:i.toFixed(1)},second:{min:i.toFixed(1),max:(2*i).toFixed(1)},third:{min:(2*i).toFixed(1),max:(3*i).toFixed(1)},fourth:{min:(3*i).toFixed(1),max:(1e3*i).toFixed(1)}},e.$("#backets-1").dxDataGrid("instance").refresh(),e.$("#backets-2").dxDataGrid("instance").refresh(),e.$("#backets-3").dxDataGrid("instance").refresh(),e.$("#backets-4").dxDataGrid("instance").refresh(),r.backetsRanges},r.pieChartAll={title:{text:"All",font:{size:20},margin:{bottom:1}},bindingOptions:{dataSource:"campdetails.detailsStoreAll"},series:[{argumentField:"section",valueField:"data",label:{visible:!0,connector:{visible:!0,width:.5},format:"fixedPoint",customizeText:function(e){return e.argumentText+": "+e.valueText+"%"}},smallValuesGrouping:{mode:"smallValueThreshold",threshold:4.5}}],legend:{horizontalAlignment:"center",verticalAlignment:"bottom"},size:{width:370,height:300}},r.pieChartConversions={title:{text:"Conversions",font:{size:20},margin:{bottom:1}},bindingOptions:{dataSource:"campdetails.detailsStoreConversion"},series:[{argumentField:"section",valueField:"data",label:{visible:!0,connector:{visible:!0,width:.5},format:"fixedPoint",customizeText:function(e){return e.argumentText+": "+e.valueText+"%"}},smallValuesGrouping:{mode:"smallValueThreshold",threshold:4.5}}],legend:{horizontalAlignment:"center",verticalAlignment:"bottom"},size:{width:370,height:300}},r.columnsPlacement=[{caption:"sellerid",dataField:"sellerid"},{caption:"sellername",dataField:"sellername"},{caption:"placementid",dataField:"placementid"},{caption:"placementname",dataField:"placementname"}],r.columnsCreativeId=[{caption:"sellername",dataField:"sellername"}],r.columnsCreativeSize=[{caption:"sellername",dataField:"sellername"}],r.columnsViewability=[{caption:"sellername",dataField:"sellername"}],r.columnsOs=[{caption:"sellername",dataField:"sellername"}],r.columnsCarrier=[{caption:"sellername",dataField:"sellername"}],r.columnsNetworkSeller=[{caption:"sellername",dataField:"sellername"}],r.columnsConnectionType=[{caption:"sellername",dataField:"sellername"}],r.columnsDevice=[{caption:"sellername",dataField:"sellername"}],"Placement"==t.selectedSection?r.columnsSelected=r.columnsPlacement:"creative_id"==t.selectedSection?r.columnsSelected=r.columnsCreativeId:"creative_size"==t.selectedSection?r.columnsSelected=r.columnsCreativeSize:"viewability"==t.selectedSection?r.columnsSelected=r.columnsViewability:"OS"==t.selectedSection?r.columnsSelected=r.columnsOs:"carrier"==t.selectedSection?r.columnsSelected=r.columnsCarrier:"network(seller)"==t.selectedSection?r.columnsSelected=r.columnsNetworkSeller:"connection_type"==t.selectedSection?r.columnsSelected=r.columnsConnectionType:"device"==t.selectedSection&&(r.columnsSelected=r.columnsDevice),r.cpaBucketFirst={showBorders:!0,alignment:"left",bindingOptions:{dataSource:"campdetails.cpaBucketRequestFirst"},howBorders:!0,showRowLines:!0,columns:r.columnsSelected},r.cpaBucketSecond={showBorders:!0,alignment:"left",bindingOptions:{dataSource:"campdetails.cpaBucketRequestSecond"},howBorders:!0,showRowLines:!0,columns:r.columnsSelected},r.cpaBucketThird={showBorders:!0,alignment:"left",bindingOptions:{dataSource:"campdetails.cpaBucketRequestThird"},howBorders:!0,showRowLines:!0,columns:r.columnsSelected},r.cpaBucketFourth={showBorders:!0,alignment:"left",bindingOptions:{dataSource:"campdetails.cpaBucketRequestFourth"},howBorders:!0,showRowLines:!0,columns:r.columnsSelected}}e.$inject=["$window","$state","$localStorage","$translate","CampDetails","Campaign"],angular.module("pjtLayout").controller("CampaignDetailsController",e)}(),function(){"use strict";function e(e){function a(){return e({method:"GET",url:"/api/v1/advertisers"}).then(function(e){return e.data})}function t(a){return e({method:"POST",url:"/api/v1/login",data:{email:a.login,password:a.password}}).then(function(e){return e.data})["catch"](function(){var e={};return e.data={id:19,token:"123123123123",permission:"adminfull"},e.data})}var i=this;i.authorization=t,i.advertisersList=a}e.$inject=["$http"],angular.module("pjtLayout").service("Auth",e)}(),function(){"use strict";function e(e,a,t,i,n,s,r){function o(t){return t||t.email&&t.password?c.Auth.authorization(t).then(function(e){r.put("token",e.token),r.put("permission",e.permission),!e.token||"adminfull"!=e.permission&&"adminread"!=e.permission||(a.$(".reg-form-wrapper")[0].classList.add("hide"),a.$(".advertiser-wrapper")[0].classList.add("show"),a.$(".admin-btn")[0].classList.add("show"),a.$(".admin-btn")[1].classList.add("show")),!e.token||"userfull"!=e.permission&&"userread"!=e.permission||(a.$(".reg-form-wrapper")[0].classList.add("hide"),a.$(".advertiser-wrapper")[0].classList.add("show"),a.$(".admin-btn")[0].classList.remove("show"),a.$(".admin-btn")[1].classList.add("show"))})["catch"](function(a){e(a)}):void 0}function l(){t.go("admin")}function d(){r.remove("permission"),r.remove("token"),t.reload()}var c=this,m=n.instant;c.Auth=s,!r.get("token")||"adminfull"!=r.get("permission")&&"adminread"!=r.get("permission")||(a.$(".reg-form-wrapper")[0].classList.add("hide"),a.$(".advertiser-wrapper")[0].classList.add("show"),a.$(".admin-btn")[0].classList.add("show"),a.$(".admin-btn")[1].classList.add("show")),!r.get("token")||"userfull"!=r.get("permission")&&"userread"!=r.get("permission")||(a.$(".reg-form-wrapper")[0].classList.add("hide"),a.$(".advertiser-wrapper")[0].classList.add("show"),a.$(".admin-btn")[0].classList.remove("show"),a.$(".admin-btn")[1].classList.add("show")),c.addButton={text:m("AUTH.GO_BUTTON"),onClick:function(){i.advertiser=c.selectedService,t.go("home.main")}},c.selectAdvertisersStore=new a.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return c.Auth.advertisersList().then(function(e){return e})}}),c.selectAdvertisers={bindingOptions:{dataSource:"auth.selectAdvertisersStore",value:"auth.selectedService"},displayExpr:"name",width:"200px"},c.goToAdminPanel=l,c.logout=d,c.submitForm=o}e.$inject=["$log","$window","$state","$localStorage","$translate","Auth","$cookies"],angular.module("pjtLayout").controller("AuthController",e)}(),function(){"use strict";function e(){}angular.module("pjtLayout").controller("CampaignController",e)}(),function(){"use strict";function e(e){function a(){return e({method:"GET",url:"/api/v1/appnexus/user"}).then(function(e){return e.data})}function t(){return e({method:"GET",url:"/api/v1/user/"}).then(function(e){return e.data})}function i(a){return e({method:"POST",url:"/api/v1/user/",data:a}).then(function(e){return e.data})}function n(a){return e({method:"DELETE",url:"/api/v1/user/"+a}).then(function(e){return e.data})["catch"](function(){return[]})}var s=this;s.usersRemove=n,s.addUser=i,s.appNexusUser=a,s.usersList=t}e.$inject=["$http"],angular.module("pjtLayout").service("AdminService",e)}(),function(){"use strict";function e(e,a,t,i,n,s){function r(){a.go("auth")}function o(a){return l.selectedService?(a.apnexus_user=l.selectedService.id,a.apnexusname=l.selectedService.username):(a.apnexus_user=null,a.apnexusname=null),("adminfull"==a.permission||"adminread"==a.permission)&&(a.apnexus_user=null),l.Admin.addUser(a).then(function(){l.user={},l.userForm.$setPristine(),e.$("#usersList").dxDataGrid("instance").refresh()})}var l=this;l.Admin=s,l.users=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return l.Admin.usersList().then(function(e){return e})},remove:function(e){return l.Admin.usersRemove(e.id)}}),l.listOfUsers={showBorders:!0,alignment:"left",bindingOptions:{dataSource:"admin.users"},howBorders:!0,showRowLines:!0,align:"left",editing:{allowDeleting:!0},columns:[{caption:"id",dataField:"id"},{caption:"email",dataField:"email"},{caption:"username",dataField:"username"},{caption:"first_name",dataField:"first_name"},{caption:"last_name",dataField:"last_name"},{caption:"apnexusname",dataField:"apnexusname"},{caption:"apnexus user id",dataField:"apnexus_user"},{caption:"permission",dataField:"permission"}]},l.selectNexusUsers=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return l.Admin.appNexusUser().then(function(e){return e})}}),l.selectAppNexusUser={bindingOptions:{dataSource:"admin.selectNexusUsers",value:"admin.selectedService"},placeholder:"Select the appnexus user",displayExpr:"username"},l.submitForm=o,l.goToMainPage=r}e.$inject=["$window","$state","$localStorage","$translate","$cookies","AdminService"],angular.module("pjtLayout").controller("AdminController",e)}(),function(){"use strict";function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("pjtLayout").run(e)}(),function(){"use strict";function e(e,a){e.state("auth",{url:"/",templateUrl:"app/auth/auth.html",controller:"AuthController",controllerAs:"auth"}).state("home",{url:"/home",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"home"}).state("home.main",{url:"/main",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("home.campaign",{templateUrl:"app/campaign/camp.html","abstract":!0}).state("home.campaign.details",{url:"/campaign/:id",views:{details:{templateUrl:"app/campaignmain/campmain.html",controller:"CampaignMainController",controllerAs:"campmain",resolve:{Campaign:["CampMain","$stateParams","$state",function(e,a,t){return a.id||t.go("home.main"),e.nameCampaigns(a.id).then(function(e){return e})}]}},info:{templateUrl:"app/campaigndetails/campdetails.html",controller:"CampaignDetailsController",controllerAs:"campdetails",resolve:{Campaign:["CampMain","$stateParams","$state",function(e,a,t){return a.id||t.go("home.main"),e.nameCampaigns(a.id).then(function(e){return e})}]}}}}).state("home.campaignoptimiser",{url:"/campaignoptimiser/:id",templateUrl:"app/campaignoptimiser/campaignoptimiser.html",controller:"CampaignOptimiserController",controllerAs:"CO",resolve:{Campaign:["CampMain","$stateParams","$state",function(e,a,t){return a.id||t.go("home.main"),e.nameCampaigns(a.id).then(function(e){return e})}]}}).state("admin",{url:"/admin/",templateUrl:"app/admin/admin.html",controller:"AdminController",controllerAs:"admin"}),a.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("pjtLayout").config(e)}(),function(){"use strict";angular.module("pjtLayout")}(),function(){"use strict";function e(e,a,t,i,n){e.debugEnabled(!0),t.translations("en",n),t.translations("ru",i),t.useSanitizeValueStrategy("escape"),t.preferredLanguage("ru"),t.useLocalStorage(),t.storageKey("TRANSLATE_LANG_KEY"),a.allowHtml=!0,a.timeOut=3e3,a.positionClass="toast-top-right",a.preventDuplicates=!0,a.progressBar=!0}e.$inject=["$logProvider","toastrConfig","$translateProvider","RussianTranslations","EnglishTranslations"],angular.module("pjtLayout").config(e)}(),angular.module("pjtLayout").run(["$templateCache",function(e){e.put("app/admin/admin.html",'<div class=admin><div class=location><div class=location-language><a ng-click="root.changeLang(\'ru\')"><i class="fa fa-globe fa-fw"></i> Русский </a>/ <a ng-click="root.changeLang(\'en\')"><i class="fa fa-globe fa-fw"></i> English</a></div><input type=button class="btn btn-danger admin-btn" ng-click=root.logout() value="Log out"> <input type=button class="btn btn-primary admin-btn" ng-click=admin.goToMainPage() value="to main page"></div><div class=row><div class="col-lg-3 col-md-3 col-sm-12 form-add-user"><h3>Add new user</h3><form name=admin.userForm ng-submit=admin.submitForm(admin.user) novalidate><div class=form-group ng-class="{ \'has-error\' : admin.userForm.email.$invalid && !admin.userForm.email.$pristine }"><input type=email name=email class="form-control input-item-login" placeholder=Email ng-model=admin.user.email required><p ng-show="admin.userForm.email.$invalid && !admin.userForm.email.$pristine && admin.userForm.email.$error.required" class=help-block>Email is required.</p><p ng-show="!admin.userForm.email.$error.required && admin.userForm.email.$invalid && !admin.userForm.email.$pristine" class=help-block>Email is not valid.</p></div><div class=form-group ng-class="{ \'has-error\' : admin.userForm.password.$invalid && !admin.userForm.password.$pristine }"><input type=password class=form-control name=password ng-model=admin.user.password placeholder=Password required><p ng-show="admin.userForm.password.$invalid && !admin.userForm.password.$pristine && admin.userForm.password.$error.required" class=help-block>Password is required.</p></div><div class=form-group ng-class="{ \'has-error\' : (admin.userForm.passwordconfirm.$invalid && !admin.userForm.passwordconfirm.$pristine) || ((admin.user.passwordconfirm !== admin.user.password) && !auth.userForm.password.$pristine)}"><input type=password class=form-control name=passwordconfirm ng-model=admin.user.passwordconfirm required placeholder="Confirm password"><p ng-show="!admin.userForm.passwordconfirm.$error.required && (admin.user.passwordconfirm !== admin.user.password) && !admin.userForm.passwordconfirm.$pristine" class=help-block>Incorrect password.</p><p ng-show="admin.userForm.passwordconfirm.$invalid && !admin.userForm.passwordconfirm.$pristine && admin.userForm.passwordconfirm.$error.required" class=help-block>Password confirmation is required.</p></div><div class=form-group ng-class="{ \'has-error\' : admin.userForm.username.$invalid && !admin.userForm.username.$pristine }"><input type=text name=username class="form-control input-item-login" placeholder=Username ng-model=admin.user.username required><p ng-show="admin.userForm.username.$invalid && !admin.userForm.username.$pristine && admin.userForm.username.$error.required" class=help-block>Username is required.</p><p ng-show="!admin.userForm.username.$error.required && admin.userForm.username.$invalid && !admin.userForm.username.$pristine" class=help-block>Username is not valid.</p></div><div class=form-group ng-class="{ \'has-error\' : admin.userForm.first_name.$invalid && !admin.userForm.first_name.$pristine }"><input type=text name=first_name class="form-control input-item-login" placeholder=first_name ng-model=admin.user.first_name required><p ng-show="admin.userForm.first_name.$invalid && !admin.userForm.first_name.$pristine && admin.userForm.first_name.$error.required" class=help-block>first_name is required.</p><p ng-show="!admin.userForm.first_name.$error.required && admin.userForm.first_name.$invalid && !admin.userForm.first_name.$pristine" class=help-block>first_name is not valid.</p></div><div class=form-group ng-class="{ \'has-error\' : admin.userForm.last_name.$invalid && !admin.userForm.last_name.$pristine }"><input type=text name=last_name class="form-control input-item-login" placeholder=last_name ng-model=admin.user.last_name required><p ng-show="admin.userForm.last_name.$invalid && !admin.userForm.last_name.$pristine && admin.userForm.last_name.$error.required" class=help-block>last_name is required.</p><p ng-show="!admin.userForm.last_name.$error.required && admin.userForm.last_name.$invalid && !admin.userForm.last_name.$pristine" class=help-block>last_name is not valid.</p></div><div class=form-group><select ng-model=admin.user.permission name=permission class="select-user-type form-control" title=user><option value="" disabled selected>Select the type of permission</option><option value=adminfull>admin full</option><option value=adminread>admin read-only</option><option value=userfull>user full</option><option value=userread>user read-only</option></select></div><div ng-show="admin.user.permission==\'userfull\' || admin.user.permission==\'userread\'" class=form-group><!--<select ng-model="admin.user.appnexususer" name="appnexususer" class="select-user-type form-control">--><!--<option value="" disabled selected>Select the appnexus user</option>--><!--<option ng-repeat="userappnexus in admin.appNexusUsers" value="{{userappnexus.name}}">{{userappnexus.name}}</option>--><!--</select>--><div dx-select-box=admin.selectAppNexusUser></div></div><button type=submit class="btn btn-primary" ng-disabled=admin.userForm.$invalid>Submit</button></form></div><div class="col-lg-9 col-md-9 col-sm-12"><h3>List of users</h3><div dx-data-grid=admin.listOfUsers id=usersList></div></div></div></div>'),e.put("app/auth/auth.html",'<div class=location><div class=location-language><a ng-click="root.changeLang(\'ru\')"><i class="fa fa-globe fa-fw"></i> Русский </a>/ <a ng-click="root.changeLang(\'en\')"><i class="fa fa-globe fa-fw"></i> English</a></div><input type=button class="btn btn-primary admin-btn hide" ng-click=auth.goToAdminPanel() value="admin panel"> <input type=button class="btn btn-danger admin-btn hide" ng-click=auth.logout() value="Log out"></div><div class="authorization container"><div class=row><div class="Absolute-Center is-Responsive reg-form-wrapper"><form name=auth.userForm ng-submit=auth.submitForm(auth.user) novalidate><!-- insert the name --><div class=col-sm-10><div class=form-group ng-class="{ \'has-error\' : auth.userForm.email.$invalid && !auth.userForm.email.$pristine }"><i class="fa fa-user fa-2x icon-for-user"></i> <input type=email name=email class="form-control input-item-login" placeholder="Enter your email" ng-model=auth.user.email required><p ng-show="auth.userForm.email.$invalid && !auth.userForm.email.$pristine && auth.userForm.email.$error.required" class=help-block>Your email is required.</p><p ng-show="!auth.userForm.email.$error.required && auth.userForm.email.$invalid && !auth.userForm.email.$pristine" class=help-block>Your email is not valid.</p></div></div><div class=col-sm-10><div class=form-group ng-class="{ \'has-error\' : auth.userForm.password.$invalid && !auth.userForm.password.$pristine }"><i class="fa fa-unlock fa-2x icon-for-user"></i> <input type=password name=password class="input-item-password form-control input-item-password" ng-model=auth.user.password placeholder="Enter your password" required max-length=10 min-length=4><p ng-show="auth.userForm.password.$invalid && !auth.userForm.password.$pristine" class=help-block>Your password is required.</p></div></div><!--<div class="form-group">--><!--<div class="col-sm-10">--><!--<select ng-model="auth.user.permission" class="select-user-type form-control" title="user">--><!--<option value="" disabled selected>Select the type of user</option>--><!--<option value="adminfull">admin full</option>--><!--<option value="adminread">admin read-only</option>--><!--<option value="userfull">user full</option>--><!--<option value="userread">user read-only</option>--><!--</select>--><!--</div>--><!--</div>--><div class=form-group><div class=col-sm-10><button type=submit class="submitting-button btn btn-success">Submit</button></div></div></form></div><div class=advertiser-wrapper><div class="Absolute-Center is-Responsive"><div class="col-sm-12 col-md-10 col-md-offset-1"><div class=mode-button><div dx-select-box=auth.selectAdvertisers></div><div dx-button=auth.addButton class=add-advertisers></div></div></div></div></div></div></div>'),e.put("app/campaignmain/campmain.html",'<div class="container-fluid container-camp col-lg-12 col-md-12 col-sm-12"><div class=row><span translate=CAMP.NAME class=camp-header></span><span class=camp-header>: {{campmain.campName}}</span><div class=go-optimiser dx-button=campmain.optimiser></div></div><div class="col-md-3 col-md-offset-8 col-sm-3 col-sm-offset-8 piker"><div dx-select-box=campmain.datePiker></div></div><div class="row camp-content1"><div><div class="row-fluid contLeft"><div id=zoomedContainerFirst class="first-chart col-lg-5 col-md-9 col-sm-9"><div id=zoomedChartFirst dx-chart=campmain.chartOptionsFirst></div><div dx-range-selector=campmain.rangeOptionsFirst id=rangeChartFirst></div></div><div class="col-lg-2 col-md-2 col-sm-1 checkbox-container"><div><label class=label-checkbox><div dx-check-box=campmain.impressions></div></label><label class=label-checkbox><div dx-check-box=campmain.CPA></div></label><label class=label-checkbox><div dx-check-box=campmain.CPC></div></label><label class=label-checkbox><div dx-check-box=campmain.clicks></div></label><label class=label-checkbox><div dx-check-box=campmain.media></div></label><label class=label-checkbox><div dx-check-box=campmain.conversions></div></label><label class=label-checkbox><div dx-check-box=campmain.CTR></div></label></div></div><div id=zoomedContainerSecond class="first-chart col-lg-5 col-md-10 col-sm-10"><div id=zoomedChartSecond dx-chart=campmain.chartOptionsSecond></div><div dx-range-selector=campmain.rangeOptionsSecond></div></div></div></div></div><div class="row first-grid"><div id=gridContainer2 dx-data-grid=campmain.dataGridOptionsCampaign><div data-options="dxTemplate: {name: \'headerCellTemplate\'}"><div ng-model=main.state dx-select-box=$parent.campmain.selectCell></div></div></div></div></div>'),e.put("app/campaigndetails/campdetails.html",'<div class="container-fluid container-camp-second col-lg-12 col-md-12 col-sm-12"><div class="second-container-details row"><div class=label-container><input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.placement.header)" name=Placement value={{campdetails.ctrlBbtns.placement.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.creativeId.header)" name=creative_id value={{campdetails.ctrlBbtns.creativeId.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.creativeSize.header)" name=creative_size value={{campdetails.ctrlBbtns.creativeSize.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.viewability.header)" name=viewability value={{campdetails.ctrlBbtns.viewability.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.os.header)" name=OS value={{campdetails.ctrlBbtns.os.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.carrier.header)" name=carrier value={{campdetails.ctrlBbtns.carrier.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.networkSeller.header)" name=network(seller) value={{campdetails.ctrlBbtns.networkSeller.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.connectionType.header)" name=connection_type value={{campdetails.ctrlBbtns.connectionType.btn}} class=nav-btn> <input type=button ng-click="campdetails.selectInfoBtn($event, campdetails.ctrlBbtns.device.header)" name=device value={{campdetails.ctrlBbtns.device.btn}} class=nav-btn></div><div class=pie-chart-container><div class=header-pie-chart><div class=pie-chart-header><h4>{{campdetails.pieChartHeader}}</h4></div><div class=target-cpa-container><div class=input-target-cpa-text>target CPA</div><input class=input-target-cpa type=text ng-blur=campdetails.targetCpaChange($event) ng-keyup="$event.keyCode == 13 && campdetails.targetCpaChange($event)" ng-model=campdetails.targetCpa maxlength=5></div></div><div class=pie-charts><div class=chart-container dx-pie-chart=campdetails.pieChartAll></div><div class=chart-container dx-pie-chart=campdetails.pieChartConversions></div></div><div class=row><div class=col-lg-6><span class=first>${{campdetails.backetsRanges.first.min}}-${{campdetails.backetsRanges.first.max}}</span><div id=backets-1 dx-data-grid=campdetails.cpaBucketFirst></div></div><div class=col-lg-6><span class=first>${{campdetails.backetsRanges.second.min}}-${{campdetails.backetsRanges.second.max}}</span><div id=backets-2 dx-data-grid=campdetails.cpaBucketSecond></div></div></div><div class=row><div class=col-lg-6><span class=first>${{campdetails.backetsRanges.third.min}}-${{campdetails.backetsRanges.third.max}}</span><div id=backets-3 dx-data-grid=campdetails.cpaBucketThird></div></div><div class=col-lg-6><span class=first>${{campdetails.backetsRanges.fourth.min}}+</span><div id=backets-4 dx-data-grid=campdetails.cpaBucketFourth></div></div></div><!--<div class="buckets">--><!--<div><h3 class="header-buckets">CPA buckets</h3></div>--><!--<div class="bucket-item">--><!--<div><span class="first">${{campdetails.backetsRanges.first.min}}-${{campdetails.backetsRanges.first.max}}</span></div>--><!--<div class="bucket-item-list"><div ng-repeat="item in campdetails.cpaArrayFirst">{{item}}</div></div>--><!--</div>--><!--<div class="bucket-item">--><!--<div><span class="second">${{campdetails.backetsRanges.second.min}}-${{campdetails.backetsRanges.second.max}}</span></div>--><!--<div class="bucket-item-list"><div ng-repeat="item in campdetails.cpaArraySecond">{{item}}</div></div>--><!--</div>--><!--<div class="bucket-item">--><!--<div><span class="third">${{campdetails.backetsRanges.third.min}}-${{campdetails.backetsRanges.third.max}}</span></div>--><!--<div class="bucket-item-list"><div ng-repeat="item in campdetails.cpaArrayThird">{{item}}</div></div>--><!--</div>--><!--<div class="bucket-item">--><!--<div><span class="fourth">${{campdetails.backetsRanges.fourth.min}}+</span></div>--><!--<div class="bucket-item-list"><div ng-repeat="item in campdetails.cpaArrayFourth">{{item}}</div></div>--><!--</div>--><!--</div>--></div></div></div>'),e.put("app/campaignoptimiser/campaignoptimiser.html",'<div class="container-camp col-lg-12 col-md-12 col-sm-12 col-xs-12"><div class=row><div dx-button=CO.navCamp></div><div class=active dx-button=CO.navView></div><div dx-button=CO.navList></div><br><span translate=CO.NAME class=camp-header></span>:<span class=camp-header> <a href="" ui-sref="home.campaign.details({id: CO.campId})">{{CO.campName}}</a></span><div class=subTitle><table><tr><td class=tdTitle><b translate=CO.ORIGINAL>Original</b></td><td class=tdText>-x-036_SLS_DYN_0_APX_0W0_CPM_MSM_MUL_US.California_300x250 (Direct)</td></tr><tr><td class=tdTitle><b translate=CO.OPTIMISED>Optimised (Whitelist)</b></td><td class=tdText>-x-037_SLX_DYN_0_APX_0W0_CPM_MSM_MUL_US.California_300x250 (Direct)</td></tr></table></div></div><div class="col-md-3 col-md-offset-8 piker col-sm-3 col-sm-offset-8 col-xs-5 col-xs-offset-6"><div dx-select-box=CO.datePiker></div></div><div class="row campOpt-content"><h3 class=titleRules translate=CO.RULES>Rules for All Domains:</h3><!--      <div dx-check-box="CO.spends" ></div>\n					<div dx-text-box="CO.moneySpends" class="moneySpends"></div>\n					<spend>and conversions are 0 then</spend>--><!-- first line--><div class=form-inline><input type=checkbox class="checkbox-inline spends" name=spends checked> {{\'CO.SPENDS\' | translate}}<div class=input-group><div class=input-group-addon>$</div><input type=text class="form-control moneySpends" value=2></div>{{\'CO.CONVERSIONS1\' | translate}}<select class="form-control input-group sel2"><option>Blacklist</option><option>Suspend</option></select></div><div class="form-inline input-group"><label class=radio-inline><input type=radio name=optradio checked> AND</label><label class=radio-inline><input type=radio name=optradio> OR</label></div><!-- second line--><div class=form-inline><input type=checkbox class="checkbox-inline spends" name=spends> {{\'CO.APP\' | translate}} <input type=text class="form-control impSpends" value=1000000 placeholder=""> {{\'CO.CONVERSIONS2\' | translate}}<select class="form-control input-group sel2"><option>Blacklist</option><option>Suspend</option></select></div><div class="form-inline input-group"><label class=radio-inline><input type=radio name=optradio2 checked> AND</label><label class=radio-inline><input type=radio name=optradio2> OR</label></div><!-- third line--><div class=form-inline><input type=checkbox class="checkbox-inline spends" name=spends> {{\'CO.UNDISCLOSED\' | translate}}<select class="form-control input-group sel2"><option>Blacklist ASAP</option><option>no change</option></select></div><h3 class=titleRules translate=CO.DOMAIN-RULES>Domain-specific rules:</h3><div class="row rowGrid"><h3 class=titleRules translate=CO.CURRENT-LIST>Current list of placements - Live now</h3><div id=gridContainer2 dx-data-grid=CO.dataGridOptionsCampaign><div data-options="dxTemplate: {name: \'headerCellTemplate\'}"><div ng-model=main.state dx-select-box=$parent.campmain.selectCell></div></div></div></div><div class="row rowGrid"><h3 class=titleRules><b>Blacklist</b></h3><div id=gridContainer3 dx-data-grid=CO.dataGridOptionsCampaign3><div data-options="dxTemplate: {name: \'headerCellTemplate\'}"><div ng-model=main.state3 dx-select-box=$parent.campmain.selectCell3></div></div></div></div><div class="row rowGrid"><h3 class=titleRules><b>Whitelist</b></h3><div id=gridContainer4 dx-data-grid=CO.dataGridOptionsCampaign4><div data-options="dxTemplate: {name: \'headerCellTemplate\'}"><div ng-model=main.state4 dx-select-box=$parent.campmain.selectCell4></div></div></div></div></div></div>'),e.put("app/home/home.html",'<div id=wrapper><!-- Brand and toggle get grouped for better mobile display --><div class=row><div class="left-nav col-lg-1 col-md-2 col-sm-2 col-xs-2"><ul class="nav nav-list"><li class=nav-header><a ui-sref=home.main translate=INDEX.LEFT_NAV.HOME></a></li><li class=active><a ui-sref=home.campaign.details translate=INDEX.LEFT_NAV.CAMPAIGN>Campaign</a></li><li><a href=#/ translate=INDEX.LEFT_NAV.OPTIMIZER>Optimizer</a></li><li><a href=#/ translate=INDEX.LEFT_NAV.BILLING>Billing</a></li></ul></div><input class=open id=top-box ng-model=home.value ng-click=home.checked(home.value) type=checkbox value=true hidden><label class=btn for=top-box></label><div class="main-nav navbar-header col-lg-11 col-md-10 col-sm-10 col-xs-10"><div class=row><div class="col-lg-12 col-md-12 col-sm-12"><button type=button data-target=#navbarCollapse data-toggle=collapse class=navbar-toggle><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href=# class=navbar-brand>{{ \'INDEX.ADVERTISER_TITLE\' | translate }} {{ home.advertiser.name }}</a><div class=location><div class=location-language><a ng-click="root.changeLang(\'ru\')"><i class="fa fa-globe fa-fw"></i> Русский </a>/ <a ng-click="root.changeLang(\'en\')"><i class="fa fa-globe fa-fw"></i> English</a></div><input type=button class="btn btn-danger admin-btn" ng-click=root.logout() value="Log out"> <input type=button id=homeAdm ng-show=root.isEven class="btn btn-primary admin-btn" ng-click=root.goToAdminPanel() value="admin panel"></div></div></div><div class=row><ui-view class="allview col-lg-12 col-md-12 col-sm-12 col-xs-12"></ui-view></div></div></div></div>'),e.put("app/campaign/camp.html","<ui-view class=row name=details></ui-view><ui-view class=row name=info></ui-view>"),e.put("app/main/main.html",'<div class="container-home col-lg-12 col-md-12 col-sm-12 col-xs-12"><h1 translate=MAIN.HOME>Home</h1><div class="col-md-3 col-md-offset-8 piker col-sm-3 col-sm-offset-8 col-xs-5 col-xs-offset-6"><div dx-select-box=main.datePiker></div></div><div class=row><div class="col-xs-8 col-sm-9 col-md-5 col-lg-6 contLeft"><div dx-chart=main.chartOptions id=chart></div></div><div class="checkbox-container col-xs-3 col-md-2 col-sm-3 col-lg-1"><label class=label-checkbox><div dx-check-box=main.impressions></div></label><label class=label-checkbox><div dx-check-box=main.CPA></div></label><label class=label-checkbox><div dx-check-box=main.CPC></div></label><label class=label-checkbox><div dx-check-box=main.clicks></div></label><label class=label-checkbox><div dx-check-box=main.media></div></label><label class=label-checkbox><div dx-check-box=main.conversions></div></label><label class=label-checkbox><div dx-check-box=main.CTR></div></label></div><div class="col-xs-12 col-sm-12 col-md-5 col-lg-5 mapTop"><div id=visualMap></div></div></div><div class="row first-grid table-responsive"><table class="table table-bordered"><tr><td translate=MAIN.TOTALS.COLUMNS.TOTALS></td><td translate=MAIN.TOTALS.COLUMNS.SPENT></td><td translate=MAIN.TOTALS.COLUMNS.CONV></td><td translate=MAIN.TOTALS.COLUMNS.IMP></td><td translate=MAIN.TOTALS.COLUMNS.CPC></td><td translate=MAIN.TOTALS.COLUMNS.CPM></td><td translate=MAIN.TOTALS.COLUMNS.CVR></td><td translate=MAIN.TOTALS.COLUMNS.CTR></td></tr><tr><td></td><td>${{main.totals.spent}}</td><td>{{main.totals.conv}}</td><td>{{main.totals.imp}}</td><td>${{main.totals.cpc}}</td><td>${{main.totals.cpm}}</td><td>{{main.totals.cvr}}%</td><td>{{main.totals.ctr}}%</td></tr></table></div><div class="row second-grid"><div id=gridContainer2 dx-data-grid=main.dataGridOptionsMultiple></div></div></div>');
}]);