function RootController(e,a,t,i){var n=this;e.Globalize.culture(i.get("TRANSLATE_LANG_KEY")),n.changeLang=function(i){t.use(i),e.Globalize.culture(i),a.reload()}}RootController.$inject=["$window","$state","$translate","$translateLocalStorage"],function(){"use strict";angular.module("pjtLayout",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ui.router","ui.bootstrap","toastr","dx","pascalprecht.translate","chart.js","ngStorage"])}(),angular.module("pjtLayout").controller("RootController",RootController),function(){"use strict";function e(e,a,t){function i(i,n,s,c){return e({method:"GET",url:"/api/v1/statistics",params:{advertiser_id:i,from_date:n,to:s,by:c}}).then(function(e){for(var i in e.data.statistics){var n=a.get("TRANSLATE_LANG_KEY");e.data.statistics[i].cpc=parseFloat(e.data.statistics[i].cpc).toFixed(4),e.data.statistics[i].cpm=parseFloat(e.data.statistics[i].cpm).toFixed(4),e.data.statistics[i].spend=parseFloat(e.data.statistics[i].spend).toFixed(4),e.data.statistics[i].day=t.moment(e.data.statistics[i].day).locale(n).format("L")}return e.data})}function n(a,t,i){return e({method:"GET",url:"/api/v1/totals",params:{advertiser_id:a,from_date:t,to:i}}).then(function(e){return e.data.totals.cpc=parseFloat(e.data.totals.cpc).toFixed(4),e.data.totals.cpm=parseFloat(e.data.totals.cpm).toFixed(4),e.data.totals.spend=parseFloat(e.data.totals.spend).toFixed(4),e.data.totals})}function s(a,t,i,n,s,c,r,o,l){return c?(r=c[0].desc===!0?"desc":"asc",c=c[0].selector):(c="campaign",r="DESC"),null==s&&(s=20),null==n&&(n=0),e({method:"GET",url:"/api/v1/campaigns",params:{advertiser_id:a,from_date:t,to:i,skip:n,take:s,sort:c,order:r,stat_by:o,filter:l}}).then(function(e){for(var a in e.data.campaigns)e.data.campaigns[a].cpc=parseFloat(e.data.campaigns[a].cpc).toFixed(4),e.data.campaigns[a].cpm=parseFloat(e.data.campaigns[a].cpm).toFixed(4),e.data.campaigns[a].spend=parseFloat(e.data.campaigns[a].spend).toFixed(4);return e.data})}function c(a,t,i){return e({method:"GET",url:"/api/v1/map/clicks",params:{advertiser_id:a,from_date:t,to:i}}).then(function(e){return e.data})}var r=this;r.statsCampaigns=s,r.statsTotals=n,r.statsChart=i,r.statsMap=c}e.$inject=["$http","$translateLocalStorage","$window"],angular.module("pjtLayout").service("Main",e)}(),function(){"use strict";function e(e,a,t,i,n){var s=this;s.advertiser=t.advertiser,s.Main=n,s.multipleTotalCount=0,s.checkChart=[],s.by="imp,cvr,cpc,clicks,spend,conv,ctr";var c=i.instant;null==t.checkChart&&(t.checkChart={imp:!0,cvr:!0,cpc:!0,clicks:!0,spend:!0,conv:!0,ctr:!0}),s.chartSeries=[{valueField:"imp",name:"Impressions",visible:t.checkChart.imp},{valueField:"cvr",name:"CVR",visible:t.checkChart.cvr},{valueField:"cpc",name:"CPC",visible:t.checkChart.cpc},{valueField:"clicks",name:"clicks",visible:t.checkChart.clicks},{valueField:"spend",name:"media",visible:t.checkChart.spend},{valueField:"conv",name:"conversions",visible:t.checkChart.conv},{valueField:"ctr",name:"CTR",visible:t.checkChart.ctr}],null==t.dataStart&&null==t.dataEnd?(t.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),t.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):(s.dataStart=t.dataStart,s.dataEnd=t.dataEnd),null==t.SelectedTime&&(t.SelectedTime=0);var r=[{ID:0,Name:c("MAIN.DATE_PICKER.YESTERDAY"),dataStart:e.moment({hour:"00"}).subtract(1,"day").unix(),dataEnd:e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()},{ID:1,Name:c("MAIN.DATE_PICKER.LAST_3_DAYS"),dataStart:e.moment({hour:"00"}).subtract(3,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:2,Name:c("MAIN.DATE_PICKER.LAST_7_DAYS"),dataStart:e.moment({hour:"00"}).subtract(7,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:3,Name:c("MAIN.DATE_PICKER.LAST_14_DAYS"),dataStart:e.moment({hour:"00"}).subtract(14,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:4,Name:c("MAIN.DATE_PICKER.LAST_21_DAYS"),dataStart:e.moment({hour:"00"}).subtract(21,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:5,Name:c("MAIN.DATE_PICKER.CURRENT_MONTH"),dataStart:e.moment().startOf("month").unix(),dataEnd:e.moment().unix()},{ID:6,Name:c("MAIN.DATE_PICKER.LAST_MONTH"),dataStart:e.moment().subtract(1,"month").startOf("month").unix(),dataEnd:e.moment().subtract(1,"month").endOf("month").unix()},{ID:7,Name:c("MAIN.DATE_PICKER.LAST_90_DAYS"),dataStart:e.moment({hour:"00"}).subtract(90,"day").unix(),dataEnd:e.moment().unix()},{ID:8,Name:c("MAIN.DATE_PICKER.ALL_TIME"),dataStart:0,dataEnd:e.moment().unix()}];s.datePiker={items:r,displayExpr:"Name",valueExpr:"ID",value:r[t.SelectedTime].ID,onValueChanged:function(e){t.SelectedTime=e.value,t.dataStart=r[e.value].dataStart,t.dataEnd=r[e.value].dataEnd,a.reload()}},s.totals=[],s.chartStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return s.Main.statsChart(s.advertiser.id,s.dataStart,s.dataEnd,s.by).then(function(e){return e.statistics})}}),s.multipleStore=new e.DevExpress.data.CustomStore({totalCount:function(){return s.multipleTotalCount},load:function(e){return s.Main.statsCampaigns(s.advertiser.id,s.dataStart,s.dataEnd,e.skip,e.take,e.sort,e.order,s.by,e.filter).then(function(e){return s.multipleTotalCount=e.totalCount,e.campaigns})}}),s.Main.statsTotals(s.advertiser.id,s.dataStart,s.dataEnd).then(function(e){s.totals.spent=e.spend,s.totals.conv=e.conv,s.totals.imp=e.imp,s.totals.cpc=e.cpc,s.totals.cpm=e.cpm,s.totals.cvr=e.cvr,s.totals.ctr=e.ctr}),s.selectedItems=[],s.chartOptionsFuncgrid=[],s.dataGridOptionsMultiple={bindingOptions:{dataSource:"main.multipleStore"},onInitialized:function(e){s.dataGridOptionsMultipleFunc=e.component,s.dataGridOptionsMultipleFunc._controllers.columns._commandColumns[1].visibleIndex=15},showBorders:!0,alignment:"left",headerFilter:{visible:!0},filterRow:{visible:!0,applyFilter:"auto"},"export":{enabled:!0,fileName:"Employees"},allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,columnChooser:{enabled:!0},columnFixing:{enabled:!0},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:c("MAIN.CAMPAIGN.COLUMNS.CAMPAIGN"),dataField:"campaign",fixed:!0,cellTemplate:function(a,t){a.addClass("a-campaign"),e.angular.element('<a href="#/home/campaign/'+t.data.id+'">'+t.data.campaign+"</a>").appendTo(a)}},{caption:c("MAIN.CAMPAIGN.COLUMNS.SPENT"),dataField:"spend"},{caption:c("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:c("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:c("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"},{caption:c("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:c("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:c("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:c("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{width:200,dataField:c("MAIN.CAMPAIGN.COLUMNS.STATS"),cellTemplate:function(a,t){if(t.data.chart){var i={onInitialized:function(e){s.chartOptionsFuncgrid[t.rowIndex]=e.component},dataSource:t.data.chart,size:{height:80},commonSeriesSettings:{argumentField:"day",type:"line",point:{size:2,hoverStyle:{border:{visible:!0,width:1},size:4}}},commonAxisSettings:{label:{visible:!1},grid:{visible:!1}},argumentAxis:{valueMarginsEnabled:!1,discreteAxisDivisionMode:"crossLabels",grid:{visible:!1},label:{visible:!1},minorGrid:{visible:!1},minorTick:{visible:!1},tick:{visible:!1}},series:s.chartSeries,legend:{visible:!1},tooltip:{enabled:!0,customizeTooltip:function(e){return{text:e.valueText}}}};a.addClass("img-container");var n=e.$('<div class="chartMulti" ></div>');n.dxChart(i),n.appendTo(a)}else a.addClass("img-container"),e.$('<div id="chartMulti" ></div>').appendTo(a)}}],selection:{mode:"multiple"},onSelectionChanged:function(e){s.selectedItems=e.selectedRowsData,s.disabled=!s.selectedItems.length}},s.types=["line","stackedLine","fullStackedLine"],s.chartOptions={onInitialized:function(e){s.chartOptionsFunc=e.component},series:s.chartSeries,size:{width:500,height:230},bindingOptions:{dataSource:"main.chartStore"},commonSeriesSettings:{argumentField:"day",type:s.types[0],point:{size:3,hoverStyle:{border:{visible:!0,width:2},size:5}}},margin:{bottom:20},argumentAxis:{valueMarginsEnabled:!1,discreteAxisDivisionMode:"crossLabels",grid:{visible:!0}},legend:{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"bottom"},tooltip:{enabled:!0,customizeTooltip:function(e){return{text:e.valueText}}}},s.updateCharts=function(a,i,n){s.chartStore.load();var c={};if(t.checkChart[i]=n,n){s.chartOptionsFunc.getSeriesByName(a).show(),c=e.$(".chartMulti");for(var r=0;r<c.length;r++)e.$(c[r]).dxChart("instance").getSeriesByName(a).show()}else{t.checkChart.imp=!1,s.chartOptionsFunc.getSeriesByName(a).hide(),c=e.$(".chartMulti");for(var r=0;r<c.length;r++)e.$(c[r]).dxChart("instance").getSeriesByName(a).hide()}},s.impressions={text:c("MAIN.CHECKBOX.IMPRESSIONS"),value:t.checkChart.imp,onValueChanged:function(e){s.updateCharts("Impressions","imp",e.value)}},s.CPA={text:c("MAIN.CHECKBOX.CPA"),value:t.checkChart.cvr,onValueChanged:function(e){s.updateCharts("CVR","cvr",e.value)}},s.CPC={text:c("MAIN.CHECKBOX.CPC"),value:t.checkChart.cpc,onValueChanged:function(e){s.updateCharts("CPC","cpc",e.value)}},s.clicks={text:c("MAIN.CHECKBOX.CLICKS"),value:t.checkChart.clicks,onValueChanged:function(e){s.updateCharts("clicks","clicks",e.value)}},s.media={text:c("MAIN.CHECKBOX.MEDIA_SPENT"),value:t.checkChart.spend,onValueChanged:function(e){s.updateCharts("media","spend",e.value)}},s.conversions={text:c("MAIN.CHECKBOX.CONVERSIONS"),value:t.checkChart.conv,onValueChanged:function(e){s.updateCharts("conversions","conv",e.value)}},s.CTR={text:c("MAIN.CHECKBOX.CTR"),value:t.checkChart.ctr,onValueChanged:function(e){s.updateCharts("CTR","ctr",e.value)}};var o={};s.Main.statsMap(s.advertiser.id,s.dataStart,s.dataEnd).then(function(a){o=a,e.$("#visualMap").dxVectorMap(s.vectorMapOptions)}),s.vectorMapOptions={size:{width:500,height:350},layers:[{name:"areas",dataSource:e.DevExpress.viz.map.sources.world,palette:"blue",colorGroups:[0,100,1e3,1e4],colorGroupingField:"clicks",label:{enabled:!0,dataField:"name"},customize:function(e){e.forEach(function(e){var a=e.attribute("name"),t=o[a];t&&e.attribute("clicks",t)})}}],tooltip:{enabled:!0,customizeTooltip:function(e){return{text:e.attribute("text")}}},legends:[{source:{layer:"areas",grouping:"color"},horizontalAlignment:"left",verticalAlignment:"bottom",customizeText:function(e){return e.start+" to "+e.end+" clicks"}}],bounds:[-180,85,180,-75]}}e.$inject=["$window","$state","$localStorage","$translate","Main"],angular.module("pjtLayout").controller("MainController",e)}(),function(){"use strict";angular.module("pjtLayout").constant("RussianTranslations",{AUTH:{GO_BUTTON:"Дальше"},INDEX:{ADVERTISER_TITLE:"Статистика для",LEFT_NAV:{HOME:"Главная",CAMPAIGN:"Кампания",BILLING:"Биллинг",OPTIMIZER:"Оптимизатор"}},MAIN:{HOME:"Главная",DATE_PICKER:{YESTERDAY:"Вчера",LAST_3_DAYS:"Последние 3 дня",LAST_7_DAYS:"Последние 7 дней",LAST_14_DAYS:"Последние 14 дней",LAST_21_DAYS:"Последние 21 дней",CURRENT_MONTH:"Текущий месяц",LAST_MONTH:"Прошлый месяц",LAST_90_DAYS:"Последние 90 дней",ALL_TIME:"Все время"},TOTALS:{COLUMNS:{TOTALS:"ИТОГИ",SPENT:"Потрачено",CONV:"Конв",IMP:"Показы",CLICKS:"Клики",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR"}},CAMPAIGN:{COLUMNS:{CAMPAIGN:"Кампания",PLACEMENT:"Размещение",NETWORK:"Сеть_Издатель",SPENT:"Потрачено",CONV:"Конв",IMP:"Показы",CLICKS:"Клики",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR",STATS:"Стат"}},CHECKBOX:{IMPRESSIONS:"Показы",CPA:"CPA",CPC:"CPC",CLICKS:"Клики",MEDIA_SPENT:"Потр на медий рекл",CONVERSIONS:"Конверсии",CTR:"CTR"}},CAMP:{NAME:"Кампания"}})}(),function(){"use strict";angular.module("pjtLayout").constant("EnglishTranslations",{AUTH:{GO_BUTTON:"GO"},INDEX:{ADVERTISER_TITLE:"Stats for",LEFT_NAV:{HOME:"Home",CAMPAIGN:"Campaign",BILLING:"Billing",OPTIMIZER:"Optimizer"}},MAIN:{HOME:"Home",DATE_PICKER:{YESTERDAY:"Yesterday",LAST_3_DAYS:"Last 3 days",LAST_7_DAYS:"Last 7 days",LAST_14_DAYS:"Last 14 days",LAST_21_DAYS:"Last 21 days",CURRENT_MONTH:"Current month",LAST_MONTH:"Last month",LAST_90_DAYS:"Last 90 days",ALL_TIME:"All times"},TOTALS:{COLUMNS:{TOTALS:"TOTALS",SPENT:"Spent",CONV:"Conv",IMP:"Imp",CLICKS:"Clicks",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR"}},CAMPAIGN:{COLUMNS:{CAMPAIGN:"Campaign",PLACEMENT:"Placement",NETWORK:"Network+Publisher",SPENT:"Spent",CONV:"Conv",IMP:"Imp",CLICKS:"Clicks",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR",STATS:"Stats"}},CHECKBOX:{IMPRESSIONS:"Impressions",CPA:"CPA",CPC:"CPC",CLICKS:"Clicks",MEDIA_SPENT:"Media Spent",CONVERSIONS:"Conversions",CTR:"CTR"}},CAMP:{NAME:"Campaign"}})}(),function(){"use strict";function e(e,a){var t=this;t.advertiser={},t.a=123,null==e.advertiser?a.go("auth"):t.advertiser.name=e.advertiser.name}e.$inject=["$localStorage","$state"],angular.module("pjtLayout").controller("HomeController",e)}(),function(){"use strict";function e(e){function a(a){return e({method:"GET",url:"/api/v1/campaigns/"+encodeURI(a)}).then(function(e){return e.data})}function t(a,t,i,n){return e({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/campaigns",params:{id:a,from:t,to:i,section:n}}).then(function(e){return{all:[{section:"Android",data:60},{section:"iOs",data:30},{section:"Windows",data:10}],conversions:[{section:"Android",data:23},{section:"iOs",data:72},{section:"Windows",data:5}],cpabuckets:{"cnn.com":"34.12","lion.com":"3.76","tiger.com":"7.97","cat.com":"1.23","dog.com":"16.11","mouse.com":"6.53","rabbit.com":"0.91","bear.com":"1.9","snake.com":"3.7","squirrel.com":"4.78","hamster.com":"0.62"}}})}function i(a,t,i){return e({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/statistics",params:{from:a,to:t,by:i}}).then(function(e){return[{day:"2016-06-27T00:00:00Z",impression:-12,cpa:10,cpc:32,clicks:-5,mediaspent:5,conversions:40,ctr:15},{day:"2016-06-28T00:00:00Z",impression:-32,cpa:30,cpc:12,clicks:1,mediaspent:15,conversions:23,ctr:-10},{day:"2016-06-29T00:00:00Z",impression:-20,cpa:20,cpc:30,clicks:2,mediaspent:5,conversions:33,ctr:10},{day:"2016-06-30T00:00:00Z",impression:-39,cpa:50,cpc:19,clicks:6,mediaspent:55,conversions:87,ctr:-42},{day:"2016-07-01T00:00:00Z",impression:-10,cpa:10,cpc:15,clicks:9,mediaspent:44,conversions:-20,ctr:-57},{day:"2016-07-02T00:00:00Z",impression:10,cpa:10,cpc:15,clicks:8,mediaspent:77,conversions:23,ctr:99},{day:"2016-07-03T00:00:00Z",impression:30,cpa:50,cpc:13,clicks:23,mediaspent:66,conversions:-10,ctr:110},{day:"2016-07-04T00:00:00Z",impression:40,cpa:50,cpc:14,clicks:12,mediaspent:11,conversions:37,ctr:56},{day:"2016-07-05T00:00:00Z",impression:50,cpa:90,cpc:90,clicks:-10,mediaspent:99,conversions:50,ctr:67},{day:"2016-07-06T00:00:00Z",impression:40,cpa:175,cpc:120,clicks:31,mediaspent:-11,conversions:23,ctr:67},{day:"2016-07-07T00:00:00Z",impression:-12,cpa:10,cpc:32,clicks:70,mediaspent:-2,conversions:58,ctr:-20},{day:"2016-07-08T00:00:00Z",impression:-32,cpa:30,cpc:12,clicks:26,mediaspent:5,conversions:21,ctr:-10},{day:"2016-07-09T00:00:00Z",impression:-20,cpa:20,cpc:30,clicks:52,mediaspent:76,conversions:10,ctr:70},{day:"2016-07-10T00:00:00Z",impression:-12,cpa:10,cpc:32,clicks:1,mediaspent:32,conversions:49,ctr:90},{day:"2016-07-11T00:00:00Z",impression:-32,cpa:30,cpc:12,clicks:38,mediaspent:11,conversions:99,ctr:10},{day:"2016-07-12T00:00:00Z",impression:-20,cpa:20,cpc:30,clicks:-16,mediaspent:15,conversions:60,ctr:58},{day:"2016-07-13T00:00:00Z",impression:-39,cpa:50,cpc:19,clicks:-40,mediaspent:46,conversions:23,ctr:78},{day:"2016-07-14T00:00:00Z",impression:-10,cpa:10,cpc:15,clicks:24,mediaspent:68,conversions:-20,ctr:80},{day:"2016-07-15T00:00:00Z",impression:10,cpa:10,cpc:15,clicks:12,mediaspent:49,conversions:-37,ctr:22},{day:"2016-07-16T00:00:00Z",impression:30,cpa:100,cpc:13,clicks:83,mediaspent:36,conversions:-1,ctr:67},{day:"2016-07-17T00:00:00Z",impression:40,cpa:110,cpc:14,clicks:41,mediaspent:28,conversions:65,ctr:-10},{day:"2016-07-18T00:00:00Z",impression:50,cpa:90,cpc:90,clicks:27,mediaspent:95,conversions:23,ctr:88},{day:"2016-07-19T00:00:00Z",impression:40,cpa:95,cpc:120,clicks:83,mediaspent:92,conversions:10,ctr:77},{day:"2016-07-20T00:00:00Z",impression:-12,cpa:10,cpc:32,clicks:-20,mediaspent:15,conversions:7,ctr:66},{day:"2016-07-21T00:00:00Z",impression:-32,cpa:30,cpc:12,clicks:56,mediaspent:54,conversions:34,ctr:-10},{day:"2016-07-22T00:00:00Z",impression:-20,cpa:20,cpc:30,clicks:17,mediaspent:22,conversions:65,ctr:-40},{day:"2016-07-23T00:00:00Z",impression:-12,cpa:10,cpc:32,clicks:22,mediaspent:77,conversions:52,ctr:-70},{day:"2016-07-24T00:00:00Z",impression:-32,cpa:30,cpc:12,clicks:29,mediaspent:90,conversions:23,ctr:-54},{day:"2016-07-25T00:00:00Z",impression:-20,cpa:20,cpc:30,clicks:90,mediaspent:17,conversions:59,ctr:28},{day:"2016-07-26T00:00:00Z",impression:-39,cpa:50,cpc:19,clicks:45,mediaspent:47,conversions:82,ctr:65},{day:"2016-07-27T00:00:00Z",impression:-10,cpa:10,cpc:15,clicks:-30,mediaspent:32,conversions:33,ctr:58}]})}function n(a,t,i){return e({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/campaigns",params:{id:a,from:t,to:i}}).then(function(e){return[{Date:"03/12/2013",Open:"827.90",High:"830.69",Low:"822.31",Close:"825.31",Volume:"1641413"},{Date:"03/13/2013",Open:"826.99",High:"826.99",Low:"817.39",Close:"821.54",Volume:"1651111"},{Date:"03/14/2013",Open:"818.50",High:"820.30",Low:"813.34",Close:"814.30",Volume:"3099791"},{Date:"03/17/2013",Open:"805.00",High:"812.76",Low:"801.47",Close:"807.79",Volume:"1838552"},{Date:"03/18/2013",Open:"811.24",High:"819.25",Low:"806.45",Close:"811.32",Volume:"2098176"},{Date:"03/19/2013",Open:"816.83",High:"817.51",Low:"811.44",Close:"814.71",Volume:"1464122"},{Date:"03/20/2013",Open:"811.29",High:"816.92",Low:"809.85",Close:"811.26",Volume:"1477590"},{Date:"03/21/2013",Open:"814.74",High:"815.24",Low:"809.64",Close:"810.31",Volume:"1491678"},{Date:"03/24/2013",Open:"812.41",High:"819.23",Low:"806.82",Close:"809.64",Volume:"1712684"},{Date:"03/25/2013",Open:"813.50",High:"814.00",Low:"807.79",Close:"812.42",Volume:"1191912"},{Date:"03/26/2013",Open:"806.68",High:"807.00",Low:"801.33",Close:"802.66",Volume:"2163295"},{Date:"03/27/2013",Open:"803.99",High:"805.37",Low:"793.30",Close:"794.19",Volume:"2287712"},{Date:"03/31/2013",Open:"795.01",High:"802.25",Low:"793.25",Close:"801.19",Volume:"1807580"},{Date:"04/01/2013",Open:"804.54",High:"814.83",Low:"804.00",Close:"813.04",Volume:"2041713"},{Date:"04/02/2013",Open:"813.46",High:"814.20",Low:"800.67",Close:"806.20",Volume:"1738753"},{Date:"04/03/2013",Open:"804.25",High:"805.75",Low:"791.30",Close:"795.07",Volume:"2448102"},{Date:"04/04/2013",Open:"786.06",High:"786.99",Low:"776.40",Close:"783.05",Volume:"3433994"},{Date:"04/07/2013",Open:"778.75",High:"779.55",Low:"768.40",Close:"774.85",Volume:"2832718"},{Date:"04/08/2013",Open:"775.50",High:"783.75",Low:"773.11",Close:"777.65",Volume:"2157928"},{Date:"04/09/2013",Open:"782.92",High:"792.35",Low:"776.00",Close:"790.18",Volume:"1978862"},{Date:"04/10/2013",Open:"792.88",High:"793.10",Low:"784.06",Close:"790.39",Volume:"2028766"},{Date:"04/11/2013",Open:"791.99",High:"792.10",Low:"782.93",Close:"790.05",Volume:"1636829"},{Date:"04/14/2013",Open:"785.95",High:"797.00",Low:"777.02",Close:"781.93",Volume:"2454767"},{Date:"04/15/2013",Open:"786.59",High:"796.00",Low:"783.92",Close:"793.37",Volume:"1742374"},{Date:"04/16/2013",Open:"786.75",High:"790.84",Low:"778.10",Close:"782.56",Volume:"2037355"},{Date:"04/17/2013",Open:"785.35",High:"785.80",Low:"761.26",Close:"765.91",Volume:"3328777"}]})}function s(a,t,i){return e({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/campaigns",params:{id:a,from:t,to:i}}).then(function(e){return[{placement:"CNN.com",NetworkPublisher:"Google Adx",conv:"8",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"true",blackList:"false",suspended:"false"}},{placement:"Hidden",NetworkPublisher:"PubMatic",conv:"3",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"false",blackList:"true",suspended:"false"}},{placement:"BBC.com",NetworkPublisher:"OpenX",conv:"1",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"false",blackList:"false",suspended:"true"}},{placement:"msn.com",NetworkPublisher:"Rubicon",conv:"8",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"true",blackList:"false",suspended:"false"}}]})}function c(a,t,i,n,s,c,r,o){return e({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/campaigns",params:{from:a,to:t,skip:i,take:n,sort:s,order:c,stat_by:r,filter:o}}).then(function(e){return e.data})}function r(e,a){var t={"cnn.com":"34.12","lion.com":"3.76","tiger.com":"7.97","cat.com":"1.23","dog.com":"16.11","mouse.com":"6.53","rabbit.com":"0.91","bear.com":"1.9","snake.com":"3.7","squirrel.com":"4.78","hamster.com":"0.62"},i=[];for(var n in t)Number(t[n])>=Number(e)&&t[n]<Number(a)&&i.push(n);return i}var o=this;o.cpaReport=n,o.nameCampaigns=a,o.statsCampaigns=c,o.statsChart=i,o.cpaBuckets=r,o.campaignDetails=t,o.campaignDomains=s}e.$inject=["$http"],angular.module("pjtLayout").service("Camp",e)}(),function(){"use strict";function e(e,a,t,i,n,s){var c=this;c.Camp=n,c.multipleTotalCount=0,c.checkChart=[],c.by="";var r=i.instant;c.campName=s.campaign,null==t.seriesCamp&&(t.seriesCamp=[{argumentField:"day",valueField:"impression"},{argumentField:"day",valueField:"cpa"},{argumentField:"day",valueField:"cpc"},{argumentField:"day",valueField:"clicks"},{argumentField:"day",valueField:"mediaspent"},{argumentField:"day",valueField:"conversions"},{argumentField:"day",valueField:"ctr"}]);var o=[];if(null==t.checkCharCamp){t.checkCharCamp={impressions:!0,cpa:!0,cpc:!0,clicks:!0,mediaspent:!0,conversions:!0,ctr:!0},o=[];for(var l in t.checkCharCamp)1==t.checkCharCamp[l]&&o.push(l);c.by=o.join()}else{o=[];for(var l in t.checkCharCamp)1==t.checkCharCamp[l]&&o.push(l);c.by=o.join()}c.totals=[],c.chartStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return c.Camp.statsChart(c.dataStart,c.dataEnd,c.by).then(function(e){return e})}}),c.boxPlotStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return c.Camp.cpaReport(c.dataStart,c.dataEnd).then(function(e){return e})}}),c.gridStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return c.Camp.campaignDomains(c.dataStart,c.dataEnd).then(function(e){return t.gridStore=e,e})}}),c.detailsStoreAll=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return c.Camp.campaignDetails(c.dataStart,c.dataEnd,c.by).then(function(e){return e.all})}}),c.detailsStoreConversion=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return c.Camp.campaignDetails(c.dataStart,c.dataEnd,c.by).then(function(e){return e.conversions})}}),c.multipleStore=new e.DevExpress.data.CustomStore({totalCount:function(){return c.multipleTotalCount},load:function(e){return null==e.take&&(e.take=20),null==e.skip&&(e.skip=0),null==e.sort&&(e.sort="campaign"),null==e.order&&(e.order="DESC"),c.Camp.statsCampaigns(c.dataStart,c.dataEnd,e.skip,e.take,e.sort,e.order,c.by,e.filter).then(function(e){return c.multipleTotalCount=e.totalCount,e.campaigns})}}),c.types=["line","stackedLine","fullStackedLine"],c.series=[{argumentField:"day",valueField:"impression"},{argumentField:"day",valueField:"cpa"},{argumentField:"day",valueField:"cpc"},{argumentField:"day",valueField:"clicks"},{argumentField:"day",valueField:"mediaspent"},{argumentField:"day",valueField:"conversions"},{argumentField:"day",valueField:"ctr"}],c.chartOptionsFirst={argumentAxis:{valueMarginsEnabled:!1,discreteAxisDivisionMode:"crossLabels",grid:{visible:!0}},crosshair:{enabled:!0,color:"deepskyblue",label:{visible:!0}},commonSeriesSettings:{point:{size:3,hoverStyle:{border:{visible:!0,width:2},size:5}}},size:{width:500,height:230},bindingOptions:{dataSource:"camp.chartStore"},series:t.seriesCamp,legend:{visible:!1},loadingIndicator:{show:!0,text:"Creating a chart..."}},c.rangeOptionsFirst={size:{height:100,width:500},margin:{left:10},scale:{minorTickCount:1},bindingOptions:{dataSource:"camp.chartStore"},chart:{series:t.seriesCamp},behavior:{callSelectedRangeChanged:"onMoving"},onSelectedRangeChanged:function(e){var a=$("#zoomedContainerFirst #zoomedChartFirst").dxChart("instance");a.zoomArgument(e.startValue,e.endValue)}},c.impressions={text:r("MAIN.CHECKBOX.IMPRESSIONS"),value:t.checkCharCamp.impressions?!0:!1,onValueChanged:function(e){if(1==e.value)t.checkCharCamp.impressions=!0,t.seriesCamp.push({argumentField:"day",valueField:"impression"}),a.reload();else{t.checkCharCamp.impressions=!1;for(var i in t.seriesCamp)"impression"==t.seriesCamp[i].valueField&&t.seriesCamp.splice(i,1);a.reload()}}},c.CPA={text:r("MAIN.CHECKBOX.CPA"),value:t.checkCharCamp.cpa?!0:!1,onValueChanged:function(e){if(1==e.value)t.checkCharCamp.cpa=!0,t.seriesCamp.push({argumentField:"day",valueField:"cpa"}),a.reload();else{t.checkCharCamp.cpa=!1;for(var i in t.seriesCamp)"cpa"==t.seriesCamp[i].valueField&&t.seriesCamp.splice(i,1);a.reload()}}},c.CPC={text:r("MAIN.CHECKBOX.CPC"),value:t.checkCharCamp.cpc?!0:!1,onValueChanged:function(e){if(1==e.value)t.checkCharCamp.cpc=!0,t.seriesCamp.push({argumentField:"day",valueField:"cpc"}),a.reload();else{t.checkCharCamp.cpc=!1;for(var i in t.seriesCamp)"cpc"==t.seriesCamp[i].valueField&&t.seriesCamp.splice(i,1);a.reload()}}},c.clicks={text:r("MAIN.CHECKBOX.CLICKS"),value:t.checkCharCamp.clicks?!0:!1,onValueChanged:function(e){if(1==e.value)t.checkCharCamp.clicks=!0,t.seriesCamp.push({argumentField:"day",valueField:"clicks"}),a.reload();else{t.checkCharCamp.clicks=!1;for(var i in t.seriesCamp)"clicks"==t.seriesCamp[i].valueField&&t.seriesCamp.splice(i,1);a.reload()}}},c.media={text:r("MAIN.CHECKBOX.MEDIA_SPENT"),value:t.checkCharCamp.mediaspent?!0:!1,onValueChanged:function(e){if(1==e.value)t.checkCharCamp.mediaspent=!0,t.seriesCamp.push({argumentField:"day",valueField:"mediaspent"}),a.reload();else{t.checkCharCamp.mediaspent=!1;for(var i in t.seriesCamp)"mediaspent"==t.seriesCamp[i].valueField&&t.seriesCamp.splice(i,1);a.reload()}}},c.conversions={text:r("MAIN.CHECKBOX.CONVERSIONS"),value:t.checkCharCamp.conversions?!0:!1,onValueChanged:function(e){if(1==e.value)t.checkCharCamp.conversions=!0,t.seriesCamp.push({argumentField:"day",valueField:"conversions"}),a.reload();else{t.checkCharCamp.conversions=!1;for(var i in t.seriesCamp)"conversions"==t.seriesCamp[i].valueField&&t.seriesCamp.splice(i,1);a.reload()}}},c.CTR={text:r("MAIN.CHECKBOX.CTR"),value:t.checkCharCamp.ctr?!0:!1,onValueChanged:function(e){if(1==e.value)t.checkCharCamp.ctr=!0,t.seriesCamp.push({argumentField:"day",valueField:"ctr"}),a.reload();else{t.checkCharCamp.ctr=!1;for(var i in t.seriesCamp)"ctr"==t.seriesCamp[i].valueField&&t.seriesCamp.splice(i,1);a.reload()}}},null==t.dataStart&&null==t.dataEnd?(t.dataStart=e.moment({hour:"00"}).subtract(1,"day").unix(),t.dataEnd=e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):(c.dataStart=t.dataStart,c.dataEnd=t.dataEnd),null==t.SelectedTime&&(t.SelectedTime=0);var d=[{ID:0,Name:r("MAIN.DATE_PICKER.YESTERDAY"),dataStart:e.moment({hour:"00"}).subtract(1,"day").unix(),dataEnd:e.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()},{ID:1,Name:r("MAIN.DATE_PICKER.LAST_3_DAYS"),dataStart:e.moment({hour:"00"}).subtract(3,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:2,Name:r("MAIN.DATE_PICKER.LAST_7_DAYS"),dataStart:e.moment({hour:"00"}).subtract(7,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:3,Name:r("MAIN.DATE_PICKER.LAST_14_DAYS"),dataStart:e.moment({hour:"00"}).subtract(14,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:4,Name:r("MAIN.DATE_PICKER.LAST_21_DAYS"),dataStart:e.moment({hour:"00"}).subtract(21,"day").unix(),dataEnd:e.moment({hour:"00"}).unix()},{ID:5,Name:r("MAIN.DATE_PICKER.CURRENT_MONTH"),dataStart:e.moment().startOf("month").unix(),dataEnd:e.moment().unix()},{ID:6,Name:r("MAIN.DATE_PICKER.LAST_MONTH"),dataStart:e.moment().subtract(1,"month").startOf("month").unix(),dataEnd:e.moment().subtract(1,"month").endOf("month").unix()},{ID:7,Name:r("MAIN.DATE_PICKER.LAST_90_DAYS"),dataStart:e.moment({hour:"00"}).subtract(90,"day").unix(),dataEnd:e.moment().unix()},{ID:8,Name:r("MAIN.DATE_PICKER.ALL_TIME"),dataStart:0,dataEnd:e.moment().unix()}];c.datePiker={items:d,displayExpr:"Name",valueExpr:"ID",value:d[t.SelectedTime].ID,onValueChanged:function(e){t.SelectedTime=e.value,t.dataStart=d[e.value].dataStart,t.dataEnd=d[e.value].dataEnd,a.reload()}},c.chartOptionsSecond={bindingOptions:{dataSource:"camp.boxPlotStore"},commonSeriesSettings:{type:"candleStick"},size:{height:205,width:500},valueAxis:{valueType:"numeric"},argumentAxis:{valueMarginsEnabled:!1,grid:{visible:!0},label:{visible:!1},argumentType:"datetime"},tooltip:{enabled:!0},legend:{visible:!1},loadingIndicator:{show:!0,text:"Creating a chart..."},useAggregation:!0,series:[{openValueField:"Open",highValueField:"High",lowValueField:"Low",closeValueField:"Close",argumentField:"Date"}]},c.rangeOptionsSecond={size:{height:100,width:500},margin:{left:10},scale:{minorTickCount:"day",valueType:"date",tickInterval:"day"},bindingOptions:{dataSource:"camp.boxPlotStore"},chart:{series:{type:"line",valueField:"Open",argumentField:"Date",placeholderHeight:20},useAggregation:!0,valueAxis:{valueType:"numeric"}},behavior:{callSelectedRangeChanged:"onMoving",snapToTicks:!1},onSelectedRangeChanged:function(e){var a=$("#zoomedContainerSecond #zoomedChartSecond").dxChart("instance");a.zoomArgument(new Date(e.startValue),new Date(e.endValue))}},c.selectedItems=[],c.chartOptionsFuncgrid=[],null==t.boxPlotData&&(t.boxPlotData=c.boxPlotData),c.state="",c.selectCell={dataSource:[{name:"White List",state:"whiteList"},{name:"Black List",state:"blackList"},{name:"Suspended",state:"suspended"}],placeholder:"Select a state",displayExpr:"name",valueExpr:c.state,onSelectionChanged:function(e){var a=$("#gridContainer2")[0].querySelectorAll('[aria-selected="true"]');if(console.log(e.selectedItem.state),a[0]){for(var t=[],i=0;i<a.length;i++)t.push(a[i].firstChild.innerText);console.log(t)}}},c.dataGridOptionsCampaign={onInitialized:function(e){c.dataGridOptionsMultipleFunc=e.component,c.dataGridOptionsMultipleFunc._controllers.columns._commandColumns[1].visibleIndex=9},onRowPrepared:function(e){if(c.objectData=e,"data"==c.objectData.rowType){var a=e.rowElement[0].childNodes[9],t=e.data.state;"true"==t.whiteList&&a.classList.add("active-white"),"true"==t.blackList&&a.classList.add("active-black"),"true"==t.suspended&&a.classList.add("active-suspended")}},showBorders:!0,alignment:"left",headerFilter:{visible:!0},bindingOptions:{dataSource:"camp.gridStore",allowColumnResizing:"true"},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:r("MAIN.CAMPAIGN.COLUMNS.PLACEMENT"),dataField:"placement"},{caption:r("MAIN.CAMPAIGN.COLUMNS.NETWORK"),dataField:"NetworkPublisher"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:r("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{caption:"State",width:300,columnIndex:16,headerCellTemplate:"headerCellTemplate",cellTemplate:function(e,a){$("<div />").dxButton({text:"white list",height:30,width:89,onClick:function(e){console.log(a.data.state);var t=e.element[0].parentNode;console.log(t),t.classList.contains("active-white")?(t.classList.remove("active-white"),t.classList.add("unactive-white"),
a.data.state.whiteList="false"):t.classList.contains("active-white")||(t.classList.remove("unactive-white"),t.classList.add("active-white"),a.data.state.whiteList="true",a.data.state.suspended="false",a.data.state.blackList="false",t.classList.remove("active-black"),t.classList.remove("active-suspended"))}}).addClass("white-list").appendTo(e),$("<div />").dxButton({text:"black list",height:30,width:89,onClick:function(e){var t=e.element[0].parentNode;t.classList.contains("active-black")?(t.classList.remove("active-black"),t.classList.add("unactive-black"),a.data.state.blackList="false"):t.classList.contains("active-black")||(t.classList.remove("unactive-black"),t.classList.add("active-black"),a.data.state.blackList="true",a.data.state.suspended="false",a.data.state.whiteList="false",t.classList.remove("active-white"),t.classList.remove("active-suspended"))}}).addClass("black-list").appendTo(e),$("<div />").dxButton({text:"suspended",height:30,width:95,onClick:function(e){var t=e.element[0].parentNode;t.classList.contains("active-suspended")?(t.classList.remove("active-suspended"),t.classList.add("unactive-suspended"),a.data.state.suspended="false"):t.classList.contains("active-suspended")||(t.classList.remove("unactive-suspended"),t.classList.add("active-suspended"),a.data.state.suspended="true",a.data.state.whiteList="false",a.data.state.blackList="false",t.classList.remove("active-white"),t.classList.remove("active-black"))}}).addClass("suspended").appendTo(e)}}],selection:{mode:"multiple",showCheckBoxesMode:"always"},onSelectionChanged:function(e){c.selectedItems=e.selectedRowsData,c.disabled=!c.selectedItems.length}},c.rangeFirstChartOptions={margin:{left:50},size:{height:150,width:450},scale:{startValue:new Date(t.dataStart),endValue:new Date(t.dataEnd),minorTickInterval:"day",minRange:"hour",maxRange:"month",minorTick:{visible:!1}},sliderMarker:{format:"monthAndDay"}},c.rangeSecondChartOptions={margin:{left:50,top:12},size:{height:150,width:450},scale:{startValue:new Date(t.dataStart),endValue:new Date(t.dataEnd),minorTickInterval:"day",minRange:"day",maxRange:"month",minorTick:{visible:!1}},sliderMarker:{format:"monthAndDay"}},c.ctrlBbtns={placement:{btn:"Placement",header:"Placement"},creativeId:{btn:"creative_id",header:"creative_id"},creativeSize:{btn:"creative_size",header:"creative_size"},viewability:{btn:"viewability",header:"viewability"},os:{btn:"OS",header:"Operating System used"},carrier:{btn:"carrier",header:"carrier"},networkSeller:{btn:"network(seller)",header:"network (seller)"},connectionType:{btn:"connection_type",header:"connection_type"},device:{btn:"device",header:"device"},seller:{btn:"seller",header:"Seller"}},c.pieChartHeader=t.pieChartHeader||c.ctrlBbtns.os.header,c.btnsNodesArray=$(".label-container")[0].children;for(var m in c.ctrlBbtns)c.ctrlBbtns[m].header==c.pieChartHeader&&(c.selectedSection=c.ctrlBbtns[m].btn);Array.prototype.forEach.call(c.btnsNodesArray,function(e){e.name==c.selectedSection&&e.classList.add("nav-btn-active")}),c.selectInfoBtn=function(e,a){c.pieChartHeader=a,t.pieChartHeader=c.pieChartHeader,Array.prototype.forEach.call(c.btnsNodesArray,function(e){e.classList.contains("nav-btn-active")&&e.classList.remove("nav-btn-active")}),t.pieChartHeader=c.pieChartHeader,e.currentTarget.classList.add("nav-btn-active")},c.targetCpa||(c.targetCpa=t.targetCpa||3,t.targetCpa=c.targetCpa),c.backetsRanges={first:{min:0,max:Number(c.targetCpa).toFixed(1)},second:{min:Number(c.targetCpa).toFixed(1),max:Number(2*c.targetCpa).toFixed(1)},third:{min:Number(2*c.targetCpa).toFixed(1),max:Number(3*c.targetCpa).toFixed(1)},fourth:{min:Number(3*c.targetCpa).toFixed(1),max:Number(1e3*c.targetCpa).toFixed(1)}},c.targetCpaChange=function(e){var a=Number(e.currentTarget.value);return t.targetCpa=a,c.backetsRanges={first:{min:0,max:a.toFixed(1)},second:{min:a.toFixed(1),max:(2*a).toFixed(1)},third:{min:(2*a).toFixed(1),max:(3*a).toFixed(1)},fourth:{min:(3*a).toFixed(1),max:(1e3*a).toFixed(1)}},c.cpaArrayFirst=n.cpaBuckets(c.backetsRanges.first.min,c.backetsRanges.first.max),c.cpaArraySecond=n.cpaBuckets(c.backetsRanges.second.min,c.backetsRanges.second.max),c.cpaArrayThird=n.cpaBuckets(c.backetsRanges.third.min,c.backetsRanges.third.max),c.cpaArrayFourth=n.cpaBuckets(c.backetsRanges.fourth.min,c.backetsRanges.fourth.max),c.backetsRanges},c.cpaArrayFirst=n.cpaBuckets(c.backetsRanges.first.min,c.backetsRanges.first.max),c.cpaArraySecond=n.cpaBuckets(c.backetsRanges.second.min,c.backetsRanges.second.max),c.cpaArrayThird=n.cpaBuckets(c.backetsRanges.third.min,c.backetsRanges.third.max),c.cpaArrayFourth=n.cpaBuckets(c.backetsRanges.fourth.min,c.backetsRanges.fourth.max),c.pieChartAll={title:{text:"All",font:{size:20},margin:{bottom:1}},bindingOptions:{dataSource:"camp.detailsStoreAll"},series:[{argumentField:"section",valueField:"data",label:{visible:!0,connector:{visible:!0,width:.5},format:"fixedPoint",customizeText:function(e){return e.argumentText+": "+e.valueText+"%"}},smallValuesGrouping:{mode:"smallValueThreshold",threshold:4.5}}],legend:{horizontalAlignment:"center",verticalAlignment:"bottom"},size:{width:370,height:300}},c.pieChartConversions={title:{text:"Conversions",font:{size:20},margin:{bottom:1}},bindingOptions:{dataSource:"camp.detailsStoreConversion"},series:[{argumentField:"section",valueField:"data",label:{visible:!0,connector:{visible:!0,width:.5},format:"fixedPoint",customizeText:function(e){return e.argumentText+": "+e.valueText+"%"}},smallValuesGrouping:{mode:"smallValueThreshold",threshold:4.5}}],legend:{horizontalAlignment:"center",verticalAlignment:"bottom"},size:{width:370,height:300}}}e.$inject=["$window","$state","$localStorage","$translate","Camp","Campaign"],angular.module("pjtLayout").controller("CampaignController",e)}(),function(){"use strict";function e(e){function a(){return e({method:"GET",url:"/api/v1/advertisers"}).then(function(e){return e.data})}var t=this;t.advertisersList=a}e.$inject=["$http"],angular.module("pjtLayout").service("Auth",e)}(),function(){"use strict";function e(e,a,t,i,n){var s=this,c=i.instant;s.Auth=n,s.addButton={text:c("AUTH.GO_BUTTON"),onClick:function(){t.advertiser=s.selectedService,a.go("home.main")}},s.selectAdvertisersStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return s.Auth.advertisersList().then(function(e){return e})}}),s.selectAdvertisers={bindingOptions:{dataSource:"auth.selectAdvertisersStore",value:"auth.selectedService"},displayExpr:"name",width:"200px"}}e.$inject=["$window","$state","$localStorage","$translate","Auth"],angular.module("pjtLayout").controller("AuthController",e)}(),function(){"use strict";function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("pjtLayout").run(e)}(),function(){"use strict";function e(e,a){e.state("auth",{url:"/",templateUrl:"app/auth/auth.html",controller:"AuthController",controllerAs:"auth"}).state("home",{url:"/home",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"home"}).state("home.main",{url:"/main",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("home.campaign",{url:"/campaign/:id",templateUrl:"app/campaign/camp.html",controller:"CampaignController",controllerAs:"camp",resolve:{Campaign:["Camp","$stateParams",function(e,a){return a.id||$stat.go(home.main),e.nameCampaigns(a.id).then(function(e){return e})}]}}),a.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("pjtLayout").config(e)}(),function(){"use strict";angular.module("pjtLayout")}(),function(){"use strict";function e(e,a,t,i,n){e.debugEnabled(!0),t.translations("en",n),t.translations("ru",i),t.useSanitizeValueStrategy("escape"),t.preferredLanguage("ru"),t.useLocalStorage(),t.storageKey("TRANSLATE_LANG_KEY"),a.allowHtml=!0,a.timeOut=3e3,a.positionClass="toast-top-right",a.preventDuplicates=!0,a.progressBar=!0}e.$inject=["$logProvider","toastrConfig","$translateProvider","RussianTranslations","EnglishTranslations"],angular.module("pjtLayout").config(e)}(),angular.module("pjtLayout").run(["$templateCache",function(e){e.put("app/auth/auth.html",'<div class=location><a ng-click="root.changeLang(\'ru\')"><i class="fa fa-globe fa-fw"></i> Русский </a>/ <a ng-click="root.changeLang(\'en\')"><i class="fa fa-globe fa-fw"></i> English</a></div><div class=container><div class=row><div class="Absolute-Center is-Responsive"><div id=logo-container></div><div class="col-sm-12 col-md-10 col-md-offset-1"><div class=mode-button><div dx-select-box=auth.selectAdvertisers></div><div dx-button=auth.addButton class=add-advertisers></div></div></div></div></div></div>'),e.put("app/home/home.html",'<div id=wrapper><!-- Brand and toggle get grouped for better mobile display --><div class=row><div class="left-nav col-lg-2 col-md-2 col-md-2"><ul class="nav nav-list"><li class=nav-header><a ui-sref=home.main translate=INDEX.LEFT_NAV.HOME></a></li><li class=active><a ui-sref=home.campaign translate=INDEX.LEFT_NAV.CAMPAIGN>Campaign</a></li><li><a href=#/ translate=INDEX.LEFT_NAV.OPTIMIZER>Optimizer</a></li><li><a href=#/ translate=INDEX.LEFT_NAV.BILLING>Billing</a></li></ul></div><div class="main-nav navbar-header col-lg-10 col-md-10 col-sm-10"><button type=button data-target=#navbarCollapse data-toggle=collapse class=navbar-toggle><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href=# class=navbar-brand>{{ \'INDEX.ADVERTISER_TITLE\' | translate }} {{ home.advertiser.name }}</a><div class=location><a ng-click="root.changeLang(\'ru\')"><i class="fa fa-globe fa-fw"></i> Русский </a>/ <a ng-click="root.changeLang(\'en\')"><i class="fa fa-globe fa-fw"></i> English</a></div></div></div><ui-view></ui-view></div>'),e.put("app/main/main.html",'<div class="container-home col-md-10 col-lg-offset-2 col-md-10 col-lg-offset-2"><h1 translate=MAIN.HOME>Home</h1><div class="col-md-3 col-md-offset-8 piker"><div dx-select-box=main.datePiker></div></div><div class=row><div id=container><div class="col-md-6 contLeft"><div dx-chart=main.chartOptions id=chart></div><div class=col-md-12><div class=checkbox-container><label class=label-checkbox><div dx-check-box=main.impressions></div></label><label class=label-checkbox><div dx-check-box=main.CPA></div></label><label class=label-checkbox><div dx-check-box=main.CPC></div></label><label class=label-checkbox><div dx-check-box=main.clicks></div></label></div><div class=checkbox-container><label class=label-checkbox><div dx-check-box=main.media></div></label><label class=label-checkbox><div dx-check-box=main.conversions></div></label><label class=label-checkbox><div dx-check-box=main.CTR></div></label></div></div></div><div id=visualMap></div></div></div><div class="row first-grid table-responsive"><table class="table table-bordered"><tr><td translate=MAIN.TOTALS.COLUMNS.TOTALS></td><td translate=MAIN.TOTALS.COLUMNS.SPENT></td><td translate=MAIN.TOTALS.COLUMNS.CONV></td><td translate=MAIN.TOTALS.COLUMNS.IMP></td><td translate=MAIN.TOTALS.COLUMNS.CPC></td><td translate=MAIN.TOTALS.COLUMNS.CPM></td><td translate=MAIN.TOTALS.COLUMNS.CVR></td><td translate=MAIN.TOTALS.COLUMNS.CTR></td></tr><tr><td></td><td>{{main.totals.spent}}</td><td>{{main.totals.conv}}</td><td>{{main.totals.imp}}</td><td>{{main.totals.cpc}}</td><td>{{main.totals.cpm}}</td><td>{{main.totals.cvr}}</td><td>{{main.totals.ctr}}</td></tr></table></div><div class="row second-grid"><div id=gridContainer2 dx-data-grid=main.dataGridOptionsMultiple></div></div></div>'),e.put("app/campaign/camp.html",'<div class="container-camp col-md-10 col-sm-10 col-md-offset-2 col-sm-offset-2"><div class=row><span translate=CAMP.NAME class=camp-header></span><span class=camp-header>: {{camp.campName}}</span></div><div class="col-md-3 col-md-offset-8 col-sm-3 col-sm-offset-8 piker"><div dx-select-box=camp.datePiker></div></div><div class="row camp-content1"><div><div class="row contLeft"><div id=zoomedContainerFirst class=first-chart><div id=zoomedChartFirst dx-chart=camp.chartOptionsFirst></div><div dx-range-selector=camp.rangeOptionsFirst></div></div><div class="col-md-2 col-sm-2 checkbox-container"><div><label class=label-checkbox><div dx-check-box=camp.impressions></div></label><label class=label-checkbox><div dx-check-box=camp.CPA></div></label><label class=label-checkbox><div dx-check-box=camp.CPC></div></label><label class=label-checkbox><div dx-check-box=camp.clicks></div></label><label class=label-checkbox><div dx-check-box=camp.media></div></label><label class=label-checkbox><div dx-check-box=camp.conversions></div></label><label class=label-checkbox><div dx-check-box=camp.CTR></div></label></div></div><div id=zoomedContainerSecond><div id=zoomedChartSecond dx-chart=camp.chartOptionsSecond></div><div dx-range-selector=camp.rangeOptionsSecond></div></div></div></div></div><div class="row first-grid"><div id=gridContainer2 dx-data-grid=camp.dataGridOptionsCampaign><div data-options="dxTemplate: {name: \'headerCellTemplate\'}"><div ng-model=main.state dx-select-box=$parent.camp.selectCell></div></div></div></div><div class=second-container><div class=label-container><input type=button ng-click="camp.selectInfoBtn($event, camp.ctrlBbtns.placement.header)" name=Placement value={{camp.ctrlBbtns.placement.btn}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, camp.ctrlBbtns.creativeId.header)" name=creative_id value={{camp.ctrlBbtns.creativeId.btn}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, camp.ctrlBbtns.creativeSize.header)" name=creative_size value={{camp.ctrlBbtns.creativeSize.btn}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, camp.ctrlBbtns.viewability.header)" name=viewability value={{camp.ctrlBbtns.viewability.btn}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, camp.ctrlBbtns.os.header)" name=OS value={{camp.ctrlBbtns.os.btn}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, camp.ctrlBbtns.carrier.header)" name=carrier value={{camp.ctrlBbtns.carrier.btn}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, camp.ctrlBbtns.networkSeller.header)" name=network(seller) value={{camp.ctrlBbtns.networkSeller.btn}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, camp.ctrlBbtns.connectionType.header)" name=connection_type value={{camp.ctrlBbtns.connectionType.btn}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, camp.ctrlBbtns.device.header)" name=device value={{camp.ctrlBbtns.device.btn}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, camp.ctrlBbtns.seller.header)" name=Seller value={{camp.ctrlBbtns.seller.btn}} class=nav-btn></div><div class=pie-chart-container><div class=header-pie-chart><div class=pie-chart-header><h4>{{camp.pieChartHeader}}</h4></div><div class=target-cpa-container><div class=input-target-cpa-text>target CPA</div><input class=input-target-cpa type=text ng-blur=camp.targetCpaChange($event) ng-keyup="$event.keyCode == 13 && camp.targetCpaChange($event)" ng-model=camp.targetCpa maxlength=5></div></div><div class=pie-charts><div class=chart-container dx-pie-chart=camp.pieChartAll></div><div class=chart-container dx-pie-chart=camp.pieChartConversions></div></div><div class=buckets><div><h3 class=header-buckets>CPA buckets</h3></div><div class=bucket-item><div><span class=first>${{camp.backetsRanges.first.min}}-${{camp.backetsRanges.first.max}}</span></div><div class=bucket-item-list><div ng-repeat="item in camp.cpaArrayFirst">{{item}}</div></div></div><div class=bucket-item><div><span class=second>${{camp.backetsRanges.second.min}}-${{camp.backetsRanges.second.max}}</span></div><div class=bucket-item-list><div ng-repeat="item in camp.cpaArraySecond">{{item}}</div></div></div><div class=bucket-item><div><span class=third>${{camp.backetsRanges.third.min}}-${{camp.backetsRanges.third.max}}</span></div><div class=bucket-item-list><div ng-repeat="item in camp.cpaArrayThird">{{item}}</div></div></div><div class=bucket-item><div><span class=fourth>${{camp.backetsRanges.fourth.min}}+</span></div><div class=bucket-item-list><div ng-repeat="item in camp.cpaArrayFourth">{{item}}</div></div></div></div></div></div></div>')}]);