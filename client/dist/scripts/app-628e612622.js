function RootController(t,e,a,i){var n=this;t.Globalize.culture(i.get("TRANSLATE_LANG_KEY")),n.changeLang=function(i){a.use(i),t.Globalize.culture(i),e.reload()},n.advertiser={name:"Adam"}}RootController.$inject=["$window","$state","$translate","$translateLocalStorage"],function(){"use strict";angular.module("pjtLayout",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngStorage","ui.router","ui.bootstrap","toastr","dx","pascalprecht.translate","chart.js"])}(),angular.module("pjtLayout").controller("RootController",RootController),function(){"use strict";function t(t){function e(e,a,i){return t({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/statistics",params:{from:e,to:a,by:i}}).then(function(t){return t.data})}function a(e,a){return t({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/totals",params:{from:e,to:a}}).then(function(t){return t.data})}function i(e,a,i,n,o,s,r,l){return t({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/campaigns",params:{from:e,to:a,skip:i,take:n,sort:o,order:s,stat_by:r,filter:l}}).then(function(t){return t.data})}function n(e,a){return t({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/map/clicks",params:{from:e,to:a}}).then(function(t){return t.data})}var o=this;o.statsCampaigns=i,o.statsTotals=a,o.statsChart=e,o.statsMap=n}t.$inject=["$http"],angular.module("pjtLayout").service("Main",t)}(),function(){"use strict";function t(t,e,a,i,n,o){var s=this;s.Main=o;var r=i.instant;null==a.dataStart&&null==a.dataEnd?(a.dataStart=t.moment({hour:"00"}).subtract(1,"day").unix(),a.dataEnd=t.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):(s.dataStart=a.dataStart,s.dataEnd=a.dataEnd),null==a.SelectedTime&&(a.SelectedTime=0);var l=[{ID:0,Name:r("MAIN.DATE_PICKER.YESTERDAY"),dataStart:t.moment({hour:"00"}).subtract(1,"day").unix(),dataEnd:t.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()},{ID:1,Name:r("MAIN.DATE_PICKER.LAST_7_DAYS"),dataStart:t.moment({hour:"00"}).subtract(7,"day").unix(),dataEnd:t.moment({hour:"00"}).unix()},{ID:2,Name:r("MAIN.DATE_PICKER.CURRENT_WEEK"),dataStart:t.moment().startOf("week").unix(),dataEnd:t.moment().unix()},{ID:3,Name:r("MAIN.DATE_PICKER.LAST_WEEK"),dataStart:t.moment().startOf("week").subtract(1,"week").unix(),dataEnd:t.moment().startOf("week").unix()},{ID:4,Name:r("MAIN.DATE_PICKER.CURRENT_MONTH"),dataStart:t.moment().startOf("month").unix(),dataEnd:t.moment().unix()},{ID:5,Name:r("MAIN.DATE_PICKER.LAST_MONTH"),dataStart:t.moment().subtract(1,"month").startOf("month").unix(),dataEnd:t.moment().subtract(1,"month").endOf("month").unix()},{ID:6,Name:r("MAIN.DATE_PICKER.CUSTOM"),dataStart:"",dataEnd:""}];s.datePiker={items:l,displayExpr:"Name",valueExpr:"ID",value:l[a.SelectedTime].ID,onValueChanged:function(t){n.info(l[t.value]),a.SelectedTime=t.value,a.dataStart=l[t.value].dataStart,a.dataEnd=l[t.value].dataEnd,e.reload()}},s.result={},s.totals=[],s.totalsStore=new t.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return s.Main.statsTotals(s.dataStart,s.dataEnd).then(function(t){return[t]})}}),s.multipleStore=new t.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return s.Main.statsCampaigns(s.dataStart,s.dataEnd).then(function(t){return t.campaigns})}}),s.chartStore=new t.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return s.Main.statsChart(s.dataStart,s.dataEnd).then(function(t){return t.statistics})}}),s.checkboxData=[],s.dataGridOptionsSingle={bindingOptions:{dataSource:"main.totalsStore"},showBorders:!0,alignment:"left",howBorders:!0,columns:[{caption:r("MAIN.TOTALS.COLUMNS.TOTALS"),dataField:"TOTALS"},{caption:r("MAIN.TOTALS.COLUMNS.SPENT"),dataField:"spend"},{caption:r("MAIN.TOTALS.COLUMNS.CONV"),dataField:"conv"},{caption:r("MAIN.TOTALS.COLUMNS.IMP"),dataField:"imp"},{caption:r("MAIN.TOTALS.COLUMNS.CLICKS"),dataField:"clicks"},{caption:r("MAIN.TOTALS.COLUMNS.CPC"),dataField:"cpc"},{caption:r("MAIN.TOTALS.COLUMNS.CPM"),dataField:"cpm"},{caption:r("MAIN.TOTALS.COLUMNS.CVR"),dataField:"cvr"},{caption:r("MAIN.TOTALS.COLUMNS.CTR"),dataField:"ctr"}]},s.selectedItems=[],s.chartOptionsFuncgrid=[],s.dataGridOptionsMultiple={bindingOptions:{dataSource:"main.multipleStore"},onInitialized:function(t){s.dataGridOptionsMultipleFunc=t.component,s.dataGridOptionsMultipleFunc._controllers.columns._commandColumns[1].visibleIndex=15},showBorders:!0,alignment:"left",headerFilter:{visible:!0},paging:{pageSize:3},pager:{showPageSizeSelector:!0,allowedPageSizes:[3,10,20],showInfo:!0},howBorders:!0,showRowLines:!0,columns:[{caption:r("MAIN.CAMPAIGN.COLUMNS.CAMPAIGN"),dataField:"campaign"},{caption:r("MAIN.CAMPAIGN.COLUMNS.SPENT"),dataField:"spend"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:r("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{width:200,dataField:r("MAIN.CAMPAIGN.COLUMNS.STATS"),cellTemplate:function(e,a){var i={onInitialized:function(t){s.chartOptionsFuncgrid[a.rowIndex]=t.component},dataSource:a.data.statistics,size:{height:80},commonSeriesSettings:{argumentField:"day",type:"line",point:{size:2,hoverStyle:{border:{visible:!0,width:1},size:4}}},commonAxisSettings:{label:{visible:!1},grid:{visible:!1}},argumentAxis:{valueMarginsEnabled:!1,discreteAxisDivisionMode:"crossLabels",grid:{visible:!1},label:{visible:!1},minorGrid:{visible:!1},minorTick:{visible:!1},tick:{visible:!1}},series:[{valueField:"impressions",name:"Impressions"},{valueField:"cpa",name:"CPA"},{valueField:"cpc",name:"CPC"},{valueField:"clicks",name:"clicks"},{valueField:"media",name:"media"},{valueField:"conversions",name:"conversions"},{valueField:"ctr",name:"CTR"}],legend:{visible:!1},tooltip:{enabled:!0,customizeTooltip:function(t){return{text:t.valueText}}}};e.addClass("img-container"),t.angular.element('<div id="chartMulti'+a.rowIndex+'" ></div>').appendTo(e),t.$("#chartMulti"+a.rowIndex).dxChart(i).dxChart("instance")}}],selection:{mode:"multiple"},onSelectionChanged:function(t){s.selectedItems=t.selectedRowsData,s.disabled=!s.selectedItems.length}},s.types=["line","stackedLine","fullStackedLine"];var c=[{valueField:"impressions",name:"Impressions"},{valueField:"cpa",name:"CPA"},{valueField:"cpc",name:"CPC"},{valueField:"clicks",name:"clicks"},{valueField:"media",name:"media"},{valueField:"conversions",name:"conversions"},{valueField:"ctr",name:"CTR"}];s.chartOptions={onInitialized:function(t){s.chartOptionsFunc=t.component},size:{width:500,height:230},bindingOptions:{dataSource:"main.chartStore"},commonSeriesSettings:{argumentField:"day",type:s.types[0],point:{size:3,hoverStyle:{border:{visible:!0,width:2},size:5}}},margin:{bottom:20},argumentAxis:{valueMarginsEnabled:!1,discreteAxisDivisionMode:"crossLabels",grid:{visible:!0}},series:c,legend:{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"bottom"},tooltip:{enabled:!0,customizeTooltip:function(t){return{text:t.valueText}}}},s.impressions={text:r("MAIN.CHECKBOX.IMPRESSIONS"),value:!0,onValueChanged:function(t){1==t.value?(s.chartOptionsFunc.option("series[0].visible",!0),s.chartOptionsFuncgrid.forEach(function(t){t.option("series[0].visible",!0)})):(s.chartOptionsFuncgrid.forEach(function(t){t.option("series[0].visible",!1)}),s.chartOptionsFunc.option("series[0].visible",!1))}},s.CPA={text:r("MAIN.CHECKBOX.CPA"),value:!0,onValueChanged:function(t){1==t.value?(s.chartOptionsFunc.option("series[1].visible",!0),s.chartOptionsFuncgrid.forEach(function(t){t.option("series[1].visible",!0)})):(s.chartOptionsFunc.option("series[1].visible",!1),s.chartOptionsFuncgrid.forEach(function(t){t.option("series[1].visible",!1)}))}},s.CPC={text:r("MAIN.CHECKBOX.CPC"),value:!0,onValueChanged:function(t){1==t.value?(s.chartOptionsFunc.option("series[2].visible",!0),s.chartOptionsFuncgrid.forEach(function(t){t.option("series[2].visible",!0)})):(s.chartOptionsFunc.option("series[2].visible",!1),s.chartOptionsFuncgrid.forEach(function(t){t.option("series[2].visible",!1)}))}},s.clicks={text:r("MAIN.CHECKBOX.CLICKS"),value:!0,onValueChanged:function(t){1==t.value?(s.chartOptionsFunc.option("series[3].visible",!0),s.chartOptionsFuncgrid.forEach(function(t){t.option("series[3].visible",!0)})):(s.chartOptionsFunc.option("series[3].visible",!1),s.chartOptionsFuncgrid.forEach(function(t){t.option("series[3].visible",!1)}))}},s.media={text:r("MAIN.CHECKBOX.MEDIA_SPENT"),value:!0,onValueChanged:function(t){1==t.value?(s.chartOptionsFunc.option("series[4].visible",!0),s.chartOptionsFuncgrid.forEach(function(t){t.option("series[4].visible",!0)})):(s.chartOptionsFunc.option("series[4].visible",!1),s.chartOptionsFuncgrid.forEach(function(t){t.option("series[4].visible",!1)}))}},s.conversions={text:r("MAIN.CHECKBOX.CONVERSIONS"),value:!0,onValueChanged:function(t){1==t.value?(s.chartOptionsFunc.option("series[5].visible",!0),s.chartOptionsFuncgrid.forEach(function(t){t.option("series[5].visible",!0)})):(s.chartOptionsFunc.option("series[5].visible",!1),s.chartOptionsFuncgrid.forEach(function(t){t.option("series[5].visible",!1)}))}},s.CTR={text:r("MAIN.CHECKBOX.CTR"),value:!0,onValueChanged:function(t){1==t.value?(s.chartOptionsFunc.option("series[6].visible",!0),s.chartOptionsFuncgrid.forEach(function(t){t.option("series[6].visible",!0)})):(s.chartOptionsFunc.option("series[6].visible",!1),s.chartOptionsFuncgrid.forEach(function(t){t.option("series[6].visible",!1)}))}};var d={};s.Main.statsMap(s.dataStart,s.dataEnd).then(function(t){d=t,$("#visualMap").dxVectorMap(s.vectorMapOptions)}),s.vectorMapOptions={size:{width:500,height:350},layers:[{name:"areas",dataSource:t.DevExpress.viz.map.sources.world,palette:"blue",colorGroups:[0,100,1e3,1e4],colorGroupingField:"clicks",label:{enabled:!0,dataField:"name"},customize:function(t){t.forEach(function(t){var e=t.attribute("name"),a=d[e];a&&t.attribute("clicks",a)})}}],tooltip:{enabled:!0,customizeTooltip:function(t){return{text:t.attribute("text")}}},legends:[{source:{layer:"areas",grouping:"color"},horizontalAlignment:"left",verticalAlignment:"bottom",customizeText:function(t){return t.start+" to "+t.end+" clicks"}}],bounds:[-180,85,180,-75]}}t.$inject=["$window","$state","$localStorage","$translate","$log","Main"],angular.module("pjtLayout").controller("MainController",t)}(),function(){"use strict";function t(){}angular.module("pjtLayout").controller("CampaignController",t)}(),function(){"use strict";angular.module("pjtLayout").constant("RussianTranslations",{INDEX:{ADVERTISER_TITLE:"Статистика для",LEFT_NAV:{HOME:"Главная",CAMPAIGN:"Кампания",BILLING:"Биллинг",OPTIMIZER:"Оптимизатор"}},MAIN:{HOME:"Главная",DATE_PICKER:{YESTERDAY:"Вчера",CURRENT_WEEK:"Текущая неделя",LAST_WEEK:"Прошлая неделя",LAST_7_DAYS:"Последние 7 дней",CURRENT_MONTH:"Текущий месяц",LAST_MONTH:"Прошлый месяц",CUSTOM:"Другой диапазон"},TOTALS:{COLUMNS:{TOTALS:"ИТОГИ",SPENT:"Потрачено",CONV:"Конв",IMP:"Показы",CLICKS:"Клики",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR"}},CAMPAIGN:{COLUMNS:{CAMPAIGN:"Кампания",SPENT:"Потрачено",CONV:"Конв",IMP:"Показы",CLICKS:"Клики",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR",STATS:"Стат"}},CHECKBOX:{IMPRESSIONS:"Показы",CPA:"CPA",CPC:"CPC",CLICKS:"Клики",MEDIA_SPENT:"Потр на медий рекл",CONVERSIONS:"Конверсии",CTR:"CTR"}}})}(),function(){"use strict";angular.module("pjtLayout").constant("EnglishTranslations",{INDEX:{ADVERTISER_TITLE:"Stats for",LEFT_NAV:{HOME:"Home",CAMPAIGN:"Campaign",BILLING:"Billing",OPTIMIZER:"Optimizer"}},MAIN:{HOME:"Home",DATE_PICKER:{YESTERDAY:"Yesterday",LAST_7_DAYS:"Last 7 days",CURRENT_WEEK:"Current week",LAST_WEEK:"Last week",CURRENT_MONTH:"Current month",LAST_MONTH:"Last month",CUSTOM:"Custom"},TOTALS:{COLUMNS:{TOTALS:"TOTALS",SPENT:"Spent",CONV:"Conv",IMP:"Imp",CLICKS:"Clicks",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR"}},CAMPAIGN:{COLUMNS:{CAMPAIGN:"Campaign",SPENT:"Spent",CONV:"Conv",IMP:"Imp",CLICKS:"Clicks",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR",STATS:"Stats"}},CHECKBOX:{IMPRESSIONS:"Impressions",CPA:"CPA",CPC:"CPC",CLICKS:"Clicks",MEDIA_SPENT:"Media Spent",CONVERSIONS:"Conversions",CTR:"CTR"}}})}(),function(){"use strict";function t(t){t.debug("runBlock end")}t.$inject=["$log"],angular.module("pjtLayout").run(t)}(),function(){"use strict";function t(t,e){t.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("campaign",{url:"/campaign",templateUrl:"app/campaign/camp.html",controller:"CampaignController",controllerAs:"camp"}),e.otherwise("/")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("pjtLayout").config(t)}(),function(){"use strict";angular.module("pjtLayout")}(),function(){"use strict";function t(t,e,a,i,n){t.debugEnabled(!0),a.translations("en",n),a.translations("ru",i),a.useSanitizeValueStrategy("escape"),a.preferredLanguage("ru"),a.useLocalStorage(),a.storageKey("TRANSLATE_LANG_KEY"),e.allowHtml=!0,e.timeOut=3e3,e.positionClass="toast-top-right",e.preventDuplicates=!0,e.progressBar=!0}t.$inject=["$logProvider","toastrConfig","$translateProvider","RussianTranslations","EnglishTranslations"],angular.module("pjtLayout").config(t)}(),angular.module("pjtLayout").run(["$templateCache",function(t){t.put("app/campaign/camp.html",'<div class="container-camp col-md-10 col-lg-offset-2 col-md-10 col-lg-offset-2"><h1 translate=USERS.TITLE>Home</h1><div class=row><div id=container><div dx-vector-map=camp.vectorMapOptions id=visualMap></div></div></div></div>'),t.put("app/main/main.html",'<div class="container-home col-md-10 col-lg-offset-2 col-md-10 col-lg-offset-2"><h1 translate=MAIN.HOME>Home</h1><div class="col-md-3 col-md-offset-8 piker"><div dx-select-box=main.datePiker></div></div><div class=row><div id=container><div class="col-md-6 contLeft"><div dx-chart=main.chartOptions id=chart></div><div class=col-md-12><div class=checkbox-container><label class=label-checkbox><div dx-check-box=main.impressions></div></label><label class=label-checkbox><div dx-check-box=main.CPA></div></label><label class=label-checkbox><div dx-check-box=main.CPC></div></label><label class=label-checkbox><div dx-check-box=main.clicks></div></label></div><div class=checkbox-container><label class=label-checkbox><div dx-check-box=main.media></div></label><label class=label-checkbox><div dx-check-box=main.conversions></div></label><label class=label-checkbox><div dx-check-box=main.CTR></div></label></div></div></div><div id=visualMap></div></div></div><div class="row first-grid"><div cass="col-md-9 col-lg-9" id=gridContainer1 dx-data-grid=main.dataGridOptionsSingle></div></div><div class="row second-grid"><div cass="col-md-9 col-lg-9" id=gridContainer2 dx-data-grid=main.dataGridOptionsMultiple></div></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-628e612622.js.map
