function RootController(e,t,a,i){var n=this;e.Globalize.culture(i.get("TRANSLATE_LANG_KEY")),n.changeLang=function(i){a.use(i),e.Globalize.culture(i),t.reload()}}RootController.$inject=["$window","$state","$translate","$translateLocalStorage"],function(){"use strict";angular.module("pjtLayout",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ui.router","ui.bootstrap","toastr","dx","pascalprecht.translate","chart.js","ngStorage"])}(),angular.module("pjtLayout").controller("RootController",RootController),function(){"use strict";function e(e,t,a){function i(i,n,s,l){return e({method:"GET",url:"/api/v1/statistics",params:{advertiser_id:i,from_date:n,to:s,by:l}}).then(function(e){for(var i in e.data.statistics){var n=t.get("TRANSLATE_LANG_KEY");e.data.statistics[i].cpc=parseFloat(e.data.statistics[i].cpc).toFixed(4),e.data.statistics[i].cpm=parseFloat(e.data.statistics[i].cpm).toFixed(4),e.data.statistics[i].spend=parseFloat(e.data.statistics[i].spend).toFixed(4),e.data.statistics[i].day=a.moment(e.data.statistics[i].day).locale(n).format("L")}return e.data})}function n(t,a,i){return e({method:"GET",url:"/api/v1/totals",params:{advertiser_id:t,from_date:a,to:i}}).then(function(e){return e.data.totals.cpc=parseFloat(e.data.totals.cpc).toFixed(4),e.data.totals.cpm=parseFloat(e.data.totals.cpm).toFixed(4),e.data.totals.spend=parseFloat(e.data.totals.spend).toFixed(4),e.data.totals})}function s(t,a,i,n,s,l,c,o,r){return l?(c=l[0].desc===!0?"desc":"asc",l=l[0].selector):(l="campaign",c="DESC"),null==s&&(s=20),null==n&&(n=0),e({method:"GET",url:"/api/v1/campaigns",params:{advertiser_id:t,from_date:a,to:i,skip:n,take:s,sort:l,order:c,stat_by:o,filter:r}}).then(function(e){for(var t in e.data.campaigns)e.data.campaigns[t].cpc=parseFloat(e.data.campaigns[t].cpc).toFixed(4),e.data.campaigns[t].cpm=parseFloat(e.data.campaigns[t].cpm).toFixed(4),e.data.campaigns[t].spend=parseFloat(e.data.campaigns[t].spend).toFixed(4);return e.data})}function l(t,a,i){return e({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/map/clicks",params:{advertiser_id:t,from_date:a,to:i}}).then(function(e){return e.data})}var c=this;c.statsCampaigns=s,c.statsTotals=n,c.statsChart=i,c.statsMap=l}e.$inject=["$http","$translateLocalStorage","$window"],angular.module("pjtLayout").service("Main",e)}(),function(){"use strict";function e(e,t,a,i,n,s,l){var c=this;c.advertiser=i.advertiser,c.Main=l,c.multipleTotalCount=0,c.checkChart=[],c.by="";var o,r=n.instant;null==i.series&&(i.series=[{valueField:"imp",name:"Impressions"},{valueField:"cvr",name:"CVR"},{valueField:"cpc",name:"CPC"},{valueField:"clicks",name:"clicks"},{valueField:"spend",name:"media"},{valueField:"conv",name:"conversions"},{valueField:"ctr",name:"CTR"}]);var d=[];if(null==i.checkChart){i.checkChart={imp:!0,cvr:!0,cpc:!0,clicks:!0,spend:!0,conv:!0,ctr:!0},d=[];for(o in i.checkChart)1==i.checkChart[o]&&d.push(o);c.by=d.join()}else{d=[];for(o in i.checkChart)1==i.checkChart[o]&&d.push(o);c.by=d.join()}null==i.dataStart&&null==i.dataEnd?(i.dataStart=t.moment({hour:"00"}).subtract(1,"day").unix(),i.dataEnd=t.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):(c.dataStart=i.dataStart,c.dataEnd=i.dataEnd),null==i.SelectedTime&&(i.SelectedTime=0);var u=[{ID:0,Name:r("MAIN.DATE_PICKER.YESTERDAY"),dataStart:t.moment({hour:"00"}).subtract(1,"day").unix(),dataEnd:t.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()},{ID:1,Name:r("MAIN.DATE_PICKER.LAST_3_DAYS"),dataStart:t.moment({hour:"00"}).subtract(3,"day").unix(),dataEnd:t.moment({hour:"00"}).unix()},{ID:2,Name:r("MAIN.DATE_PICKER.LAST_7_DAYS"),dataStart:t.moment({hour:"00"}).subtract(7,"day").unix(),dataEnd:t.moment({hour:"00"}).unix()},{ID:3,Name:r("MAIN.DATE_PICKER.LAST_14_DAYS"),dataStart:t.moment({hour:"00"}).subtract(14,"day").unix(),dataEnd:t.moment({hour:"00"}).unix()},{ID:4,Name:r("MAIN.DATE_PICKER.LAST_21_DAYS"),dataStart:t.moment({hour:"00"}).subtract(21,"day").unix(),dataEnd:t.moment({hour:"00"}).unix()},{ID:5,Name:r("MAIN.DATE_PICKER.CURRENT_MONTH"),dataStart:t.moment().startOf("month").unix(),dataEnd:t.moment().unix()},{ID:6,Name:r("MAIN.DATE_PICKER.LAST_MONTH"),dataStart:t.moment().subtract(1,"month").startOf("month").unix(),dataEnd:t.moment().subtract(1,"month").endOf("month").unix()},{ID:7,Name:r("MAIN.DATE_PICKER.LAST_90_DAYS"),dataStart:t.moment({hour:"00"}).subtract(90,"day").unix(),dataEnd:t.moment().unix()},{ID:8,Name:r("MAIN.DATE_PICKER.ALL_TIME"),dataStart:0,dataEnd:t.moment().unix()}];c.datePiker={items:u,displayExpr:"Name",valueExpr:"ID",value:u[i.SelectedTime].ID,onValueChanged:function(e){i.SelectedTime=e.value,i.dataStart=u[e.value].dataStart,i.dataEnd=u[e.value].dataEnd,a.reload()}},c.totals=[],c.chartStore=new t.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return c.Main.statsChart(c.advertiser.id,c.dataStart,c.dataEnd,c.by).then(function(e){return e.statistics})}}),c.multipleStore=new t.DevExpress.data.CustomStore({totalCount:function(){return c.multipleTotalCount},load:function(e){return c.Main.statsCampaigns(c.advertiser.id,c.dataStart,c.dataEnd,e.skip,e.take,e.sort,e.order,c.by,e.filter).then(function(e){return c.multipleTotalCount=e.totalCount,e.campaigns})}}),c.Main.statsTotals(c.advertiser.id,c.dataStart,c.dataEnd).then(function(e){c.totals.spent=e.spend,c.totals.conv=e.conv,c.totals.imp=e.imp,c.totals.cpc=e.cpc,c.totals.cpm=e.cpm,c.totals.cvr=e.cvr,c.totals.ctr=e.ctr}),c.selectedItems=[],c.chartOptionsFuncgrid=[],c.dataGridOptionsMultiple={bindingOptions:{dataSource:"main.multipleStore"},onInitialized:function(e){c.dataGridOptionsMultipleFunc=e.component,c.dataGridOptionsMultipleFunc._controllers.columns._commandColumns[1].visibleIndex=15},showBorders:!0,alignment:"left",headerFilter:{visible:!0},allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,columnChooser:{enabled:!0},columnFixing:{enabled:!0},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:r("MAIN.CAMPAIGN.COLUMNS.CAMPAIGN"),dataField:"campaign",fixed:!0,cellTemplate:function(e,a){e.addClass("a-campaign"),t.angular.element('<a href="#/home/campaign/'+a.data.id+'">'+a.data.campaign+"</a>").appendTo(e)}},{caption:r("MAIN.CAMPAIGN.COLUMNS.SPENT"),dataField:"spend"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:r("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:r("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{width:200,dataField:r("MAIN.CAMPAIGN.COLUMNS.STATS"),cellTemplate:function(e,a){if(a.data.chart){var n={onInitialized:function(e){c.chartOptionsFuncgrid[a.rowIndex]=e.component},dataSource:a.data.chart,size:{height:80},commonSeriesSettings:{argumentField:"day",type:"line",point:{size:2,hoverStyle:{border:{visible:!0,width:1},size:4}}},commonAxisSettings:{label:{visible:!1},grid:{visible:!1}},argumentAxis:{valueMarginsEnabled:!1,discreteAxisDivisionMode:"crossLabels",grid:{visible:!1},label:{visible:!1},minorGrid:{visible:!1},minorTick:{visible:!1},tick:{visible:!1}},series:i.series,legend:{visible:!1},tooltip:{enabled:!0,customizeTooltip:function(e){return{text:e.valueText}}}};e.addClass("img-container"),t.angular.element('<div id="chartMulti'+a.rowIndex+'" ></div>').appendTo(e),t.$("#chartMulti"+a.rowIndex).dxChart(n).dxChart("instance")}else e.addClass("img-container"),t.angular.element('<div id="chartMulti" ></div>').appendTo(e)}}],selection:{mode:"multiple"},onSelectionChanged:function(e){c.selectedItems=e.selectedRowsData,c.disabled=!c.selectedItems.length}},c.types=["line","stackedLine","fullStackedLine"],c.chartOptions={onInitialized:function(e){c.chartOptionsFunc=e.component},series:i.series,size:{width:500,height:230},bindingOptions:{dataSource:"main.chartStore"},commonSeriesSettings:{argumentField:"day",type:c.types[0],point:{size:3,hoverStyle:{border:{visible:!0,width:2},size:5}}},margin:{bottom:20},argumentAxis:{valueMarginsEnabled:!1,discreteAxisDivisionMode:"crossLabels",grid:{visible:!0}},legend:{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"bottom"},tooltip:{enabled:!0,customizeTooltip:function(e){return{text:e.valueText}}}},c.impressions={text:r("MAIN.CHECKBOX.IMPRESSIONS"),value:i.checkChart.imp?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.imp=!0,i.series.push({valueField:"imp",name:"Impressions"}),a.reload();else{i.checkChart.imp=!1;for(var t in i.series)"imp"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}},c.CPA={text:r("MAIN.CHECKBOX.CPA"),value:i.checkChart.cvr?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.cvr=!0,i.series.push({valueField:"cvr",name:"CVR"}),a.reload();else{i.checkChart.cvr=!1;for(var t in i.series)"cvr"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}},c.CPC={text:r("MAIN.CHECKBOX.CPC"),value:i.checkChart.cpc?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.cpc=!0,i.series.push({valueField:"cpc",name:"CPC"}),a.reload();else{i.checkChart.cpc=!1;for(var t in i.series)"cpc"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}},c.clicks={text:r("MAIN.CHECKBOX.CLICKS"),value:i.checkChart.clicks?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.clicks=!0,i.series.push({valueField:"clicks",name:"clicks"}),a.reload();else{i.checkChart.clicks=!1;for(var t in i.series)"clicks"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}},c.media={text:r("MAIN.CHECKBOX.MEDIA_SPENT"),value:i.checkChart.spend?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.spend=!0,i.series.push({valueField:"spend",name:"media"}),a.reload();else{i.checkChart.spend=!1;for(var t in i.series)"spend"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}},c.conversions={text:r("MAIN.CHECKBOX.CONVERSIONS"),value:i.checkChart.conv?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.conv=!0,i.series.push({valueField:"conv",name:"conversions"}),a.reload();else{i.checkChart.conv=!1;for(var t in i.series)"conv"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}},c.CTR={text:r("MAIN.CHECKBOX.CTR"),value:i.checkChart.ctr?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.ctr=!0,i.series.push({valueField:"ctr",name:"CTR"}),a.reload();else{i.checkChart.ctr=!1;for(var t in i.series)"ctr"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}};var m={};c.Main.statsMap(c.advertiser.id,c.dataStart,c.dataEnd).then(function(e){m=e,t.$("#visualMap").dxVectorMap(c.vectorMapOptions)}),c.vectorMapOptions={size:{width:500,height:350},layers:[{name:"areas",dataSource:t.DevExpress.viz.map.sources.world,palette:"blue",colorGroups:[0,100,1e3,1e4],colorGroupingField:"clicks",label:{enabled:!0,dataField:"name"},customize:function(e){e.forEach(function(e){var t=e.attribute("name"),a=m[t];a&&e.attribute("clicks",a)})}}],tooltip:{enabled:!0,customizeTooltip:function(e){return{text:e.attribute("text")}}},legends:[{source:{layer:"areas",grouping:"color"},horizontalAlignment:"left",verticalAlignment:"bottom",customizeText:function(e){return e.start+" to "+e.end+" clicks"}}],bounds:[-180,85,180,-75]}}e.$inject=["$compile","$window","$state","$localStorage","$translate","$log","Main"],angular.module("pjtLayout").controller("MainController",e)}(),function(){"use strict";angular.module("pjtLayout").constant("RussianTranslations",{AUTH:{GO_BUTTON:"Дальше"},INDEX:{ADVERTISER_TITLE:"Статистика для",LEFT_NAV:{HOME:"Главная",CAMPAIGN:"Кампания",BILLING:"Биллинг",OPTIMIZER:"Оптимизатор"}},MAIN:{HOME:"Главная",DATE_PICKER:{YESTERDAY:"Вчера",LAST_3_DAYS:"Последние 3 дня",LAST_7_DAYS:"Последние 7 дней",LAST_14_DAYS:"Последние 14 дней",LAST_21_DAYS:"Последние 21 дней",CURRENT_MONTH:"Текущий месяц",LAST_MONTH:"Прошлый месяц",LAST_90_DAYS:"Последние 90 дней",ALL_TIME:"Все время"},TOTALS:{COLUMNS:{TOTALS:"ИТОГИ",SPENT:"Потрачено",CONV:"Конв",IMP:"Показы",CLICKS:"Клики",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR"}},CAMPAIGN:{COLUMNS:{CAMPAIGN:"Кампания",PLACEMENT:"Размещение",NETWORK:"Сеть_Издатель",SPENT:"Потрачено",CONV:"Конв",IMP:"Показы",CLICKS:"Клики",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR",STATS:"Стат"}},CHECKBOX:{IMPRESSIONS:"Показы",CPA:"CPA",CPC:"CPC",CLICKS:"Клики",MEDIA_SPENT:"Потр на медий рекл",CONVERSIONS:"Конверсии",CTR:"CTR"}},CAMP:{NAME:"Кампания"}})}(),function(){"use strict";angular.module("pjtLayout").constant("EnglishTranslations",{AUTH:{GO_BUTTON:"GO"},INDEX:{ADVERTISER_TITLE:"Stats for",LEFT_NAV:{HOME:"Home",CAMPAIGN:"Campaign",BILLING:"Billing",OPTIMIZER:"Optimizer"}},MAIN:{HOME:"Home",DATE_PICKER:{YESTERDAY:"Yesterday",LAST_3_DAYS:"Last 3 days",LAST_7_DAYS:"Last 7 days",LAST_14_DAYS:"Last 14 days",LAST_21_DAYS:"Last 21 days",CURRENT_MONTH:"Current month",LAST_MONTH:"Last month",LAST_90_DAYS:"Last 90 days",ALL_TIME:"All times"},TOTALS:{COLUMNS:{TOTALS:"TOTALS",SPENT:"Spent",CONV:"Conv",IMP:"Imp",CLICKS:"Clicks",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR"}},CAMPAIGN:{COLUMNS:{CAMPAIGN:"Campaign",PLACEMENT:"Placement",NETWORK:"Network+Publisher",SPENT:"Spent",CONV:"Conv",IMP:"Imp",CLICKS:"Clicks",CPC:"CPC",CPM:"CPM",CVR:"CVR",CTR:"CTR",STATS:"Stats"}},CHECKBOX:{IMPRESSIONS:"Impressions",CPA:"CPA",CPC:"CPC",CLICKS:"Clicks",MEDIA_SPENT:"Media Spent",CONVERSIONS:"Conversions",CTR:"CTR"}},CAMP:{NAME:"Campaign"}})}(),function(){"use strict";function e(e,t){var a=this;a.advertiser={},a.a=123,null==e.advertiser?t.go("auth"):a.advertiser.name=e.advertiser.name}e.$inject=["$localStorage","$state"],angular.module("pjtLayout").controller("HomeController",e)}(),function(){"use strict";function e(e){function t(){return e({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/campaigns"}).then(function(e){return e.data.campaigns})}function a(t,a,i){return e({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/statistics",params:{from:t,to:a,by:i}}).then(function(e){return e.data})}function i(t,a,i,n,s,l,c,o){return e({method:"GET",url:"http://private-anon-d71dffb7f-rtbs.apiary-mock.com/api/v1/campaigns",params:{from:t,to:a,skip:i,take:n,sort:s,order:l,stat_by:c,filter:o}}).then(function(e){return e.data})}var n=this;n.nameCampaigns=t,n.statsCampaigns=i,n.statsChart=a}e.$inject=["$http"],angular.module("pjtLayout").service("Camp",e)}(),function(){"use strict";function e(e,t,a,i,n,s,l,c,o){var r=this;r.Camp=c,r.multipleTotalCount=0,r.checkChart=[],r.by="";var d=n.instant;null==i.series&&(i.series=[{valueField:"impressions",name:"Impressions"},{valueField:"cpa",name:"CPA"},{valueField:"cpc",name:"CPC"},{valueField:"clicks",name:"clicks"},{valueField:"media",name:"media"},{valueField:"conversions",name:"conversions"},{valueField:"ctr",name:"CTR"}]);var u=[];if(null==i.checkChart){i.checkChart={impressions:!0,cpa:!0,cpc:!0,clicks:!0,media:!0,conversions:!0,ctr:!0},u=[];for(var m in i.checkChart)1==i.checkChart[m]&&u.push(m);r.by=u.join()}else{u=[];for(var m in i.checkChart)1==i.checkChart[m]&&u.push(m);r.by=u.join()}r.Camp.nameCampaigns(l.id).then(function(e){for(var t=0;t<e.length;t++)if(e[t].id==l.id){r.campName=e[t].campaign;break}}),r.types=["line","stackedLine","fullStackedLine"];r.chartOptions={onInitialized:function(e){r.chartOptionsFunc=e.component},series:i.series,size:{width:500,height:230},bindingOptions:{dataSource:"camp.chartStore"},commonSeriesSettings:{argumentField:"day",type:r.types[0],point:{size:3,hoverStyle:{border:{visible:!0,width:2},size:5}}},margin:{bottom:20},argumentAxis:{valueMarginsEnabled:!1,discreteAxisDivisionMode:"crossLabels",grid:{visible:!0}},legend:{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"bottom"},tooltip:{enabled:!0,customizeTooltip:function(e){return{text:e.valueText}}}},r.totals=[],r.chartStore=new t.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return r.Camp.statsChart(r.dataStart,r.dataEnd,r.by).then(function(e){return e.statistics})}}),r.multipleStore=new t.DevExpress.data.CustomStore({totalCount:function(){return r.multipleTotalCount},load:function(e){return null==e.take&&(e.take=20),null==e.skip&&(e.skip=0),null==e.sort&&(e.sort="campaign"),null==e.order&&(e.order="DESC"),r.Camp.statsCampaigns(r.dataStart,r.dataEnd,e.skip,e.take,e.sort,e.order,r.by,e.filter).then(function(e){return r.multipleTotalCount=e.totalCount,e.campaigns})}}),r.impressions={text:d("MAIN.CHECKBOX.IMPRESSIONS"),value:i.checkChart.impressions?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.impressions=!0,i.series.push({valueField:"impressions",name:"Impressions"}),a.reload();else{i.checkChart.impressions=!1;for(var t in i.series)"impressions"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}},r.CPA={text:d("MAIN.CHECKBOX.CPA"),value:i.checkChart.cpa?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.cpa=!0,i.series.push({valueField:"cpa",name:"CPA"}),a.reload();else{i.checkChart.cpa=!1;for(var t in i.series)"cpa"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}},r.CPC={text:d("MAIN.CHECKBOX.CPC"),value:i.checkChart.cpc?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.cpc=!0,i.series.push({valueField:"cpc",name:"CPC"}),a.reload();else{i.checkChart.cpc=!1;for(var t in i.series)"cpc"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}},r.clicks={text:d("MAIN.CHECKBOX.CLICKS"),value:i.checkChart.clicks?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.clicks=!0,i.series.push({valueField:"clicks",name:"clicks"}),a.reload();else{i.checkChart.clicks=!1;for(var t in i.series)"clicks"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}},r.media={text:d("MAIN.CHECKBOX.MEDIA_SPENT"),value:i.checkChart.media?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.media=!0,i.series.push({valueField:"media",name:"media"}),a.reload();else{i.checkChart.media=!1;for(var t in i.series)"media"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}},r.conversions={text:d("MAIN.CHECKBOX.CONVERSIONS"),value:i.checkChart.conversions?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.conversions=!0,i.series.push({valueField:"conversions",name:"conversions"}),a.reload();else{i.checkChart.conversions=!1;for(var t in i.series)"conversions"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}},r.CTR={text:d("MAIN.CHECKBOX.CTR"),value:i.checkChart.ctr?!0:!1,onValueChanged:function(e){if(1==e.value)i.checkChart.ctr=!0,i.series.push({valueField:"ctr",name:"CTR"}),a.reload();else{i.checkChart.ctr=!1;for(var t in i.series)"ctr"==i.series[t].valueField&&i.series.splice(t,1);a.reload()}}},null==i.dataStart&&null==i.dataEnd?(i.dataStart=t.moment({hour:"00"}).subtract(1,"day").unix(),i.dataEnd=t.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()):(r.dataStart=i.dataStart,r.dataEnd=i.dataEnd),null==i.SelectedTime&&(i.SelectedTime=0);var p=[{ID:0,Name:d("MAIN.DATE_PICKER.YESTERDAY"),dataStart:t.moment({hour:"00"}).subtract(1,"day").unix(),dataEnd:t.moment({hour:"00"}).subtract(1,"day").endOf("day").unix()},{ID:1,Name:d("MAIN.DATE_PICKER.LAST_3_DAYS"),dataStart:t.moment({hour:"00"}).subtract(3,"day").unix(),dataEnd:t.moment({hour:"00"}).unix()},{ID:2,Name:d("MAIN.DATE_PICKER.LAST_7_DAYS"),dataStart:t.moment({hour:"00"}).subtract(7,"day").unix(),dataEnd:t.moment({hour:"00"}).unix()},{ID:3,Name:d("MAIN.DATE_PICKER.LAST_14_DAYS"),dataStart:t.moment({hour:"00"}).subtract(14,"day").unix(),dataEnd:t.moment({hour:"00"}).unix()},{ID:4,Name:d("MAIN.DATE_PICKER.LAST_21_DAYS"),dataStart:t.moment({hour:"00"}).subtract(21,"day").unix(),dataEnd:t.moment({hour:"00"}).unix()},{ID:5,Name:d("MAIN.DATE_PICKER.CURRENT_MONTH"),dataStart:t.moment().startOf("month").unix(),dataEnd:t.moment().unix()},{ID:6,Name:d("MAIN.DATE_PICKER.LAST_MONTH"),dataStart:t.moment().subtract(1,"month").startOf("month").unix(),dataEnd:t.moment().subtract(1,"month").endOf("month").unix()},{ID:7,Name:d("MAIN.DATE_PICKER.LAST_90_DAYS"),dataStart:t.moment({hour:"00"}).subtract(90,"day").unix(),dataEnd:t.moment().unix()},{ID:8,Name:d("MAIN.DATE_PICKER.ALL_TIME"),dataStart:0,dataEnd:t.moment().unix()}];r.datePiker={items:p,displayExpr:"Name",valueExpr:"ID",value:p[i.SelectedTime].ID,onValueChanged:function(e){i.SelectedTime=e.value,i.dataStart=p[e.value].dataStart,i.dataEnd=p[e.value].dataEnd,a.reload()}},r.boxPlot={onInitialized:function(e){r.chartOptionsFunc=e.component},size:{width:500,height:200},dataSource:[{date:new Date(1994,2,1),l:23,h:27,o:24,c:25.875},{date:new Date(1994,2,2),l:23.625,h:25.125,o:24,c:24.875},{date:new Date(1994,2,3),l:27.25,h:30.25,o:26.75,c:30},{date:new Date(1994,2,4),l:26.5,h:27.875,o:26.875,c:27.25},{date:new Date(1994,2,7),l:26.375,h:27.5,o:27.375,c:26.75}],commonSeriesSettings:{argumentField:"date",type:"candlestick"},series:[{openValueField:"o",highValueField:"h",lowValueField:"l",closeValueField:"c",reduction:{color:"red"}}],valueAxis:{tickInterval:1,title:{text:"US dollars"},label:{format:"currency",precision:0}},argumentAxis:{label:{format:"shortDate"}},tooltip:{enabled:!0,location:"edge",customizeTooltip:function(e){return{text:"Open: $"+e.openValue+"<br/>Close: $"+e.closeValue+"<br/>High: $"+e.highValue+"<br/>Low: $"+e.lowValue+"<br/>"}}}},r.selectedItems=[],r.chartOptionsFuncgrid=[],r.boxPlotData=[{placement:"CNN.com",NetworkPublisher:"Google Adx",conv:"8",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"true",blackList:"false",suspended:"false"}},{placement:"Hidden",NetworkPublisher:"PubMatic",conv:"3",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"false",blackList:"true",suspended:"false"}},{placement:"BBC.com",NetworkPublisher:"OpenX",conv:"1",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"false",blackList:"false",suspended:"true"}},{placement:"msn.com",NetworkPublisher:"Rubicon",conv:"8",imp:"5500",clicks:"21",cpc:"$0,31",cpm:"$1,38",cvr:"",ctr:"",state:{whiteList:"true",blackList:"false",suspended:"false"}}],null==i.boxPlotData&&(i.boxPlotData=r.boxPlotData),r.dataGridOptionsCampaign={onInitialized:function(e){r.dataGridOptionsMultipleFunc=e.component,r.dataGridOptionsMultipleFunc._controllers.columns._commandColumns[1].visibleIndex=9},onRowPrepared:function(e){if(r.objectData=e,"data"==r.objectData.rowType){var t=e.rowElement[0].childNodes[9],a=e.data.state;"true"==a.whiteList&&t.classList.add("active-white"),"true"==a.blackList&&t.classList.add("active-black"),"true"==a.suspended&&t.classList.add("active-suspended")}},showBorders:!0,alignment:"left",headerFilter:{visible:!0},dataSource:i.boxPlotData||r.boxPlotData,pager:{showPageSizeSelector:!0,allowedPageSizes:[10,30,50],visible:!0,showNavigationButtons:!0},howBorders:!0,showRowLines:!0,columns:[{caption:d("MAIN.CAMPAIGN.COLUMNS.PLACEMENT"),dataField:"placement"},{caption:d("MAIN.CAMPAIGN.COLUMNS.NETWORK"),dataField:"NetworkPublisher"},{caption:d("MAIN.CAMPAIGN.COLUMNS.CONV"),dataField:"conv"},{caption:d("MAIN.CAMPAIGN.COLUMNS.IMP"),dataField:"imp"},{caption:d("MAIN.CAMPAIGN.COLUMNS.CLICKS"),dataField:"clicks"},{caption:d("MAIN.CAMPAIGN.COLUMNS.CPC"),dataField:"cpc"},{caption:d("MAIN.CAMPAIGN.COLUMNS.CPM"),dataField:"cpm"},{caption:d("MAIN.CAMPAIGN.COLUMNS.CVR"),dataField:"cvr"},{caption:d("MAIN.CAMPAIGN.COLUMNS.CTR"),dataField:"ctr"},{width:300,columnIndex:16,cellTemplate:function(e,t){$("<div />").dxButton({text:"white list",height:30,width:89,onClick:function(e){console.log(t.data.state);var a=e.element[0].parentNode;console.log(a),a.classList.contains("active-white")?(a.classList.remove("active-white"),a.classList.add("unactive-white"),t.data.state.whiteList="false"):a.classList.contains("active-white")||(a.classList.remove("unactive-white"),a.classList.add("active-white"),t.data.state.whiteList="true",t.data.state.suspended="false",t.data.state.blackList="false",a.classList.remove("active-black"),a.classList.remove("active-suspended"))}}).addClass("white-list").appendTo(e),$("<div />").dxButton({text:"black list",height:30,width:89,onClick:function(e){console.log(e);var a=e.element[0].parentNode;console.log(a),a.classList.contains("active-black")?(a.classList.remove("active-black"),a.classList.add("unactive-black"),t.data.state.blackList="false"):a.classList.contains("active-black")||(a.classList.remove("unactive-black"),a.classList.add("active-black"),t.data.state.blackList="true",t.data.state.suspended="false",t.data.state.whiteList="false",a.classList.remove("active-white"),a.classList.remove("active-suspended"))}}).addClass("black-list").appendTo(e),$("<div />").dxButton({text:"suspended",height:30,width:95,onClick:function(e){console.log(e);var a=e.element[0].parentNode;console.log(a),a.classList.contains("active-suspended")?(a.classList.remove("active-suspended"),a.classList.add("unactive-suspended"),t.data.state.suspended="false"):a.classList.contains("active-suspended")||(a.classList.remove("unactive-suspended"),a.classList.add("active-suspended"),t.data.state.suspended="true",t.data.state.whiteList="false",t.data.state.blackList="false",a.classList.remove("active-white"),a.classList.remove("active-black"))}}).addClass("suspended").appendTo(e)}}],selection:{mode:"multiple",showCheckBoxesMode:"always"},bindingOptions:{allowColumnResizing:"true"},onSelectionChanged:function(e){r.selectedItems=e.selectedRowsData,r.disabled=!r.selectedItems.length}},r.rangeFirstChartOptions={margin:{left:50},size:{height:150,width:450},scale:{startValue:new Date(i.dataStart),endValue:new Date(i.dataEnd),minorTickInterval:"day",minRange:"hour",maxRange:"month",minorTick:{visible:!1}},sliderMarker:{format:"monthAndDay"}},r.rangeSecondChartOptions={margin:{left:50,top:12},size:{height:150,width:450},scale:{startValue:new Date(i.dataStart),endValue:new Date(i.dataEnd),minorTickInterval:"day",minRange:"day",maxRange:"month",minorTick:{visible:!1}},sliderMarker:{format:"monthAndDay"}},r.ctrlBbtns={placement:"Placement",creativeId:"creative_id",creativeSize:"creative_size",viewability:"viewability",os:"OS",carrier:"carrier",networkSeller:"network (seller)",connectionType:"connection_type",device:"device",extra:"extra",publisher:"Publisher"},r.pieChartHeader=i.pieChartHeader,r.btnsNodesArray=$(".label-container")[0].children,r.selectInfoBtn=function(e,t){r.pieChartHeader=t,i.pieChartHeader=r.pieChartHeader,Array.prototype.forEach.call(r.btnsNodesArray,function(e){e.classList.contains("nav-btn-active")&&e.classList.remove("nav-btn-active")}),i.pieChartHeader=r.pieChartHeader,e.currentTarget.classList.add("nav-btn-active")}}e.$inject=["$compile","$window","$state","$localStorage","$translate","$log","$stateParams","Camp","Main"],angular.module("pjtLayout").controller("CampaignController",e)}(),function(){"use strict";function e(e){function t(){return e({method:"GET",url:"/api/v1/advertisers"}).then(function(e){return e.data})}var a=this;a.advertisersList=t}e.$inject=["$http"],angular.module("pjtLayout").service("Auth",e)}(),function(){"use strict";function e(e,t,a,i,n){var s=this,l=i.instant;s.Auth=n,s.addButton={text:l("AUTH.GO_BUTTON"),onClick:function(){a.advertiser=s.selectedService,t.go("home.main")}},s.selectAdvertisersStore=new e.DevExpress.data.CustomStore({totalCount:function(){return 0},load:function(){return s.Auth.advertisersList().then(function(e){return e})}}),s.selectAdvertisers={bindingOptions:{dataSource:"auth.selectAdvertisersStore",value:"auth.selectedService"},displayExpr:"name",width:"200px"}}e.$inject=["$window","$state","$localStorage","$translate","Auth"],angular.module("pjtLayout").controller("AuthController",e)}(),function(){"use strict";function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("pjtLayout").run(e)}(),function(){"use strict";function e(e,t){e.state("auth",{url:"/",templateUrl:"app/auth/auth.html",controller:"AuthController",controllerAs:"auth"}).state("home",{url:"/home",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"home"}).state("home.main",{url:"/main",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("home.campaign",{url:"/campaign/:id",templateUrl:"app/campaign/camp.html",controller:"CampaignController",controllerAs:"camp"}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("pjtLayout").config(e)}(),function(){"use strict";angular.module("pjtLayout")}(),function(){"use strict";function e(e,t,a,i,n){e.debugEnabled(!0),a.translations("en",n),a.translations("ru",i),a.useSanitizeValueStrategy("escape"),a.preferredLanguage("ru"),a.useLocalStorage(),a.storageKey("TRANSLATE_LANG_KEY"),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-right",t.preventDuplicates=!0,t.progressBar=!0}e.$inject=["$logProvider","toastrConfig","$translateProvider","RussianTranslations","EnglishTranslations"],angular.module("pjtLayout").config(e)}(),angular.module("pjtLayout").run(["$templateCache",function(e){e.put("app/auth/auth.html",'<div class=location><a ng-click="root.changeLang(\'ru\')"><i class="fa fa-globe fa-fw"></i> Русский </a>/ <a ng-click="root.changeLang(\'en\')"><i class="fa fa-globe fa-fw"></i> English</a></div><div class=container><div class=row><div class="Absolute-Center is-Responsive"><div id=logo-container></div><div class="col-sm-12 col-md-10 col-md-offset-1"><div class=mode-button><div dx-select-box=auth.selectAdvertisers></div><div dx-button=auth.addButton class=add-advertisers></div></div></div></div></div></div>'),e.put("app/campaign/camp.html",'<div class="container-camp col-md-10 col-sm-10 col-md-offset-2 col-sm-offset-2"><div class=row><span translate=CAMP.NAME class=camp-header></span><span class=camp-header>: {{camp.campName}}</span></div><div class="col-md-3 col-md-offset-8 col-sm-3 col-sm-offset-8 piker"><div dx-select-box=camp.datePiker></div></div><div class="row camp-content1"><div id=container><div class="row contLeft"><div class="col-md-5 col-sm-4 first-chart"><div dx-chart=camp.chartOptions id=chart></div><div dx-range-selector=camp.rangeFirstChartOptions class=first-range></div></div><div class="col-md-4 col-sm-4 second-chart"><div id=container-inner dx-chart=camp.boxPlot></div><div dx-range-selector=camp.rangeSecondChartOptions class=second-range></div></div><div class="col-md-2 col-sm-2 checkbox-container"><div><label class=label-checkbox><div dx-check-box=camp.impressions></div></label><label class=label-checkbox><div dx-check-box=camp.CPA></div></label><label class=label-checkbox><div dx-check-box=camp.CPC></div></label><label class=label-checkbox><div dx-check-box=camp.clicks></div></label><label class=label-checkbox><div dx-check-box=camp.media></div></label><label class=label-checkbox><div dx-check-box=camp.conversions></div></label><label class=label-checkbox><div dx-check-box=camp.CTR></div></label></div></div></div></div></div><div class="row first-grid"><div id=gridContainer2 dx-data-grid=camp.dataGridOptionsCampaign></div></div><div class=second-container><div class=label-container><input type=button ng-click="camp.selectInfoBtn($event, \'placement\')" value={{camp.ctrlBbtns.placement}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, \'creativeId\')" value={{camp.ctrlBbtns.creativeId}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, \'creativeSize\')" value={{camp.ctrlBbtns.creativeSize}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, \'creativeSize\')" value={{camp.ctrlBbtns.viewability}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, \'Operating System used\')" value={{camp.ctrlBbtns.os}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, \'carrier\')" value={{camp.ctrlBbtns.carrier}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, \'networkSeller\')" value={{camp.ctrlBbtns.networkSeller}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, \'connectionType\')" value={{camp.ctrlBbtns.connectionType}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, \'device\')" value={{camp.ctrlBbtns.device}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, \'extra\')" value={{camp.ctrlBbtns.extra}} class=nav-btn> <input type=button ng-click="camp.selectInfoBtn($event, \'publisher\')" value={{camp.ctrlBbtns.publisher}} class=nav-btn></div><div class=pie-chart-container id=chart-container><div class=pie-chart-header><h4>{{camp.pieChartHeader}}</h4></div><div class=target-cpa-container><input class=input-target-cpa type=text ng-model=camp.targetCpa></div></div></div></div>'),
e.put("app/home/home.html",'<div id=wrapper><!-- Brand and toggle get grouped for better mobile display --><div class=row><div class="left-nav col-lg-2 col-md-2 col-md-2"><ul class="nav nav-list"><li class=nav-header><a ui-sref=home.main translate=INDEX.LEFT_NAV.HOME></a></li><li class=active><a ui-sref=home.campaign translate=INDEX.LEFT_NAV.CAMPAIGN>Campaign</a></li><li><a href=#/ translate=INDEX.LEFT_NAV.OPTIMIZER>Optimizer</a></li><li><a href=#/ translate=INDEX.LEFT_NAV.BILLING>Billing</a></li></ul></div><div class="main-nav navbar-header col-lg-10 col-md-10 col-sm-10"><button type=button data-target=#navbarCollapse data-toggle=collapse class=navbar-toggle><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href=# class=navbar-brand>{{ \'INDEX.ADVERTISER_TITLE\' | translate }} {{ home.advertiser.name }}</a><div class=location><a ng-click="root.changeLang(\'ru\')"><i class="fa fa-globe fa-fw"></i> Русский </a>/ <a ng-click="root.changeLang(\'en\')"><i class="fa fa-globe fa-fw"></i> English</a></div></div></div><ui-view></ui-view></div>'),e.put("app/main/main.html",'<div class="container-home col-md-10 col-lg-offset-2 col-md-10 col-lg-offset-2"><h1 translate=MAIN.HOME>Home</h1><div class="col-md-3 col-md-offset-8 piker"><div dx-select-box=main.datePiker></div></div><div class=row><div id=container><div class="col-md-6 contLeft"><div dx-chart=main.chartOptions id=chart></div><div class=col-md-12><div class=checkbox-container><label class=label-checkbox><div dx-check-box=main.impressions></div></label><label class=label-checkbox><div dx-check-box=main.CPA></div></label><label class=label-checkbox><div dx-check-box=main.CPC></div></label><label class=label-checkbox><div dx-check-box=main.clicks></div></label></div><div class=checkbox-container><label class=label-checkbox><div dx-check-box=main.media></div></label><label class=label-checkbox><div dx-check-box=main.conversions></div></label><label class=label-checkbox><div dx-check-box=main.CTR></div></label></div></div></div><div id=visualMap></div></div></div><div class="row first-grid table-responsive"><table class="table table-bordered"><tr><td translate=MAIN.TOTALS.COLUMNS.TOTALS></td><td translate=MAIN.TOTALS.COLUMNS.SPENT></td><td translate=MAIN.TOTALS.COLUMNS.CONV></td><td translate=MAIN.TOTALS.COLUMNS.IMP></td><td translate=MAIN.TOTALS.COLUMNS.CPC></td><td translate=MAIN.TOTALS.COLUMNS.CPM></td><td translate=MAIN.TOTALS.COLUMNS.CVR></td><td translate=MAIN.TOTALS.COLUMNS.CTR></td></tr><tr><td></td><td>{{main.totals.spent}}</td><td>{{main.totals.conv}}</td><td>{{main.totals.imp}}</td><td>{{main.totals.cpc}}</td><td>{{main.totals.cpm}}</td><td>{{main.totals.cvr}}</td><td>{{main.totals.ctr}}</td></tr></table></div><div class="row second-grid"><div id=gridContainer2 dx-data-grid=main.dataGridOptionsMultiple></div></div></div>')}]);